!function e(t,s,i){function n(a,o){if(!s[a]){if(!t[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(r)return r(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var c=s[a]={exports:{}};t[a][0].call(c.exports,(function(e){return n(t[a][1][e]||e)}),c,c.exports,e,t,s,i)}return s[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(e,t,s){"use strict";var i=e(5),n=e(6),r=e(11),a=e(9),o=e(39).EventEmitterMicro,l=o.prototype,h=e(14),c=e(16),u=[h.BUSY,h.CHECKED,h.DISABLED,h.EXPANDED,h.HIDDEN,h.INVALID,h.PRESSED,h.SELECTED],d=function(e,t){o.call(this),this._options=t||{},this._selector=t.selector||".navitem",this._allowMultiSelection=t.multiSelection||!1;var s=u.indexOf(t.state)>-1?t.state:h.SELECTED;this.el=e,this._navItems=e.querySelectorAll(this._selector),this._navItems=Array.prototype.slice.call(this._navItems),this._state=s,this._navKeys={},this.selectOption=this.selectOption.bind(this),this._handleKeyDown=this._handleKeyDown.bind(this),this._setup()};d.ONSELECT="onSelect",d.ONFOCUS="onFocus";var m=d.prototype=Object.create(l);m._setup=function(){for(var e=[c.ARROW_DOWN,c.ARROW_RIGHT],t=[c.ARROW_UP,c.ARROW_LEFT],s=[c.ENTER,c.SPACEBAR],i=0;i<e.length;i++)this.addNavkey(e[i],this._arrowDown.bind(this,!0)),this.addNavkey(t[i],this._arrowDown.bind(this,null)),this.addNavkey(s[i],this.selectOption);this._setupNavItems()},m._setupNavItems=function(){if(this._navItems.length){for(var e=0;e<this._navItems.length;e++)this._setTabbingByIndex(e);void 0!==this.focusedNavItemIndex&&void 0!==this.selectedNavitemIndex||this.setSelectedItemByIndex(0,!0)}},m._setTabbingByIndex=function(e){var t=this._navItems[e];a(t.getAttribute(this._state))&&(this.focusedNavItemIndex=e,this.selectedNavitemIndex=e),a(t.getAttribute(h.DISABLED))?i(t):n(t)},m.start=function(){this._navItems.length<1||(this.el.addEventListener("keydown",this._handleKeyDown),this.el.addEventListener("click",this.selectOption))},m.stop=function(){this.el.removeEventListener("keydown",this._handleKeyDown),this.el.removeEventListener("click",this.selectOption)},m._handleKeyDown=function(e){if(e.ctrlKey||e.altKey||e.metaKey)return!0;this._navKeys[e.keyCode]&&this._navKeys[e.keyCode](e)},m._arrowDown=function(e,t,s){t.preventDefault(),this.previousNavItemIndex=this.focusedNavItemIndex,this.focusedNavItemIndex=this._calculateIndex(e,this.focusedNavItemIndex),this._navItems[this.focusedNavItemIndex].focus(),s||this.trigger(d.ONFOCUS,{event:t,index:this.focusedNavItemIndex,el:this._navItems[this.focusedNavItemIndex]})},m.selectOption=function(e,t){e.preventDefault();var s=this._navItems.indexOf(document.activeElement);s>-1&&document.activeElement!==this._navItems[this.focusedNavItemIndex]&&(this.focusedNavItemIndex=s),this._allowMultiSelection?this._toggleState():(r(this._navItems[this.selectedNavitemIndex],this._state,"false"),r(this._navItems[this.focusedNavItemIndex],this._state,"true")),this.selectedNavitemIndex=this.focusedNavItemIndex,t||this.trigger(d.ONSELECT,{event:e,index:this.selectedNavitemIndex,el:this._navItems[this.selectedNavitemIndex]})},m._toggleState=function(){var e=this._navItems[this.focusedNavItemIndex].getAttribute(this._state);a(e)?r(this._navItems[this.focusedNavItemIndex],this._state,"false"):r(this._navItems[this.focusedNavItemIndex],this._state,"true")},m._calculateIndex=function(e,t){var s=t;if(!0===e){if(s=++s>=this._navItems.length?0:s,!a(this._navItems[s].getAttribute(h.DISABLED))||this._navItems[s].hasAttribute("disabled"))return s}else if(s=--s<0?this._navItems.length-1:s,!a(this._navItems[s].getAttribute(h.DISABLED))||this._navItems[s].hasAttribute("disabled"))return s;return this._calculateIndex(e,s)},m.updateNavItems=function(){var e=this.el.querySelectorAll(this._selector);this._navItems=Array.prototype.slice.call(e)},m.addNavItem=function(e){e&&e.nodeType&&this._navItems.indexOf(e)<0&&(a(e.getAttribute(h.DISABLED))||n(e),this._navItems.push(e))},m.setSelectedItemByIndex=function(e,t){this._allowMultiSelection||isNaN(this.selectedNavitemIndex)||r(this._navItems[this.selectedNavitemIndex],this._state,"false"),this.focusedNavItemIndex=e,this.selectedNavitemIndex=e,r(this._navItems[this.selectedNavitemIndex],this._state,"true"),t||this.trigger(d.ONSELECT,{event:null,index:this.focusedNavItemIndex,el:this._navItems[this.focusedNavItemIndex]})},m.getSelectedItem=function(){return this._navItems[this.selectedNavitemIndex]},m.getFocusedItem=function(e){return this._navItems[this.focusedNavItemIndex]},m.addNavkey=function(e,t){"function"==typeof t&&"number"==typeof e?this._navKeys[e]=t:console.warn("incorrect types arguments were passed")},m.removeNavkey=function(e){delete this._navKeys[e]},m.destroy=function(){for(var e in l.destroy.call(this),this.stop(),this.el=null,this._options=null,this._selector=null,this.focusedNavItemIndex=null,this.selectedNavitemIndex=null,this._navItems=null,this._state=null,this.selectOption=null,this._handleKeyDown=null,this._navKeys)this._navKeys.hasOwnProperty(e)&&this.removeNavkey(e);this._navKeys=null},t.exports=d},{11:11,14:14,16:16,39:39,5:5,6:6,9:9}],2:[function(e,t,s){"use strict";var i=e(4),n=e(8),r=e(13),a=function(e,t){t=t||{},this._tabbables=null,this._excludeHidden=t.excludeHidden,this._firstTabbableElement=t.firstFocusElement,this._lastTabbableElement=null,this._relatedTarget=null,this.el=e,this._handleOnFocus=this._handleOnFocus.bind(this)},o=a.prototype;o.start=function(){this.updateTabbables(),n(this.el,null,this._excludeHidden),this._firstTabbableElement?this.el.contains(document.activeElement)||this._firstTabbableElement.focus():console.warn("this._firstTabbableElement is null, CircularTab needs at least one tabbable element."),this._relatedTarget=document.activeElement,document.addEventListener("focus",this._handleOnFocus,!0)},o.stop=function(){r(this.el),document.removeEventListener("focus",this._handleOnFocus,!0)},o.updateTabbables=function(){this._tabbables=i.getTabbableElements(this.el,this._excludeHidden),this._firstTabbableElement=this._firstTabbableElement||this._tabbables[0],this._lastTabbableElement=this._tabbables[this._tabbables.length-1]},o._handleOnFocus=function(e){if(this.el.contains(e.target))this._relatedTarget=e.target;else{if(e.preventDefault(),this.updateTabbables(),this._relatedTarget===this._lastTabbableElement||null===this._relatedTarget)return this._firstTabbableElement.focus(),void(this._relatedTarget=this._firstTabbableElement);if(this._relatedTarget===this._firstTabbableElement)return this._lastTabbableElement.focus(),void(this._relatedTarget=this._lastTabbableElement)}},o.destroy=function(){this.stop(),this.el=null,this._tabbables=null,this._firstTabbableElement=null,this._lastTabbableElement=null,this._relatedTarget=null,this._handleOnFocus=null},t.exports=a},{13:13,4:4,8:8}],3:[function(e,t,s){"use strict";var i=e(14),n=e(17),r=e(6),a=e(5),o=e(11),l=e(9),h=e(1),c=h.prototype,u=function(e,t){t=t||{},h.call(this,e,{selector:t.selector||"*[role="+n.OPTION+"]",state:t.state||i.SELECTED})},d=u.prototype=Object.create(c);d._setTabbingByIndex=function(e){var t=this._navItems[e];l(t.getAttribute(this._state))?(this.focusedNavItemIndex=e,this.selectedNavitemIndex=e,this._enableElement(t)):this._disableElement(t)},d.setSelectedItemByIndex=function(e,t){isNaN(this.selectedNavitemIndex)||this._disableElement(this._navItems[this.selectedNavitemIndex]),c.setSelectedItemByIndex.call(this,e,t),this._enableElement(this._navItems[this.selectedNavitemIndex])},d.addNavItem=function(e){e&&e.nodeType&&this._navItems.indexOf(e)<0&&(l(e.getAttribute(i.DISABLED))||this._disableElement(e),this._navItems.push(e))},d._arrowDown=function(e,t){c._arrowDown.call(this,e,t,!0),this.selectOption(t)},d._enableElement=function(e){r(e),o(e,this._state,"true")},d._disableElement=function(e){a(e),o(e,this._state,"false")},d.selectOption=function(e){a(this._navItems[this.selectedNavitemIndex]),c.selectOption.call(this,e),r(this._navItems[this.focusedNavItemIndex])},t.exports=u},{1:1,11:11,14:14,17:17,5:5,6:6,9:9}],4:[function(e,t,s){"use strict";var i=e(15),n=function(){this.focusableSelectors=i.join(",")},r=n.prototype;r.isFocusableElement=function(e,t,s){if(t&&!this._isDisplayed(e))return!1;var n=e.nodeName.toLowerCase(),r=i.indexOf(n)>-1;return"a"===n||(r?!e.disabled:!e.contentEditable||(s=s||parseFloat(e.getAttribute("tabindex")),!isNaN(s)))},r.isTabbableElement=function(e,t){if(t&&!this._isDisplayed(e))return!1;var s=e.getAttribute("tabindex");return s=parseFloat(s),isNaN(s)?this.isFocusableElement(e,t,s):s>=0},r._isDisplayed=function(e){var t=e.getBoundingClientRect();return(0!==t.top||0!==t.left||0!==t.width||0!==t.height)&&"hidden"!==window.getComputedStyle(e).visibility},r.getTabbableElements=function(e,t){for(var s=e.querySelectorAll(this.focusableSelectors),i=s.length,n=[],r=0;r<i;r++)this.isTabbableElement(s[r],t)&&n.push(s[r]);return n},r.getFocusableElements=function(e,t){for(var s=e.querySelectorAll(this.focusableSelectors),i=s.length,n=[],r=0;r<i;r++)this.isFocusableElement(s[r],t)&&n.push(s[r]);return n},t.exports=new n},{15:15}],5:[function(e,t,s){"use strict";var i=e(11);t.exports=function(e){i(e,"tabindex","-1")}},{11:11}],6:[function(e,t,s){"use strict";var i=e(11),n=e(4);t.exports=function(e){var t=[].concat(e);(t=t.filter((function(e){return!n.isTabbableElement(e)}))).length>0&&i(t,"tabindex",0)}},{11:11,4:4}],7:[function(e,t,s){"use strict";var i=e(11),n=e(14),r=e(4),a=function(e,t){var s=e.getAttribute("data-original-"+t);s||(s=e.getAttribute(t)||"",i(e,"data-original-"+t,s))};t.exports=function(e,t){if(r.isFocusableElement(e,t))a(e,"tabindex"),i(e,"tabindex",-1);else for(var s=r.getTabbableElements(e,t),o=s.length;o--;)a(s[o],"tabindex"),i(s[o],"tabindex",-1);a(e,n.HIDDEN),i(e,n.HIDDEN,!0)}},{11:11,14:14,4:4}],8:[function(e,t,s){"use strict";var i=e(7);t.exports=function e(t,s,n){s=s||document.body;for(var r=t,a=t;r=r.previousElementSibling;)i(r,n);for(;a=a.nextElementSibling;)i(a,n);t.parentElement&&t.parentElement!==s&&e(t.parentElement)}},{7:7}],9:[function(e,t,s){"use strict";t.exports=function(e){return"string"==typeof e?"true"===(e=e.toLowerCase()):e}},{}],10:[function(e,t,s){"use strict";var i=function(e,t){if("string"==typeof t)for(var s=t.split(/\s+/),i=0;i<s.length;i++)e.getAttribute(s[i])&&e.removeAttribute(s[i])};t.exports=function(e,t){if(e.length)for(var s=0;s<e.length;s++)i(e[s],t);else i(e,t)}},{}],11:[function(e,t,s){"use strict";var i=function(e,t,s){e&&1===e.nodeType&&e.setAttribute(t,s)};t.exports=function(e,t,s){if("string"!=typeof s&&(s=s.toString()),e)if(e.length)for(var n=0;n<e.length;n++)i(e[n],t,s);else i(e,t,s)}},{}],12:[function(e,t,s){"use strict";var i=e(10),n=e(11),r=e(14),a="data-original-",o=function(e,t){var s=e.getAttribute(a+t);"string"==typeof s&&(s.length?n(e,t,s):i(e,t),i(e,a+t))};t.exports=function(e){i(e,"tabindex "+r.HIDDEN),o(e,"tabindex"),o(e,r.HIDDEN);for(var t=e.querySelectorAll("["+a+"tabindex]"),s=t.length;s--;)o(t[s],"tabindex")}},{10:10,11:11,14:14}],13:[function(e,t,s){"use strict";var i=e(12);t.exports=function e(t,s){s=s||document.body;for(var n=t,r=t;n=n.previousElementSibling;)i(n);for(;r=r.nextElementSibling;)i(r);t.parentElement&&t.parentElement!==s&&e(t.parentElement)}},{12:12}],14:[function(e,t,s){"use strict";t.exports={AUTOCOMPLETE:"aria-autocomplete",CHECKED:"aria-checked",DISABLED:"aria-disabled",EXPANDED:"aria-expanded",HASPOPUP:"aria-haspopup",HIDDEN:"aria-hidden",INVALID:"aria-invalid",LABEL:"aria-label",LEVEL:"aria-level",MULTILINE:"aria-multiline",MULTISELECTABLE:"aria-multiselectable",ORIENTATION:"aria-orientation",PRESSED:"aria-pressed",READONLY:"aria-readonly",REQUIRED:"aria-required",SELECTED:"aria-selected",SORT:"aria-sort",VALUEMAX:"aria-valuemax",VALUEMIN:"aria-valuemin",VALUENOW:"aria-valuenow",VALUETEXT:"aria-valuetext",ATOMIC:"aria-atomic",BUSY:"aria-busy",LIVE:"aria-live",RELEVANT:"aria-relevant",DROPEFFECT:"aria-dropeffect",GRABBED:"aria-grabbed",ACTIVEDESCENDANT:"aria-activedescendant",CONTROLS:"aria-controls",DESCRIBEDBY:"aria-describedby",FLOWTO:"aria-flowto",LABELLEDBY:"aria-labelledby",OWNS:"aria-owns",POSINSET:"aria-posinset",SETSIZE:"aria-setsize"}},{}],15:[function(e,t,s){"use strict";t.exports=["input","select","textarea","button","optgroup","option","menuitem","fieldset","object","a[href]","*[tabindex]","*[contenteditable]"]},{}],16:[function(e,t,s){"use strict";t.exports=e(43)},{43:43}],17:[function(e,t,s){"use strict";t.exports={ALERT:"alert",ALERTDIALOG:"alertdialog",BUTTON:"button",CHECKBOX:"checkbox",DIALOG:"dialog",GRIDCELL:"gridcell",LINK:"link",LOG:"log",MARQUEE:"marquee",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",MENUITEMRADIO:"menuitemradio",OPTION:"option",PROGRESSBAR:"progressbar",RADIO:"radio",SCROLLBAR:"scrollbar",SLIDER:"slider",SPINBUTTON:"spinbutton",STATUS:"status",SWITCH:"switch",TAB:"tab",TABPANEL:"tabpanel",TEXTBOX:"textbox",TIMER:"timer",TOOLTIP:"tooltip",TREEITEM:"treeitem",COMBOBOX:"combobox",GRID:"grid",LISTBOX:"listbox",MENU:"menu",MENUBAR:"menubar",RADIOGROUP:"radiogroup",TABLIST:"tablist",TREE:"tree",TREEGRID:"treegrid",ARTICLE:"article",COLUMNHEADER:"columnheader",DEFINITION:"definition",DIRECTORY:"directory",DOCUMENT:"document",GROUP:"group",HEADING:"heading",IMG:"img",LIST:"list",LISTITEM:"listitem",MATH:"math",NOTE:"note",PRESENTATION:"presentation",REGION:"region",ROW:"row",ROWGROUP:"rowgroup",ROWHEADER:"rowheader",SEPARATOR:"separator",TOOLBAR:"toolbar",APPLICATION:"application",BANNER:"banner",COMPLEMENTARY:"complementary",CONTENTINFO:"contentinfo",FORM:"form",MAIN:"main",NAVIGATION:"navigation",SEARCH:"search"}},{}],18:[function(e,t,s){"use strict";t.exports={assert:e(19),count:e(20),countReset:e(21),dir:e(22),dirxml:e(23),enabled:e(24),error:e(25),group:e(26),groupCollapsed:e(27),groupEnd:e(28),info:e(29),log:e(31),profile:e(32),profileEnd:e(33),table:e(34),time:e(35),timeEnd:e(36),trace:e(37),warn:e(38)}},{19:19,20:20,21:21,22:22,23:23,24:24,25:25,26:26,27:27,28:28,29:29,31:31,32:32,33:33,34:34,35:35,36:36,37:37,38:38}],19:[function(e,t,s){"use strict";t.exports=e(30)("assert")},{30:30}],20:[function(e,t,s){"use strict";t.exports=e(30)("count")},{30:30}],21:[function(e,t,s){"use strict";t.exports=e(30)("countReset")},{30:30}],22:[function(e,t,s){"use strict";t.exports=e(30)("dir")},{30:30}],23:[function(e,t,s){"use strict";t.exports=e(30)("dirxml")},{30:30}],24:[function(e,t,s){"use strict";var i=!1,n=window||self;try{i=!!n.localStorage.getItem("f7c9180f-5c45-47b4-8de4-428015f096c0")}catch(e){}t.exports=i},{}],25:[function(e,t,s){"use strict";t.exports=e(30)("error")},{30:30}],26:[function(e,t,s){"use strict";t.exports=e(30)("group")},{30:30}],27:[function(e,t,s){"use strict";t.exports=e(30)("groupCollapsed")},{30:30}],28:[function(e,t,s){"use strict";t.exports=e(30)("groupEnd")},{30:30}],29:[function(e,t,s){"use strict";t.exports=e(30)("info")},{30:30}],30:[function(e,t,s){"use strict";var i=e(24);t.exports=function(e){return function(){if(i&&"object"==typeof window.console&&"function"==typeof console[e])return console[e].apply(console,Array.prototype.slice.call(arguments,0))}}},{24:24}],31:[function(e,t,s){"use strict";t.exports=e(30)("log")},{30:30}],32:[function(e,t,s){"use strict";t.exports=e(30)("profile")},{30:30}],33:[function(e,t,s){"use strict";t.exports=e(30)("profileEnd")},{30:30}],34:[function(e,t,s){"use strict";t.exports=e(30)("table")},{30:30}],35:[function(e,t,s){"use strict";t.exports=e(30)("time")},{30:30}],36:[function(e,t,s){"use strict";t.exports=e(30)("timeEnd")},{30:30}],37:[function(e,t,s){"use strict";t.exports=e(30)("trace")},{30:30}],38:[function(e,t,s){"use strict";t.exports=e(30)("warn")},{30:30}],39:[function(e,t,s){"use strict";t.exports={EventEmitterMicro:e(40)}},{40:40}],40:[function(e,t,s){"use strict";function i(){this._events={}}var n=i.prototype;n.on=function(e,t){this._events[e]=this._events[e]||[],this._events[e].unshift(t)},n.once=function(e,t){var s=this;this.on(e,(function i(n){s.off(e,i),void 0!==n?t(n):t()}))},n.off=function(e,t){if(this.has(e)){if(1===arguments.length)return this._events[e]=null,void delete this._events[e];var s=this._events[e].indexOf(t);-1!==s&&this._events[e].splice(s,1)}},n.trigger=function(e,t){if(this.has(e))for(var s=this._events[e].length-1;s>=0;s--)void 0!==t?this._events[e][s](t):this._events[e][s]()},n.has=function(e){return e in this._events!=!1&&0!==this._events[e].length},n.destroy=function(){for(var e in this._events)this._events[e]=null;this._events=null},t.exports=i},{}],41:[function(e,t,s){"use strict";var i={};t.exports=function(e,t,s){if(e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),s||!i.hasOwnProperty(e)){var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search),r=null===n?t:decodeURIComponent(n[1].replace(/\+/g," "));"true"!==r&&"false"!==r||(r="true"===r),isNaN(parseFloat(r))||(r=parseFloat(r)),i[e]=r}return i[e]}},{}],42:[function(e,t,s){},{}],43:[function(e,t,s){"use strict";t.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CONTROL:17,ALT:18,COMMAND:91,CAPSLOCK:20,ESCAPE:27,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ASTERISK:106,NUMPAD_PLUS:107,NUMPAD_DASH:109,NUMPAD_DOT:110,NUMPAD_SLASH:111,NUMPAD_EQUALS:187,TICK:192,LEFT_BRACKET:219,RIGHT_BRACKET:221,BACKSLASH:220,SEMICOLON:186,APOSTRAPHE:222,APOSTROPHE:222,SPACEBAR:32,CLEAR:12,COMMA:188,DOT:190,SLASH:191}},{}],44:[function(e,t,s){"use strict";var i=e(60).SharedInstance,n=function(){this._currentID=0};n.prototype.getNewID=function(){return this._currentID++,"raf:"+this._currentID},t.exports=i.share("ac-raf-emitter-id-generator:sharedRAFEmitterIDGeneratorInstance","1.0.3",n)},{60:60}],45:[function(e,t,s){"use strict";t.exports={majorVersionNumber:"3.x"}},{}],46:[function(e,t,s){"use strict";var i,n=e(39).EventEmitterMicro,r=e(56),a=e(55);function o(e){e=e||{},n.call(this),this.id=a.getNewID(),this.executor=e.executor||r,this._reset(),this._willRun=!1,this._didDestroy=!1}(i=o.prototype=Object.create(n.prototype)).run=function(){return this._willRun||(this._willRun=!0),this._subscribe()},i.cancel=function(){this._unsubscribe(),this._willRun&&(this._willRun=!1),this._reset()},i.destroy=function(){var e=this.willRun();return this.cancel(),this.executor=null,n.prototype.destroy.call(this),this._didDestroy=!0,e},i.willRun=function(){return this._willRun},i.isRunning=function(){return this._isRunning},i._subscribe=function(){return this.executor.subscribe(this)},i._unsubscribe=function(){return this.executor.unsubscribe(this)},i._onAnimationFrameStart=function(e){this._isRunning=!0,this._willRun=!1,this._didEmitFrameData||(this._didEmitFrameData=!0,this.trigger("start",e))},i._onAnimationFrameEnd=function(e){this._willRun||(this.trigger("stop",e),this._reset())},i._reset=function(){this._didEmitFrameData=!1,this._isRunning=!1},t.exports=o},{39:39,55:55,56:56}],47:[function(e,t,s){"use strict";var i,n=e(40);function r(e){e=e||{},this._reset(),this.updatePhases(),this.eventEmitter=new n,this._willRun=!1,this._totalSubscribeCount=-1,this._requestAnimationFrame=window.requestAnimationFrame,this._cancelAnimationFrame=window.cancelAnimationFrame,this._boundOnAnimationFrame=this._onAnimationFrame.bind(this),this._boundOnExternalAnimationFrame=this._onExternalAnimationFrame.bind(this)}(i=r.prototype).frameRequestedPhase="requested",i.startPhase="start",i.runPhases=["update","external","draw"],i.endPhase="end",i.disabledPhase="disabled",i.beforePhaseEventPrefix="before:",i.afterPhaseEventPrefix="after:",i.subscribe=function(e,t){return this._totalSubscribeCount++,this._nextFrameSubscribers[e.id]||(t?this._nextFrameSubscribersOrder.unshift(e.id):this._nextFrameSubscribersOrder.push(e.id),this._nextFrameSubscribers[e.id]=e,this._nextFrameSubscriberArrayLength++,this._nextFrameSubscriberCount++,this._run()),this._totalSubscribeCount},i.subscribeImmediate=function(e,t){return this._totalSubscribeCount++,this._subscribers[e.id]||(t?this._subscribersOrder.splice(this._currentSubscriberIndex+1,0,e.id):this._subscribersOrder.unshift(e.id),this._subscribers[e.id]=e,this._subscriberArrayLength++,this._subscriberCount++),this._totalSubscribeCount},i.unsubscribe=function(e){return!!this._nextFrameSubscribers[e.id]&&(this._nextFrameSubscribers[e.id]=null,this._nextFrameSubscriberCount--,0===this._nextFrameSubscriberCount&&this._cancel(),!0)},i.getSubscribeID=function(){return this._totalSubscribeCount+=1},i.destroy=function(){var e=this._cancel();return this.eventEmitter.destroy(),this.eventEmitter=null,this.phases=null,this._subscribers=null,this._subscribersOrder=null,this._nextFrameSubscribers=null,this._nextFrameSubscribersOrder=null,this._rafData=null,this._boundOnAnimationFrame=null,this._onExternalAnimationFrame=null,e},i.useExternalAnimationFrame=function(e){if("boolean"==typeof e){var t=this._isUsingExternalAnimationFrame;return e&&this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),!this._willRun||e||this._animationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this._isUsingExternalAnimationFrame=e,e?this._boundOnExternalAnimationFrame:t||!1}},i.updatePhases=function(){this.phases||(this.phases=[]),this.phases.length=0,this.phases.push(this.frameRequestedPhase),this.phases.push(this.startPhase),Array.prototype.push.apply(this.phases,this.runPhases),this.phases.push(this.endPhase),this._runPhasesLength=this.runPhases.length,this._phasesLength=this.phases.length},i._run=function(){if(!this._willRun)return this._willRun=!0,0===this.lastFrameTime&&(this.lastFrameTime=performance.now()),this._animationFrameActive=!0,this._isUsingExternalAnimationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this.phase===this.disabledPhase&&(this.phaseIndex=0,this.phase=this.phases[this.phaseIndex]),!0},i._cancel=function(){var e=!1;return this._animationFrameActive&&(this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),this._animationFrameActive=!1,this._willRun=!1,e=!0),this._isRunning||this._reset(),e},i._onAnimationFrame=function(e){for(this._subscribers=this._nextFrameSubscribers,this._subscribersOrder=this._nextFrameSubscribersOrder,this._subscriberArrayLength=this._nextFrameSubscriberArrayLength,this._subscriberCount=this._nextFrameSubscriberCount,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this.phaseIndex=0,this.phase=this.phases[this.phaseIndex],this._isRunning=!0,this._willRun=!1,this._didRequestNextRAF=!1,this._rafData.delta=e-this.lastFrameTime,this.lastFrameTime=e,this._rafData.fps=0,this._rafData.delta>=1e3&&(this._rafData.delta=0),0!==this._rafData.delta&&(this._rafData.fps=1e3/this._rafData.delta),this._rafData.time=e,this._rafData.naturalFps=this._rafData.fps,this._rafData.timeNow=Date.now(),this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&!1===this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._onAnimationFrameStart(this._rafData);for(this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase),this._runPhaseIndex=0;this._runPhaseIndex<this._runPhasesLength;this._runPhaseIndex++){for(this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&!1===this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]].trigger(this.phase,this._rafData);this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase)}for(this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&!1===this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._onAnimationFrameEnd(this._rafData);this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase),this._willRun?(this.phaseIndex=0,this.phaseIndex=this.phases[this.phaseIndex]):this._reset()},i._onExternalAnimationFrame=function(e){this._isUsingExternalAnimationFrame&&this._onAnimationFrame(e)},i._reset=function(){this._rafData||(this._rafData={}),this._rafData.time=0,this._rafData.delta=0,this._rafData.fps=0,this._rafData.naturalFps=0,this._rafData.timeNow=0,this._subscribers={},this._subscribersOrder=[],this._currentSubscriberIndex=-1,this._subscriberArrayLength=0,this._subscriberCount=0,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._didEmitFrameData=!1,this._animationFrame=null,this._animationFrameActive=!1,this._isRunning=!1,this._shouldReset=!1,this.lastFrameTime=0,this._runPhaseIndex=-1,this.phaseIndex=-1,this.phase=this.disabledPhase},t.exports=r},{40:40}],48:[function(e,t,s){"use strict";var i=e(50),n=function(e){this.phase=e,this.rafEmitter=new i,this._cachePhaseIndex(),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.cancelAnimationFrame=this.cancelAnimationFrame.bind(this),this._onBeforeRAFExecutorStart=this._onBeforeRAFExecutorStart.bind(this),this._onBeforeRAFExecutorPhase=this._onBeforeRAFExecutorPhase.bind(this),this._onAfterRAFExecutorPhase=this._onAfterRAFExecutorPhase.bind(this),this.rafEmitter.on(this.phase,this._onRAFExecuted.bind(this)),this.rafEmitter.executor.eventEmitter.on("before:start",this._onBeforeRAFExecutorStart),this.rafEmitter.executor.eventEmitter.on("before:"+this.phase,this._onBeforeRAFExecutorPhase),this.rafEmitter.executor.eventEmitter.on("after:"+this.phase,this._onAfterRAFExecutorPhase),this._frameCallbacks=[],this._currentFrameCallbacks=[],this._nextFrameCallbacks=[],this._phaseActive=!1,this._currentFrameID=-1,this._cancelFrameIdx=-1,this._frameCallbackLength=0,this._currentFrameCallbacksLength=0,this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0},r=n.prototype;r.requestAnimationFrame=function(e,t){return!0===t&&this.rafEmitter.executor.phaseIndex>0&&this.rafEmitter.executor.phaseIndex<=this.phaseIndex?this._phaseActive?(this._currentFrameID=this.rafEmitter.executor.subscribeImmediate(this.rafEmitter,!0),this._frameCallbacks.push(this._currentFrameID,e),this._frameCallbackLength+=2):(this._currentFrameID=this.rafEmitter.executor.subscribeImmediate(this.rafEmitter,!1),this._currentFrameCallbacks.push(this._currentFrameID,e),this._currentFrameCallbacksLength+=2):(this._currentFrameID=this.rafEmitter.run(),this._nextFrameCallbacks.push(this._currentFrameID,e),this._nextFrameCallbacksLength+=2),this._currentFrameID},r.cancelAnimationFrame=function(e){this._cancelFrameIdx=this._nextFrameCallbacks.indexOf(e),this._cancelFrameIdx>-1?this._cancelNextAnimationFrame():(this._cancelFrameIdx=this._currentFrameCallbacks.indexOf(e),this._cancelFrameIdx>-1?this._cancelCurrentAnimationFrame():(this._cancelFrameIdx=this._frameCallbacks.indexOf(e),this._cancelFrameIdx>-1&&this._cancelRunningAnimationFrame()))},r._onRAFExecuted=function(e){for(this._frameCallbackIteration=0;this._frameCallbackIteration<this._frameCallbackLength;this._frameCallbackIteration+=2)this._frameCallbacks[this._frameCallbackIteration+1](e.time,e);this._frameCallbacks.length=0,this._frameCallbackLength=0},r._onBeforeRAFExecutorStart=function(){Array.prototype.push.apply(this._currentFrameCallbacks,this._nextFrameCallbacks.splice(0,this._nextFrameCallbacksLength)),this._currentFrameCallbacksLength=this._nextFrameCallbacksLength,this._nextFrameCallbacks.length=0,this._nextFrameCallbacksLength=0},r._onBeforeRAFExecutorPhase=function(){this._phaseActive=!0,Array.prototype.push.apply(this._frameCallbacks,this._currentFrameCallbacks.splice(0,this._currentFrameCallbacksLength)),this._frameCallbackLength=this._currentFrameCallbacksLength,this._currentFrameCallbacks.length=0,this._currentFrameCallbacksLength=0},r._onAfterRAFExecutorPhase=function(){this._phaseActive=!1},r._cachePhaseIndex=function(){this.phaseIndex=this.rafEmitter.executor.phases.indexOf(this.phase)},r._cancelRunningAnimationFrame=function(){this._frameCallbacks.splice(this._cancelFrameIdx,2),this._frameCallbackLength-=2},r._cancelCurrentAnimationFrame=function(){this._currentFrameCallbacks.splice(this._cancelFrameIdx,2),this._currentFrameCallbacksLength-=2},r._cancelNextAnimationFrame=function(){this._nextFrameCallbacks.splice(this._cancelFrameIdx,2),this._nextFrameCallbacksLength-=2,0===this._nextFrameCallbacksLength&&this.rafEmitter.cancel()},t.exports=n},{50:50}],49:[function(e,t,s){"use strict";var i=e(48),n=function(){this.events={}},r=n.prototype;r.requestAnimationFrame=function(e){return this.events[e]||(this.events[e]=new i(e)),this.events[e].requestAnimationFrame},r.cancelAnimationFrame=function(e){return this.events[e]||(this.events[e]=new i(e)),this.events[e].cancelAnimationFrame},t.exports=new n},{48:48}],50:[function(e,t,s){"use strict";var i=e(46),n=function(e){i.call(this,e)};(n.prototype=Object.create(i.prototype))._subscribe=function(){return this.executor.subscribe(this,!0)},t.exports=n},{46:46}],51:[function(e,t,s){"use strict";var i=e(49);t.exports=i.cancelAnimationFrame("draw")},{49:49}],52:[function(e,t,s){"use strict";var i=e(49);t.exports=i.cancelAnimationFrame("update")},{49:49}],53:[function(e,t,s){"use strict";var i=e(49);t.exports=i.requestAnimationFrame("draw")},{49:49}],54:[function(e,t,s){"use strict";var i=e(49);t.exports=i.requestAnimationFrame("external")},{49:49}],55:[function(e,t,s){"use strict";var i=e(60).SharedInstance,n=e(45).majorVersionNumber,r=function(){this._currentID=0};r.prototype.getNewID=function(){return this._currentID++,"raf:"+this._currentID},t.exports=i.share("@marcom/ac-raf-emitter/sharedRAFEmitterIDGeneratorInstance",n,r)},{45:45,60:60}],56:[function(e,t,s){"use strict";var i=e(60).SharedInstance,n=e(45).majorVersionNumber,r=e(47);t.exports=i.share("@marcom/ac-raf-emitter/sharedRAFExecutorInstance",n,r)},{45:45,47:47,60:60}],57:[function(e,t,s){"use strict";var i=e(49);t.exports=i.requestAnimationFrame("update")},{49:49}],58:[function(e,t,s){"use strict";var i;function n(e){e=e||{},this._reset(),this._willRun=!1,this._totalSubscribeCount=-1,this._requestAnimationFrame=window.requestAnimationFrame,this._cancelAnimationFrame=window.cancelAnimationFrame,this._boundOnAnimationFrame=this._onAnimationFrame.bind(this),this._boundOnExternalAnimationFrame=this._onExternalAnimationFrame.bind(this)}e(42),(i=n.prototype).subscribe=function(e,t){return this._totalSubscribeCount++,this._nextFrameSubscribers[e.id]||(t?this._nextFrameSubscribersOrder.unshift(e.id):this._nextFrameSubscribersOrder.push(e.id),this._nextFrameSubscribers[e.id]=e,this._nextFrameSubscriberArrayLength++,this._nextFrameSubscriberCount++,this._run()),this._totalSubscribeCount},i.unsubscribe=function(e){return!!this._nextFrameSubscribers[e.id]&&(this._nextFrameSubscribers[e.id]=null,this._nextFrameSubscriberCount--,0===this._nextFrameSubscriberCount&&this._cancel(),!0)},i.trigger=function(e,t){var s;for(s=0;s<this._subscriberArrayLength;s++)null!==this._subscribers[this._subscribersOrder[s]]&&!1===this._subscribers[this._subscribersOrder[s]]._didDestroy&&this._subscribers[this._subscribersOrder[s]].trigger(e,t)},i.destroy=function(){var e=this._cancel();return this._subscribers=null,this._subscribersOrder=null,this._nextFrameSubscribers=null,this._nextFrameSubscribersOrder=null,this._rafData=null,this._boundOnAnimationFrame=null,this._onExternalAnimationFrame=null,e},i.useExternalAnimationFrame=function(e){if("boolean"==typeof e){var t=this._isUsingExternalAnimationFrame;return e&&this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),!this._willRun||e||this._animationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this._isUsingExternalAnimationFrame=e,e?this._boundOnExternalAnimationFrame:t||!1}},i._run=function(){if(!this._willRun)return this._willRun=!0,0===this.lastFrameTime&&(this.lastFrameTime=performance.now()),this._animationFrameActive=!0,this._isUsingExternalAnimationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),!0},i._cancel=function(){var e=!1;return this._animationFrameActive&&(this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),this._animationFrameActive=!1,this._willRun=!1,e=!0),this._isRunning||this._reset(),e},i._onSubscribersAnimationFrameStart=function(e){var t;for(t=0;t<this._subscriberArrayLength;t++)null!==this._subscribers[this._subscribersOrder[t]]&&!1===this._subscribers[this._subscribersOrder[t]]._didDestroy&&this._subscribers[this._subscribersOrder[t]]._onAnimationFrameStart(e)},i._onSubscribersAnimationFrameEnd=function(e){var t;for(t=0;t<this._subscriberArrayLength;t++)null!==this._subscribers[this._subscribersOrder[t]]&&!1===this._subscribers[this._subscribersOrder[t]]._didDestroy&&this._subscribers[this._subscribersOrder[t]]._onAnimationFrameEnd(e)},i._onAnimationFrame=function(e){this._subscribers=this._nextFrameSubscribers,this._subscribersOrder=this._nextFrameSubscribersOrder,this._subscriberArrayLength=this._nextFrameSubscriberArrayLength,this._subscriberCount=this._nextFrameSubscriberCount,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._isRunning=!0,this._willRun=!1,this._didRequestNextRAF=!1,this._rafData.delta=e-this.lastFrameTime,this.lastFrameTime=e,this._rafData.fps=0,this._rafData.delta>=1e3&&(this._rafData.delta=0),0!==this._rafData.delta&&(this._rafData.fps=1e3/this._rafData.delta),this._rafData.time=e,this._rafData.naturalFps=this._rafData.fps,this._rafData.timeNow=Date.now(),this._onSubscribersAnimationFrameStart(this._rafData),this.trigger("update",this._rafData),this.trigger("external",this._rafData),this.trigger("draw",this._rafData),this._onSubscribersAnimationFrameEnd(this._rafData),this._willRun||this._reset()},i._onExternalAnimationFrame=function(e){this._isUsingExternalAnimationFrame&&this._onAnimationFrame(e)},i._reset=function(){this._rafData={time:0,delta:0,fps:0,naturalFps:0,timeNow:0},this._subscribers={},this._subscribersOrder=[],this._subscriberArrayLength=0,this._subscriberCount=0,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._didEmitFrameData=!1,this._animationFrame=null,this._animationFrameActive=!1,this._isRunning=!1,this._shouldReset=!1,this.lastFrameTime=0},t.exports=n},{42:42}],59:[function(e,t,s){"use strict";var i=e(60).SharedInstance,n=e(58);t.exports=i.share("ac-raf-executor:sharedRAFExecutorInstance","2.0.1",n)},{58:58,60:60}],60:[function(e,t,s){"use strict";t.exports={SharedInstance:e(61)}},{61:61}],61:[function(e,t,s){"use strict";var i,n=window,r=n.AC,a=(i={},{get:function(e,t){var s=null;return i[e]&&i[e][t]&&(s=i[e][t]),s},set:function(e,t,s){return i[e]||(i[e]={}),i[e][t]="function"==typeof s?new s:s,i[e][t]},share:function(e,t,s){var i=this.get(e,t);return i||(i=this.set(e,t,s)),i},remove:function(e,t){var s=typeof t;if("string"!==s&&"number"!==s)i[e]&&(i[e]=null);else{if(!i[e]||!i[e][t])return;i[e][t]=null}}});r||(r=n.AC={}),r.SharedInstance||(r.SharedInstance=a),t.exports=r.SharedInstance},{}],62:[function(e,t,s){"use strict";t.exports=function(e){var t=(e=(e=e||window.location.search).replace(/^[^?]*\?/,""))?e.split("&"):[],s={},i=new RegExp("=");return t.forEach((function(e){var t,n;if(i.test(e)){var r=e.split("=",2);t=r[0],n=r[1]}else t=e,n=null;s[t]=n})),s}},{}],63:[function(e,t,s){"use strict";var i=e(62);t.exports=function(e){var t,s="",n=!1;return e?window.URL&&"function"==typeof window.URL?t=new URL(e,window.location):((t=document.createElement("a")).href=e,t.href=t.href,function(e){var t=e.port,s=new RegExp(":"+t);return t&&!s.test(e.href)&&s.test(e.host)}(t)&&(s=t.host.replace(new RegExp(":"+t.port),""),n=!0)):t=window.location,{hash:t.hash,host:s||t.host,hostname:t.hostname,href:t.href,origin:t.origin||t.protocol+"//"+(s||t.host),pathname:t.pathname,port:n?"":t.port,protocol:t.protocol,search:t.search,searchParams:i(t.search)}}},{62:62}],64:[function(e,t,s){"use strict";class i{constructor(e={}){this.options=e,"loading"===document.readyState?document.addEventListener("readystatechange",e=>{"interactive"===document.readyState&&this._init()}):this._init()}_init(){if(this._images=Array.from(document.querySelectorAll("*[".concat(i.DATA_ATTRIBUTE,"]"))),this.AnimSystem=this._findAnim(),null===this.AnimSystem)return null;this._addKeyframesToImages()}_defineKeyframeOptions(e=null){const t=e.getAttribute(i.DATA_DOWNLOAD_AREA_KEYFRAME)||"{}";return Object.assign({},{start:"t - 200vh",end:"b + 100vh",event:"AnimLazyImage"},JSON.parse(t))}_addKeyframesToImages(){this._scrollGroup=this.AnimSystem.getGroupForTarget(document.body),this._images.forEach(e=>{let t=this._defineKeyframeOptions(e);this._scrollGroup.addKeyframe(e,t).controller.once("AnimLazyImage:enter",()=>{this._imageIsInLoadRange(e)})})}_cleanUpImageAttributes(e){this._scrollGroup.getControllerForTarget(e).getNearestKeyframeForAttribute("AnimLazyImage").isCurrentlyInRange||e.setAttribute(i.DATA_ATTRIBUTE,"")}_downloadingImageAttributes(e){e.removeAttribute(i.DATA_ATTRIBUTE)}_imageIsInLoadRange(e){this._downloadImage(e)}_downloadImage(e){this._downloadingImageAttributes(e)}_findAnim(){var e=Array.from(document.querySelectorAll("[data-anim-group],[data-anim-scroll-group],[data-anim-time-group]"));return e.map(e=>e._animInfo?e._animInfo.group:null).filter(e=>null!==e),e[0]&&e[0]._animInfo?e[0]._animInfo.group.anim:(console.error("AnimLazyImage: AnimSystem not found, please initialize anim before instantiating"),null)}}i.DATA_DOWNLOAD_AREA_KEYFRAME="data-download-area-keyframe",i.DATA_ATTRIBUTE="data-anim-lazy-image",t.exports=i},{}],65:[function(e,t,s){"use strict";t.exports={version:"3.0.10",major:"3.x",majorMinor:"3.0"}},{}],66:[function(e,t,s){"use strict";const i=e(39).EventEmitterMicro,n=e(71),r=e(67),a=e(68),o=e(70),l=e(79),h=e(80),c=e(65),u={update:e(57),cancelUpdate:e(52),external:e(54),draw:e(53)};let d=null;t.exports=window.AC.SharedInstance.share("AnimSystem",c.major,class extends i{constructor(){if(super(),d)throw"You cannot create multiple AnimSystems. You probably want to create multiple groups instead. You can have unlimited groups on a page";d=this,this.groups=[],this.scrollSystems=[],this.timeSystems=[],this._forceUpdateRAFId=-1,this._initialized=!1,this.model=n,this.version=c.version,this.onScroll=this.onScroll.bind(this),this.onResizedDebounced=this.onResizedDebounced.bind(this),this.onResizeImmediate=this.onResizeImmediate.bind(this)}initialize(){this._initialized||(this._initialized=!0,this.timeSystems=[],this.scrollSystems=[],this.groups=[],this.setupEvents(),this.initializeResizeFilter(),this.initializeModel(),this.createDOMGroups(),this.createDOMKeyframes())}remove(){return Promise.all(this.groups.map(e=>e.remove())).then(()=>{this.groups=null,this.scrollSystems=null,this.timeSystems=null,window.clearTimeout(n.RESIZE_TIMEOUT),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResizeImmediate),this._events={},this._initialized=!1})}destroy(){return this.remove()}createTimeGroup(e){let t=new h(e,this);return this.groups.push(t),this.timeSystems.push(t),this.trigger(n.EVENTS.ON_GROUP_CREATED,t),t}createScrollGroup(e){if(!e)throw"AnimSystem scroll based groups must supply an HTMLElement";let t=new l(e,this);return this.groups.push(t),this.scrollSystems.push(t),this.trigger(n.EVENTS.ON_GROUP_CREATED,t),t}removeGroup(e){return Promise.all(e.keyframeControllers.map(t=>e.removeKeyframeController(t))).then(()=>{let t=this.groups.indexOf(e);-1!==t&&this.groups.splice(t,1),t=this.scrollSystems.indexOf(e),-1!==t&&this.scrollSystems.splice(t,1),t=this.timeSystems.indexOf(e),-1!==t&&this.timeSystems.splice(t,1),e.destroy()})}createDOMGroups(){document.body.setAttribute("data-anim-scroll-group","body"),document.querySelectorAll("[data-anim-scroll-group]").forEach(e=>this.createScrollGroup(e)),document.querySelectorAll("[data-anim-time-group]").forEach(e=>this.createTimeGroup(e)),this.trigger(n.EVENTS.ON_DOM_GROUPS_CREATED,this.groups)}createDOMKeyframes(){let e=[];[r.DATA_ATTRIBUTE,a.DATA_ATTRIBUTE,o.DATA_ATTRIBUTE].forEach((function(t){for(let s=0;s<12;s++)e.push(t+(0===s?"":"-"+(s-1)))}));for(let t=0;t<e.length;t++){let s=e[t],i=document.querySelectorAll("["+s+"]");for(let e=0;e<i.length;e++){const t=i[e],n=JSON.parse(t.getAttribute(s));this.addKeyframe(t,n)}}u.update(()=>{this.groups.forEach(e=>e.onKeyframesDirty({silent:!0})),this.groups.forEach(e=>e.trigger(n.EVENTS.ON_DOM_KEYFRAMES_CREATED,e)),this.trigger(n.EVENTS.ON_DOM_KEYFRAMES_CREATED,this),this.groups.forEach(e=>{e.forceUpdate({waitForNextUpdate:!1,silent:!0}),e.reconcile()}),this.onScroll()},!0)}initializeResizeFilter(){if(n.cssDimensionsTracker)return;const e=document.querySelector(".cssDimensionsTracker")||document.createElement("div");e.setAttribute("cssDimensionsTracker","true"),e.style.position="fixed",e.style.top="0",e.style.width="100%",e.style.height="100vh",e.style.pointerEvents="none",e.style.visibility="hidden",e.style.zIndex="-1",document.documentElement.appendChild(e),n.cssDimensionsTracker=e}initializeModel(){n.pageMetrics.windowHeight=n.cssDimensionsTracker.clientHeight,n.pageMetrics.windowWidth=n.cssDimensionsTracker.clientWidth,n.pageMetrics.scrollY=window.scrollY||window.pageYOffset,n.pageMetrics.scrollX=window.scrollX||window.pageXOffset,n.pageMetrics.breakpoint=n.getBreakpoint();let e=document.documentElement.getBoundingClientRect();n.pageMetrics.documentOffsetX=e.left+n.pageMetrics.scrollX,n.pageMetrics.documentOffsetY=e.top+n.pageMetrics.scrollY}setupEvents(){window.removeEventListener("scroll",this.onScroll),window.addEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResizeImmediate),window.addEventListener("resize",this.onResizeImmediate)}onScroll(){n.pageMetrics.scrollY=window.scrollY||window.pageYOffset,n.pageMetrics.scrollX=window.scrollX||window.pageXOffset;for(let e=0,t=this.scrollSystems.length;e<t;e++)this.scrollSystems[e]._onScroll();this.trigger(n.PageEvents.ON_SCROLL,n.pageMetrics)}onResizeImmediate(){let e=n.cssDimensionsTracker.clientWidth,t=n.cssDimensionsTracker.clientHeight;if(e===n.pageMetrics.windowWidth&&t===n.pageMetrics.windowHeight)return;n.pageMetrics.windowWidth=e,n.pageMetrics.windowHeight=t,n.pageMetrics.scrollY=window.scrollY||window.pageYOffset,n.pageMetrics.scrollX=window.scrollX||window.pageXOffset;let s=document.documentElement.getBoundingClientRect();n.pageMetrics.documentOffsetX=s.left+n.pageMetrics.scrollX,n.pageMetrics.documentOffsetY=s.top+n.pageMetrics.scrollY,window.clearTimeout(n.RESIZE_TIMEOUT),n.RESIZE_TIMEOUT=window.setTimeout(this.onResizedDebounced,250),this.trigger(n.PageEvents.ON_RESIZE_IMMEDIATE,n.pageMetrics)}onResizedDebounced(){u.update(()=>{let e=n.pageMetrics.breakpoint,t=n.getBreakpoint();if(t!==e){n.pageMetrics.previousBreakpoint=e,n.pageMetrics.breakpoint=t;for(let e=0,t=this.groups.length;e<t;e++)this.groups[e]._onBreakpointChange();this.trigger(n.PageEvents.ON_BREAKPOINT_CHANGE,n.pageMetrics)}for(let e=0,t=this.groups.length;e<t;e++)this.groups[e].forceUpdate({waitForNextUpdate:!1});this.trigger(n.PageEvents.ON_RESIZE_DEBOUNCED,n.pageMetrics)},!0)}forceUpdate({waitForNextUpdate:e=!0,silent:t=!1}={}){-1!==this._forceUpdateRAFId&&u.cancelUpdate(this._forceUpdateRAFId);let s=()=>{for(let e=0,s=this.groups.length;e<s;e++){this.groups[e].forceUpdate({waitForNextUpdate:!1,silent:t})}return-1};this._forceUpdateRAFId=e?u.update(s,!0):s()}addKeyframe(e,t){let s=this.getGroupForTarget(e);return s=s||this.getGroupForTarget(document.body),s.addKeyframe(e,t)}getGroupForTarget(e){if(e._animInfo&&e._animInfo.group)return e._animInfo.group;let t=e;for(;t;){if(t._animInfo&&t._animInfo.isGroup)return t._animInfo.group;t=t.parentElement}}getControllerForTarget(e){return e._animInfo&&e._animInfo.controller?e._animInfo.controller:null}})},{39:39,52:52,53:53,54:54,57:57,65:65,67:67,68:68,70:70,71:71,79:79,80:80}],67:[function(e,t,s){"use strict";const i=e(71),n=e(157),r=e(72),a=e(76),o=e(81),l=e(82);class h{constructor(e,t){this.controller=e,this.anchors=[],this.jsonProps=t,this.ease=e.group.defaultEase,this.easeFunctionString=i.KeyframeDefaults.easeFunctionString,this.easeFunction=r[this.easeFunctionString],this.start=0,this.end=0,this.localT=0,this.curvedT=0,this.id=0,this.event="",this.needsEventDispatch=!1,this.snapAtCreation=!1,this.isEnabled=!1,this.animValues={},this.breakpointMask="SMLX",this.disabledWhen=[],this.keyframeType=i.KeyframeTypes.Interpolation,this.hold=!1}destroy(){this.controller=null,this.disabledWhen=null,this.anchors=null,this.jsonProps=null,this.easeFunction=null,this.animValues=null}remove(){return this.controller.removeKeyframe(this)}parseOptions(e){if(this.jsonProps=e,e.relativeTo&&console.error("KeyframeError: relativeTo has been removed. Use 'anchors' property instead. Found 'relativeTo':\"".concat(e.relativeTo,'"')),""!==e.anchors&&e.anchors?(this.anchors=[],e.anchors=Array.isArray(e.anchors)?e.anchors:[e.anchors],e.anchors.forEach((t,s)=>{let i=l(t,this.controller.group.element);if(!i){let i="";return"string"==typeof t&&(i=" Provided value was a string, so a failed attempt was made to find anchor with the provided querystring in group.element, or in the document."),void console.warn("Keyframe on",this.controller.element," failed to find anchor at index ".concat(s," in array"),e.anchors,". Anchors must be JS Object references, Elements references, or valid query selector strings. ".concat(i))}this.anchors.push(i),this.controller.group.metrics.add(i)})):(this.anchors=[],e.anchors=[]),e.ease?this.ease=parseFloat(e.ease):e.ease=this.ease,e.hasOwnProperty("snapAtCreation")?this.snapAtCreation=e.snapAtCreation:e.snapAtCreation=this.snapAtCreation,e.easeFunction?this.easeFunction=e.easeFunction:e.easeFunction=this.easeFunctionString,e.breakpointMask?this.breakpointMask=e.breakpointMask:e.breakpointMask=this.breakpointMask,e.disabledWhen?this.disabledWhen=Array.isArray(e.disabledWhen)?e.disabledWhen:[e.disabledWhen]:e.disabledWhen=this.disabledWhen,e.hasOwnProperty("hold")?this.hold=e.hold:e.hold=this.hold,this.easeFunction=r[e.easeFunction],!r.hasOwnProperty(e.easeFunction)){let t=a.fromCSSString(e.easeFunction);t?this.easeFunction=t:console.error("Keyframe parseOptions cannot find EasingFunction named '"+e.easingFunction+"'")}for(let t in e){if(-1!==i.KeyframeJSONReservedWords.indexOf(t))continue;let s=e[t];if(!Array.isArray(s))continue;if(this.animValues[t]=this.controller.group.expressionParser.parseArray(this,s),void 0===this.controller.tweenProps[t]||!this.controller._ownerIsElement){let e=0;this.controller._ownerIsElement||(e=this.controller.element[t]||0);let s=new i.TargetValue(e,i.KeyframeDefaults.epsilon,this.snapAtCreation);this.controller.tweenProps[t]=s}let n=this.controller.tweenProps[t];if(e.epsilon)n.epsilon=e.epsilon;else{let e=Math.abs(this.animValues[t][0]-this.animValues[t][1]),s=Math.min(.001*e,n.epsilon,i.KeyframeDefaults.epsilon);n.epsilon=Math.max(s,1e-4)}}this.keyframeType=this.hold?i.KeyframeTypes.InterpolationForward:i.KeyframeTypes.Interpolation,e.event&&(this.event=e.event)}overwriteProps(e){this.animValues={};let t=Object.assign({},this.jsonProps,e);this.controller.updateKeyframe(this,t)}updateLocalProgress(e){if(this.start===this.end||e<this.start||e>this.end)return this.localT=e<this.start?0:e>this.end?1:0,void(this.curvedT=this.easeFunction(this.localT));const t=(e-this.start)/(this.end-this.start),s=this.hold?this.localT:0;this.localT=n.clamp(t,s,1),this.curvedT=this.easeFunction(this.localT)}reconcile(e){let t=this.animValues[e],s=this.controller.tweenProps[e];s.initialValue=t[0],s.target=t[0]+this.curvedT*(t[1]-t[0]),s.current!==s.target&&(s.current=s.target,this.needsEventDispatch||(this.needsEventDispatch=!0,this.controller.keyframesRequiringDispatch.push(this)))}reset(e){this.localT=e||0;var t=this.ease;this.ease=1;for(let e in this.animValues)this.reconcile(e);this.ease=t}onDOMRead(e){let t=this.animValues[e],s=this.controller.tweenProps[e];s.target=t[0]+this.curvedT*(t[1]-t[0]);let i=s.current;s.current+=(s.target-s.current)*this.ease;let n=s.current-s.target;n<s.epsilon&&n>-s.epsilon&&(s.current=s.target,n=0),""===this.event||this.needsEventDispatch||(n>s.epsilon||n<-s.epsilon||0===n&&i!==s.current)&&(this.needsEventDispatch=!0,this.controller.keyframesRequiringDispatch.push(this))}isInRange(e){return e>=this.start&&e<=this.end}setEnabled(e){e=e||o(Array.from(document.documentElement.classList));let t=-1!==this.breakpointMask.indexOf(i.pageMetrics.breakpoint),s=!1;return this.disabledWhen.length>0&&(s=this.disabledWhen.some(t=>void 0!==e[t])),this.isEnabled=t&&!s,this.isEnabled}evaluateConstraints(){this.start=this.controller.group.expressionParser.parseTimeValue(this,this.jsonProps.start),this.end=this.controller.group.expressionParser.parseTimeValue(this,this.jsonProps.end),this.evaluateInterpolationConstraints()}evaluateInterpolationConstraints(){for(let e in this.animValues){let t=this.jsonProps[e];this.animValues[e]=this.controller.group.expressionParser.parseArray(this,t)}}}h.DATA_ATTRIBUTE="data-anim-tween",t.exports=h},{157:157,71:71,72:72,76:76,81:81,82:82}],68:[function(e,t,s){"use strict";const i=e(67),n=e(71);class r extends i{constructor(e,t){super(e,t),this.keyframeType=n.KeyframeTypes.CSSClass,this._triggerType=r.TRIGGER_TYPE_CSS_CLASS,this.cssClass="",this.friendlyName="",this.style={on:null,off:null},this.toggle=!1,this.isApplied=!1}parseOptions(e){if(!this.controller._ownerIsElement)throw new TypeError("CSS Keyframes cannot be applied to JS Objects");if(e.x=void 0,e.y=void 0,e.scale=void 0,e.scaleX=void 0,e.scaleY=void 0,e.rotation=void 0,e.opacity=void 0,e.hold=void 0,void 0!==e.toggle&&(this.toggle=e.toggle),void 0!==e.cssClass)this._triggerType=r.TRIGGER_TYPE_CSS_CLASS,this.cssClass=e.cssClass,this.friendlyName="."+this.cssClass,void 0===this.controller.tweenProps.targetClasses&&(this.controller.tweenProps.targetClasses={add:[],remove:[]});else{if(void 0===e.style||!this.isValidStyleProperty(e.style))throw new TypeError("KeyframeCSSClass no 'cssClass` property found. If using `style` property its also missing or invalid");if(this._triggerType=r.TRIGGER_TYPE_STYLE_PROPERTY,this.style=e.style,this.friendlyName="style",this.toggle=void 0!==this.style.off||this.toggle,this.toggle&&void 0===this.style.off){this.style.off={};for(let e in this.style.on)this.style.off[e]=""}void 0===this.controller.tweenProps.targetStyles&&(this.controller.tweenProps.targetStyles={})}if(void 0===e.end&&(e.end=e.start),e.toggle=this.toggle,this._triggerType===r.TRIGGER_TYPE_CSS_CLASS)this.isApplied=this.controller.element.classList.contains(this.cssClass);else{let e=getComputedStyle(this.controller.element);this.isApplied=!0;for(let t in this.style.on)if(e[t]!==this.style.on[t]){this.isApplied=!1;break}}i.prototype.parseOptions.call(this,e),this.animValues[this.friendlyName]=[0,0],void 0===this.controller.tweenProps[this.friendlyName]&&(this.controller.tweenProps[this.friendlyName]=new n.TargetValue(0,1,!1)),this.keyframeType=n.KeyframeTypes.CSSClass}updateLocalProgress(e){this.isApplied&&!this.toggle||(this.start!==this.end?!this.isApplied&&e>=this.start&&e<=this.end?this._apply():this.isApplied&&this.toggle&&(e<this.start||e>this.end)&&this._unapply():!this.isApplied&&e>=this.start?this._apply():this.isApplied&&this.toggle&&e<this.start&&this._unapply())}_apply(){if(this._triggerType===r.TRIGGER_TYPE_CSS_CLASS)this.controller.tweenProps.targetClasses.add.push(this.cssClass),this.controller.needsClassUpdate=!0;else{for(let e in this.style.on)this.controller.tweenProps.targetStyles[e]=this.style.on[e];this.controller.needsStyleUpdate=!0}this.isApplied=!0}_unapply(){if(this._triggerType===r.TRIGGER_TYPE_CSS_CLASS)this.controller.tweenProps.targetClasses.remove.push(this.cssClass),this.controller.needsClassUpdate=!0;else{for(let e in this.style.off)this.controller.tweenProps.targetStyles[e]=this.style.off[e];this.controller.needsStyleUpdate=!0}this.isApplied=!1}isValidStyleProperty(e){if(!e.hasOwnProperty("on"))return!1;if("object"!=typeof e.on)throw new TypeError("KeyframeCSSClass `style` property should be in the form of: {on:{visibility:hidden, otherProperty: value}}");if(this.toggle&&e.hasOwnProperty("off")&&"object"!=typeof e.off)throw new TypeError("KeyframeCSSClass `style` property should be in the form of: {on:{visibility:hidden, otherProperty: value}}");return!0}reconcile(e,t){}onDOMRead(e,t){}evaluateInterpolationConstraints(){}}r.TRIGGER_TYPE_CSS_CLASS=0,r.TRIGGER_TYPE_STYLE_PROPERTY=1,r.DATA_ATTRIBUTE="data-anim-classname",t.exports=r},{67:67,71:71}],69:[function(e,t,s){"use strict";const i=e(71),n=(e(67),e(68)),r=e(74),a=e(81),o=e(75),l=e(39).EventEmitterMicro,h=e(100),c={update:e(57),external:e(54),draw:e(53)},u=Math.PI/180,d={create:e(164),rotateX:e(166),rotateY:e(167),rotateZ:e(168),scale:e(169)};t.exports=class extends l{constructor(e,t){super(),this._events.draw=[],this.uuid=o(),this.group=e,this.element=t,this._ownerIsElement=this.element instanceof Element,this._ownerIsElement?this.friendlyName=this.element.tagName+"."+Array.from(this.element.classList).join("."):this.friendlyName=this.element.friendlyName||this.uuid,this.element._animInfo=this.element._animInfo||new i.AnimInfo(e,this),this.element._animInfo.controller=this,this.element._animInfo.group=this.group,this.element._animInfo.controllers.push(this),this.tweenProps=this.element._animInfo.tweenProps,this.eventObject=new i.EventObject(this),this.needsStyleUpdate=!1,this.needsClassUpdate=!1,this.elementMetrics=this.group.metrics.add(this.element),this.attributes=[],this.keyframes={},this._allKeyframes=[],this._activeKeyframes=[],this.keyframesRequiringDispatch=[],this.updateCachedValuesFromElement(),this.boundsMin=0,this.boundsMax=0,this.mat2d=new Float32Array(6),this.mat4=d.create(),this.needsWrite=!0,this.onDOMWriteImp=this._ownerIsElement?this.onDOMWriteForElement:this.onDOMWriteForObject}destroy(){if(this.element._animInfo){this.element._animInfo.controller===this&&(this.element._animInfo.controller=null);let e=this.element._animInfo.controllers.indexOf(this);-1!==e&&this.element._animInfo.controllers.splice(e,1),0===this.element._animInfo.controllers.length?this.element._animInfo=null:(this.element._animInfo.controller=this.element._animInfo.controllers[this.element._animInfo.controllers.length-1],this.element._animInfo.group=this.element._animInfo.controller.group)}this.eventObject.controller=null,this.eventObject.element=null,this.eventObject.keyframe=null,this.eventObject.tweenProps=null,this.eventObject=null,this.elementMetrics=null,this.group=null,this.keyframesRequiringDispatch=null;for(let e=0;e<this._allKeyframes.length;e++)this._allKeyframes[e].destroy();this._allKeyframes=null,this._activeKeyframes=null,this.attributes=null,this.keyframes=null,this.element=null,this.tweenProps=null,super.destroy()}remove(){return this.group.removeKeyframeController(this)}updateCachedValuesFromElement(){if(!this._ownerIsElement)return;const e=getComputedStyle(this.element);let t=h(this.element,!0),s=i.KeyframeDefaults.epsilon;["x","y","z"].forEach((e,n)=>{this.tweenProps[e]=new i.TargetValue(t.translation[n],s,!1)}),this.tweenProps.rotation=new i.TargetValue(t.eulerRotation[2],s,!1),["rotationX","rotationY","rotationZ"].forEach((e,n)=>{this.tweenProps[e]=new i.TargetValue(t.eulerRotation[n],s,!1)}),this.tweenProps.scaleZ=new i.TargetValue(t.scale[0],s,!1),["scaleX","scaleY","scale"].forEach((e,n)=>{this.tweenProps[e]=new i.TargetValue(t.scale[n],s,!1)}),this.tweenProps.opacity=new i.TargetValue(parseFloat(e.opacity),s,!1)}addKeyframe(e){let t=r(e);if(!t)throw new Error("AnimSystem Cannot create keyframe for from options `"+e+"`");let s=new t(this,e);return s.parseOptions(e),s.id=this._allKeyframes.length,this._allKeyframes.push(s),s}needsUpdate(){for(let e=0,t=this.attributes.length;e<t;e++){let t=this.attributes[e],s=this.tweenProps[t];if(Math.abs(s.current-s.target)>s.epsilon)return!0}return!1}updateLocalProgress(e){for(let t=0,s=this.attributes.length;t<s;t++){let s=this.attributes[t],i=this.keyframes[this.attributes[t]];if(1===i.length){i[0].updateLocalProgress(e);continue}let n=this.getNearestKeyframeForAttribute(s,e);n&&n.updateLocalProgress(e)}}reconcile(){for(let e=0,t=this.attributes.length;e<t;e++){let t=this.attributes[e],s=this.getNearestKeyframeForAttribute(t,this.group.position.local);s.updateLocalProgress(this.group.position.local),s.snapAtCreation&&s.reconcile(t)}}determineActiveKeyframes(e){e=e||a(Array.from(document.documentElement.classList));let t=this._activeKeyframes,s=this.attributes;this._activeKeyframes=[],this.attributes=[],this.keyframes={};for(let t=0;t<this._allKeyframes.length;t++){let s=this._allKeyframes[t];if(s.setEnabled(e)){this._activeKeyframes.push(s);for(let e in s.animValues)this.keyframes[e]=this.keyframes[e]||[],this.keyframes[e].push(s),-1===this.attributes.indexOf(e)&&(this.attributes.push(e),this.tweenProps[e].isActive=!0)}}let i=t.filter(e=>-1===this._activeKeyframes.indexOf(e));if(0===i.length)return;let r=s.filter(e=>-1===this.attributes.indexOf(e));if(0!==r.length)if(this.needsWrite=!0,this._ownerIsElement)c.external(()=>{let e=["x","y","z","scale","scaleX","scaleY","rotation","rotationX","rotationY","rotationZ"];r.filter(t=>-1!==e.indexOf(t)).length>0&&this.element.style.removeProperty("transform");for(let e=0,t=r.length;e<t;++e){let t=r[e],s=this.tweenProps[t];s.current=s.target,s.isActive=!1,"opacity"===t&&this.element.style.removeProperty("opacity")}for(let e=0,t=i.length;e<t;++e){let t=i[e];t instanceof n&&t._unapply()}},!0);else for(let e=0,t=r.length;e<t;++e){let t=this.tweenProps[r[e]];t.current=t.target,t.isActive=!1}}onDOMRead(e){for(let t=0,s=this.attributes.length;t<s;t++){let s=this.attributes[t];this.tweenProps[s].previousValue=this.tweenProps[s].current;let i=this.getNearestKeyframeForAttribute(s,e.local);i&&i.onDOMRead(s),this.tweenProps[s].previousValue!==this.tweenProps[s].current&&(this.needsWrite=!0)}}onDOMWrite(){(this.needsWrite||this.needsClassUpdate||this.needsStyleUpdate)&&(this.needsWrite=!1,this.onDOMWriteImp(),this.handleEventDispatch())}onDOMWriteForObject(){for(let e=0,t=this.attributes.length;e<t;e++){let t=this.attributes[e];this.element[t]=this.tweenProps[t].current}}onDOMWriteForElement(){let e=this.tweenProps;if(e.z.isActive||e.rotationX.isActive||e.rotationY.isActive){const t=this.mat4;if(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,e.x.isActive||e.y.isActive||e.z.isActive){const s=e.x.current,i=e.y.current,n=e.z.current;t[12]=t[0]*s+t[4]*i+t[8]*n+t[12],t[13]=t[1]*s+t[5]*i+t[9]*n+t[13],t[14]=t[2]*s+t[6]*i+t[10]*n+t[14],t[15]=t[3]*s+t[7]*i+t[11]*n+t[15]}if(e.rotation.isActive||e.rotationZ.isActive){const s=(e.rotation.current||e.rotationZ.current)*u;d.rotateZ(t,t,s)}if(e.rotationX.isActive){const s=e.rotationX.current*u;d.rotateX(t,t,s)}if(e.rotationY.isActive){const s=e.rotationY.current*u;d.rotateY(t,t,s)}(e.scale.isActive||e.scaleX.isActive||e.scaleY.isActive)&&d.scale(t,t,[e.scale.current,e.scale.current,1]),this.element.style.transform="matrix3d("+t[0]+","+t[1]+","+t[2]+","+t[3]+","+t[4]+","+t[5]+","+t[6]+","+t[7]+","+t[8]+","+t[9]+","+t[10]+","+t[11]+","+t[12]+","+t[13]+","+t[14]+","+t[15]+")"}else if(e.x.isActive||e.y.isActive||e.rotation.isActive||e.rotationZ.isActive||e.scale.isActive||e.scaleX.isActive||e.scaleY.isActive){const t=this.mat2d;if(t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,e.x.isActive||e.y.isActive){const s=e.x.current,i=e.y.current,n=t[0],r=t[1],a=t[2],o=t[3],l=t[4],h=t[5];t[0]=n,t[1]=r,t[2]=a,t[3]=o,t[4]=n*s+a*i+l,t[5]=r*s+o*i+h}if(e.rotation.isActive||e.rotationZ.isActive){const s=(e.rotation.current||e.rotationZ.current)*u,i=t[0],n=t[1],r=t[2],a=t[3],o=t[4],l=t[5],h=Math.sin(s),c=Math.cos(s);t[0]=i*c+r*h,t[1]=n*c+a*h,t[2]=i*-h+r*c,t[3]=n*-h+a*c,t[4]=o,t[5]=l}e.scale.isActive?(t[0]=t[0]*e.scale.current,t[1]=t[1]*e.scale.current,t[2]=t[2]*e.scale.current,t[3]=t[3]*e.scale.current,t[4]=t[4],t[5]=t[5]):(e.scaleX.isActive||e.scaleY.isActive)&&(t[0]=t[0]*e.scaleX.current,t[1]=t[1]*e.scaleX.current,t[2]=t[2]*e.scaleY.current,t[3]=t[3]*e.scaleY.current,t[4]=t[4],t[5]=t[5]),this.element.style.transform="matrix("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}if(e.opacity.isActive&&(this.element.style.opacity=e.opacity.current),this.needsStyleUpdate){for(let e in this.tweenProps.targetStyles)null!==this.tweenProps.targetStyles[e]&&(this.element.style[e]=this.tweenProps.targetStyles[e]),this.tweenProps.targetStyles[e]=null;this.needsStyleUpdate=!1}this.needsClassUpdate&&(this.tweenProps.targetClasses.add.length>0&&this.element.classList.add.apply(this.element.classList,this.tweenProps.targetClasses.add),this.tweenProps.targetClasses.remove.length>0&&this.element.classList.remove.apply(this.element.classList,this.tweenProps.targetClasses.remove),this.tweenProps.targetClasses.add.length=0,this.tweenProps.targetClasses.remove.length=0,this.needsClassUpdate=!1)}handleEventDispatch(){if(0!==this.keyframesRequiringDispatch.length){for(let e=0,t=this.keyframesRequiringDispatch.length;e<t;e++){let t=this.keyframesRequiringDispatch[e];t.needsEventDispatch=!1,this.eventObject.keyframe=t,this.eventObject.pageMetrics=i.pageMetrics,this.eventObject.event=t.event,this.trigger(t.event,this.eventObject)}this.keyframesRequiringDispatch.length=0}if(0!==this._events.draw.length){this.eventObject.keyframe=null,this.eventObject.event="draw";for(var e=this._events.draw.length-1;e>=0;e--)this._events.draw[e](this.eventObject)}}updateAnimationConstraints(){for(let e=0,t=this._activeKeyframes.length;e<t;e++)this._activeKeyframes[e].evaluateConstraints();this.attributes.forEach(e=>{1!==this.keyframes[e].length&&this.keyframes[e].sort(i.KeyframeComparison)}),this.updateDeferredPropertyValues()}refreshMetrics(){let e=new Set([this.element]);this._allKeyframes.forEach(t=>t.anchors.forEach(t=>e.add(t))),this.group.metrics.refreshCollection(e),this.group.keyframesDirty=!0}updateDeferredPropertyValues(){for(let e=0,t=this.attributes.length;e<t;e++){let t=this.attributes[e],s=this.keyframes[t];if(!(s[0].keyframeType>i.KeyframeTypes.InterpolationForward))for(let e=0,i=s.length;e<i;e++){let n=s[e];if(null===n.jsonProps[t][0]){if(0===e){n.animValues[t][0]=this.tweenProps[t].initialValue;continue}n.animValues[t][0]=s[e-1].animValues[t][1]}if(null===n.jsonProps[t][1]){if(e===i-1)throw new RangeError("AnimSystem - last keyframe cannot defer it's end value! ".concat(t,":[").concat(n.jsonProps[t][0],",null]"));n.animValues[t][1]=s[e+1].animValues[t][0]}}}}getBounds(e){this.boundsMin=Number.MAX_VALUE,this.boundsMax=-Number.MAX_VALUE;for(let t=0,s=this.attributes.length;t<s;t++){let s=this.keyframes[this.attributes[t]];for(let t=0;t<s.length;t++){let i=s[t];this.boundsMin=Math.min(i.start,this.boundsMin),this.boundsMax=Math.max(i.end,this.boundsMax),e.min=Math.min(i.start,e.min),e.max=Math.max(i.end,e.max)}}}getNearestKeyframeForAttribute(e,t){t=void 0!==t?t:this.group.position.local;let s=null,i=Number.POSITIVE_INFINITY,n=this.keyframes[e];if(void 0===n)return null;let r=n.length;if(0===r)return null;if(1===r)return n[0];for(let e=0;e<r;e++){let r=n[e];if(r.isInRange(t)){s=r;break}let a=Math.min(Math.abs(t-r.start),Math.abs(t-r.end));a<i&&(i=a,s=r)}return s}getAllKeyframesForAttribute(e){return this.keyframes[e]}updateKeyframe(e,t){e.parseOptions(t),e.evaluateConstraints(),this.group.keyframesDirty=!0,c.update(()=>{this.trigger(i.EVENTS.ON_KEYFRAME_UPDATED,e),this.group.trigger(i.EVENTS.ON_KEYFRAME_UPDATED,e)},!0)}removeKeyframe(e){let t=this._allKeyframes.indexOf(e);return-1===t?Promise.resolve(null):(this._allKeyframes.splice(t,1),this.group.keyframesDirty=!0,new Promise(t=>{this.group.rafEmitter.executor.eventEmitter.once("before:draw",()=>{t(e),e.destroy()})}))}updateAnimation(e,t){return this.group.gui&&console.warn("KeyframeController.updateAnimation(keyframe,props) has been deprecated. Please use updateKeyframe(keyframe,props)"),this.updateKeyframe(e,t)}}},{100:100,164:164,166:166,167:167,168:168,169:169,39:39,53:53,54:54,57:57,67:67,68:68,71:71,74:74,75:75,81:81}],70:[function(e,t,s){"use strict";const i=e(67),n=e(71);class r extends i{constructor(e,t){super(e,t),this.keyframeType=n.KeyframeTypes.Event,this.isApplied=!1,this.hasDuration=!1,this.isCurrentlyInRange=!1}parseOptions(e){e.x=void 0,e.y=void 0,e.scale=void 0,e.scaleX=void 0,e.scaleY=void 0,e.rotation=void 0,e.style=void 0,e.cssClass=void 0,e.rotation=void 0,e.opacity=void 0,e.hold=void 0,void 0===e.end&&(e.end=e.start),this.event=e.event,this.animValues[this.event]=[0,0],void 0===this.controller.tweenProps[this.event]&&(this.controller.tweenProps[this.event]=new n.TargetValue(0,1,!1)),super.parseOptions(e),this.keyframeType=n.KeyframeTypes.Event}updateLocalProgress(e){if(this.hasDuration){let t=this.isCurrentlyInRange,s=e>=this.start&&e<=this.end;if(t===s)return;return this.isCurrentlyInRange=s,void(s&&!t?this._trigger(this.event+":enter"):t&&!s&&this._trigger(this.event+":exit"))}!this.isApplied&&e>=this.start?(this.isApplied=!0,this._trigger(this.event)):this.isApplied&&e<this.start&&(this.isApplied=!1,this._trigger(this.event+":reverse"))}_trigger(e){this.controller.eventObject.event=e,this.controller.eventObject.keyframe=this,this.controller.trigger(e,this.controller.eventObject)}evaluateConstraints(){super.evaluateConstraints(),this.hasDuration=this.start!==this.end}reset(e){this.isApplied=!1,this.isCurrentlyInRange=!1,super.reset(e)}onDOMRead(e,t){}reconcile(e,t){}evaluateInterpolationConstraints(){}}r.DATA_ATTRIBUTE="data-anim-event",t.exports=r},{67:67,71:71}],71:[function(e,t,s){"use strict";const i={GUI_INSTANCE:null,ANIM_INSTANCE:null,VIEWPORT_EMITTER_ELEMENT:void 0,LOCAL_STORAGE_KEYS:{GuiPosition:"anim-ui.position",GroupCollapsedStates:"anim-ui.group-collapsed-states",scrollY:"anim-ui.scrollY-position",path:"anim-ui.path"},RESIZE_TIMEOUT:-1,BREAKPOINTS:[{name:"S",mediaQuery:"only screen and (max-width: 735px)"},{name:"M",mediaQuery:"only screen and (max-width: 1068px)"},{name:"L",mediaQuery:"only screen and (min-width: 1442px)"},{name:"L",mediaQuery:"only screen and (min-width: 1069px)"}],getBreakpoint:function(){for(let e=0;e<i.BREAKPOINTS.length;e++){let t=i.BREAKPOINTS[e];if(window.matchMedia(t.mediaQuery).matches)return t.name}},KeyframeDefaults:{ease:1,epsilon:.05,easeFunctionString:"linear",easeFunction:"linear",hold:!1,snapAtCreation:!1,toggle:!1,breakpointMask:"SMLX",event:"",disabledWhen:[],cssClass:""},KeyframeTypes:{Interpolation:0,InterpolationForward:1,CSSClass:2,Event:3},EVENTS:{ON_DOM_KEYFRAMES_CREATED:"ON_DOM_KEYFRAMES_CREATED",ON_DOM_GROUPS_CREATED:"ON_DOM_GROUPS_CREATED",ON_GROUP_CREATED:"ON_GROUP_CREATED",ON_KEYFRAME_UPDATED:"ON_KEYFRAME_UPDATED",ON_TIMELINE_START:"ON_TIMELINE_START",ON_TIMELINE_UPDATE:"ON_TIMELINE_UPDATE",ON_TIMELINE_COMPLETE:"ON_TIMELINE_COMPLETE"},PageEvents:{ON_SCROLL:"ON_SCROLL",ON_RESIZE_IMMEDIATE:"ON_RESIZE_IMMEDIATE",ON_RESIZE_DEBOUNCED:"ON_RESIZE_DEBOUNCED",ON_BREAKPOINT_CHANGE:"ON_BREAKPOINT_CHANGE"},KeyframeJSONReservedWords:["event","cssClass","style","anchors","start","end","epsilon","easeFunction","ease","breakpointMask","disabledWhen"],TweenProps:class{},TargetValue:class{constructor(e,t,s){this.epsilon=parseFloat(t),this.snapAtCreation=s,this.initialValue=e,this.target=e,this.current=e,this.previousValue=e,this.isActive=!1}},AnimInfo:function(e,t,s=!1){this.isGroup=s,this.group=e,this.controller=t,this.controllers=[],this.tweenProps=new i.TweenProps},Progress:function(){this.local=0,this.localUnclamped=0,this.lastPosition=0},ViewableRange:function(e,t){this.a=e.top-t,this.a<0&&(this.a=e.top),this.b=e.top,this.d=e.bottom,this.c=Math.max(this.d-t,this.b)},pageMetrics:new function(){this.scrollX=0,this.scrollY=0,this.windowWidth=0,this.windowHeight=0,this.documentOffsetX=0,this.documentOffsetY=0,this.previousBreakpoint="",this.breakpoint=""},EventObject:function(e){this.controller=e,this.element=this.controller.element,this.keyframe=null,this.event="",this.tweenProps=this.controller.tweenProps},KeyframeComparison:function(e,t){return e.start<t.start?-1:e.start>t.start?1:0}};t.exports=i},{}],72:[function(e,t,s){"use strict";t.exports=new class{constructor(){this.linear=function(e){return e},this.easeInQuad=function(e){return e*e},this.easeOutQuad=function(e){return e*(2-e)},this.easeInOutQuad=function(e){return e<.5?2*e*e:(4-2*e)*e-1},this.easeInSin=function(e){return 1+Math.sin(Math.PI/2*e-Math.PI/2)},this.easeOutSin=function(e){return Math.sin(Math.PI/2*e)},this.easeInOutSin=function(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2},this.easeInElastic=function(e){return 0===e?e:(.04-.04/e)*Math.sin(25*e)+1},this.easeOutElastic=function(e){return.04*e/--e*Math.sin(25*e)},this.easeInOutElastic=function(e){return(e-=.5)<0?(.02+.01/e)*Math.sin(50*e):(.02-.01/e)*Math.sin(50*e)+1},this.easeOutBack=function(e){return(e-=1)*e*(2.70158*e+1.70158)+1},this.easeInCubic=function(e){return e*e*e},this.easeOutCubic=function(e){return--e*e*e+1},this.easeInOutCubic=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},this.easeInQuart=function(e){return e*e*e*e},this.easeOutQuart=function(e){return 1- --e*e*e*e},this.easeInOutQuart=function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},this.easeInQuint=function(e){return e*e*e*e*e},this.easeOutQuint=function(e){return 1+--e*e*e*e*e},this.easeInOutQuint=function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}}}},{}],73:[function(e,t,s){"use strict";const i=e(71),n=(e,t)=>null==e?t:e;class r{constructor(e){this.top=0,this.bottom=0,this.left=0,this.right=0,this.height=0,this.width=0}toString(){return"top:".concat(this.top,", bottom:").concat(this.bottom,", left:").concat(this.left,", right:").concat(this.right,", height:").concat(this.height,", width:").concat(this.width)}toObject(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right,height:this.height,width:this.width}}}t.exports=class{constructor(){this.clear()}clear(){this._metrics=new WeakMap}destroy(){this._metrics=null}add(e){let t=this._metrics.get(e);if(t)return t;let s=new r(e);return this._metrics.set(e,s),this._refreshMetrics(e,s)}get(e){return this._metrics.get(e)}refreshCollection(e){e.forEach(e=>this._refreshMetrics(e,null))}refreshMetrics(e){return this._refreshMetrics(e)}_refreshMetrics(e,t){if(t=t||this._metrics.get(e),!(e instanceof Element))return t.width=n(e.width,0),t.height=n(e.height,0),t.top=n(e.top,n(e.y,0)),t.left=n(e.left,n(e.x,0)),t.right=t.left+t.width,t.bottom=t.top+t.height,t;if(void 0===e.offsetWidth){let s=e.getBoundingClientRect();return t.width=s.width,t.height=s.height,t.top=i.pageMetrics.scrollY+s.top,t.left=i.pageMetrics.scrollX+s.left,t.right=t.left+t.width,t.bottom=t.top+t.height,t}t.width=e.offsetWidth,t.height=e.offsetHeight,t.top=i.pageMetrics.documentOffsetY,t.left=i.pageMetrics.documentOffsetX;let s=e;for(;s;)t.top+=s.offsetTop,t.left+=s.offsetLeft,s=s.offsetParent;return t.right=t.left+t.width,t.bottom=t.top+t.height,t}}},{71:71}],74:[function(e,t,s){"use strict";const i=e(71),n=e(67),r=e(70),a=e(68),o=function(e){for(let t in e){let s=e[t];if(-1===i.KeyframeJSONReservedWords.indexOf(t)&&Array.isArray(s))return!0}return!1};t.exports=e=>{if(void 0!==e.cssClass||void 0!==e.style){if(o(e))throw"CSS Keyframes cannot tween values, please use multiple keyframes instead";return a}if(o(e))return n;if(e.event)return r;throw delete e.anchors,"Could not determine tween type based on ".concat(JSON.stringify(e))}},{67:67,68:68,70:70,71:71}],75:[function(e,t,s){"use strict";t.exports=function(){let e="";for(let t=0;t<8;t++){let s=16*Math.random()|0;8!==t&&12!==t&&16!==t&&20!==t||(e+="-"),e+=(12===t?4:16===t?3&s|8:s).toString(16)}return e}},{}],76:[function(e,t,s){"use strict";const i=Math.abs;class n{constructor(e,t,s,i){this.cp=new Float32Array(6),this.cp[0]=3*e,this.cp[1]=3*(s-e)-this.cp[0],this.cp[2]=1-this.cp[0]-this.cp[1],this.cp[3]=3*t,this.cp[4]=3*(i-t)-this.cp[3],this.cp[5]=1-this.cp[3]-this.cp[4]}sampleCurveX(e){return((this.cp[2]*e+this.cp[1])*e+this.cp[0])*e}sampleCurveY(e){return((this.cp[5]*e+this.cp[4])*e+this.cp[3])*e}sampleCurveDerivativeX(e){return(3*this.cp[2]*e+2*this.cp[1])*e+this.cp[0]}solveCurveX(e){var t,s,n,r,a,o;for(n=e,o=0;o<5;o++){if(r=this.sampleCurveX(n)-e,i(r)<1e-5)return n;if(a=this.sampleCurveDerivativeX(n),i(a)<1e-5)break;n-=r/a}if((n=e)<(t=0))return t;if(n>(s=1))return s;for(;t<s;){if(r=this.sampleCurveX(n),i(r-e)<1e-5)return n;e>r?t=n:s=n,n=.5*(s-t)+t}return n}solve(e){return this.sampleCurveY(this.solveCurveX(e))}}const r=/\d*\.?\d+/g;n.fromCSSString=function(e){let t=e.match(r);if(4!==t.length)throw"UnitBezier could not convert ".concat(e," to cubic-bezier");let s=t.map(Number),i=new n(s[0],s[1],s[2],s[3]);return i.solve.bind(i)},t.exports=n},{}],77:[function(e,t,s){"use strict";const i=e(78),n=new(e(73));class r{constructor(e){this.group=e,this.data={target:null,anchors:null,metrics:this.group.metrics}}parseArray(e,t){return[this.parseExpression(e,t[0]),this.parseExpression(e,t[1])]}parseExpression(e,t){if(!t)return null;if("number"==typeof t)return t;if("string"!=typeof t)throw"Expression must be a string, received ".concat(typeof t);return this.data.target=e.controller.element,this.data.anchors=e.anchors,this.data.keyframe=e.keyframe,r._parse(t,this.data)}parseTimeValue(e,t){if("number"==typeof t)return t;let s=this.group.expressionParser.parseExpression(e,t);return this.group.convertScrollPositionToTValue(s)}destroy(){this.group=null}static parse(e,t){return(t=t||{})&&(n.clear(),t.target&&n.add(t.target),t.anchors&&t.anchors.forEach(e=>n.add(e))),t.metrics=n,r._parse(e,t)}static _parse(e,t){return i.Parse(e).execute(t)}}r.programs=i.programs,window.ExpressionParser=r,t.exports=r},{73:73,78:78}],78:[function(e,t,s){"use strict";const i=e(71),n=e(157),r={},a={smoothstep:(e,t,s)=>(s=a.clamp((s-e)/(t-e),0,1))*s*(3-2*s),deg:e=>180*e/Math.PI,rad:e=>e*Math.PI/180,random:(e,t)=>Math.random()*(t-e)+e,atan:Math.atan2};Object.getOwnPropertyNames(Math).forEach(e=>a[e]?null:a[e.toLowerCase()]=Math[e]),Object.getOwnPropertyNames(n).forEach(e=>a[e]?null:a[e.toLowerCase()]=n[e]);let o=null;const l="a",h="ALPHA",c="(",u=")",d="PLUS",m="MINUS",p="MUL",f="DIV",g="INTEGER_CONST",_="FLOAT_CONST",v=",",y="EOF",b={NUMBERS:/\d|\d\.\d/,DIGIT:/\d/,OPERATOR:/[-+*/]/,PAREN:/[()]/,WHITE_SPACE:/\s/,ALPHA:/[a-zA-Z]|%/,ALPHANUMERIC:/[a-zA-Z0-9]/,OBJECT_UNIT:/^(t|l|b|r|%w|%h|%|h|w)$/,GLOBAL_METRICS_UNIT:/^(px|vh|vw)$/,ANY_UNIT:/^(t|l|b|r|%w|%h|%|h|w|px|vh|vw)$/,MATH_FUNCTION:new RegExp("\\b(".concat(Object.keys(a).join("|"),")\\b"),"i")},E={round:1,clamp:3,lerp:3,random:2,atan:2,floor:1,ceil:1,abs:1,cos:1,sin:1,smoothstep:3,rad:1,deg:1,pow:2,calc:1};class w{constructor(e,t){this.type=e,this.value=t}}w.ONE=new w("100",100),w.EOF=new w(y,null);class x{constructor(e){this.type=e}}class I extends x{constructor(e,t){super("UnaryOp"),this.token=this.op=e,this.expr=t}}class S extends x{constructor(e,t,s){super("BinOp"),this.left=e,this.op=t,this.right=s}}class A extends x{constructor(e,t){if(super("MathOp"),this.op=e,this.list=t,E[e.value]&&t.length!==E[e.value])throw new Error("Incorrect number of arguments for '".concat(e.value,"'. Received ").concat(t.length,", expected ").concat(E[e.value]))}}class T extends x{constructor(e){super("Num"),this.token=e,this.value=e.value}}class P extends x{constructor(e,t,s){super("RefValue"),this.num=e,this.ref=t,this.unit=s}}class C extends x{constructor(e,t){super("CSSValue"),this.ref=e,this.propertyName=t}}class O extends x{constructor(e,t){super("PropValue"),this.ref=e,this.propertyName=t}}class D{constructor(e){let t;for(this.text=e,this.pos=0,this.char=this.text[this.pos],this.tokens=[];(t=this.getNextToken())&&t!==w.EOF;)this.tokens.push(t);this.tokens.push(t)}advance(){this.char=this.text[++this.pos]}skipWhiteSpace(){for(;null!=this.char&&b.WHITE_SPACE.test(this.char);)this.advance()}name(){let e="";for(;null!=this.char&&b.ALPHA.test(this.char);)e+=this.char,this.advance();return new w(h,e)}number(){let e="";for(;null!=this.char&&b.DIGIT.test(this.char);)e+=this.char,this.advance();if(null!=this.char&&"."===this.char){for(e+=this.char,this.advance();null!=this.char&&b.DIGIT.test(this.char);)e+=this.char,this.advance();return new w(_,parseFloat(e))}return new w(g,parseInt(e))}getNextToken(){for(;null!=this.char;)if(b.WHITE_SPACE.test(this.char))this.skipWhiteSpace();else{if(b.DIGIT.test(this.char))return this.number();if(","===this.char)return this.advance(),new w(v,",");if(b.OPERATOR.test(this.char)){let e="",t=this.char;switch(t){case"+":e=d;break;case"-":e=m;break;case"*":e=p;break;case"/":e=f}return this.advance(),new w(e,t)}if(b.PAREN.test(this.char)){let e="",t=this.char;switch(t){case"(":e=c;break;case")":e=u}return this.advance(),new w(e,t)}if(b.ALPHA.test(this.char))return this.name();this.error("Unexpected character "+this.char)}return w.EOF}}class R{constructor(e){this.lexer=e,this.pos=0}get currentToken(){return this.lexer.tokens[this.pos]}error(e,t=""){let s=this.lexer.text.slice(this.pos-3,this.pos+3),i=new Error("".concat(e,' in "').concat(this.lexer.text,'" near "').concat(s,'". ').concat(t," "));throw console.error(i.message,o?o.keyframe||o.target:""),i}consume(e){let t=this.currentToken;return t.type===e?this.pos+=1:this.error("Invalid token ".concat(this.currentToken.value,", expected ").concat(e)),t}consumeList(e){e.includes(this.currentToken)?this.pos+=1:this.error("Invalid token ".concat(this.currentToken.value,", expected ").concat(tokenType))}expr(){let e=this.term();for(;this.currentToken.type===d||this.currentToken.type===m;){const t=this.currentToken;switch(t.value){case"+":this.consume(d);break;case"-":this.consume(m)}e=new S(e,t,this.term())}return e}term(){let e=this.factor();for(;this.currentToken.type===p||this.currentToken.type===f;){const t=this.currentToken;switch(t.value){case"*":this.consume(p);break;case"/":this.consume(f)}e=new S(e,t,this.factor())}return e}factor(){if(this.currentToken.type===d)return new I(this.consume(d),this.factor());if(this.currentToken.type===m)return new I(this.consume(m),this.factor());if(this.currentToken.type===g||this.currentToken.type===_){let e=new T(this.currentToken);if(this.pos+=1,b.OPERATOR.test(this.currentToken.value)||this.currentToken.type===u||this.currentToken.type===v||this.currentToken.type===y)return e;if(this.currentToken.type===h&&this.currentToken.value===l)return this.consume(h),new P(e,this.anchorIndex(),this.unit(b.ANY_UNIT));if(this.currentToken.type===h)return"%a"===this.currentToken.value&&this.error("%a is invalid, try removing the %"),new P(e,null,this.unit());this.error("Expected a scaling unit type","Such as 'h' / 'w'")}else{if(b.OBJECT_UNIT.test(this.currentToken.value))return new P(new T(w.ONE),null,this.unit());if(this.currentToken.value===l){this.consume(h);const e=this.anchorIndex();if(b.OBJECT_UNIT.test(this.currentToken.value))return new P(new T(w.ONE),e,this.unit())}else if(this.currentToken.type===h){if("css"===this.currentToken.value||"prop"===this.currentToken.value){const e="css"===this.currentToken.value?C:O;this.consume(h),this.consume(c);const t=this.propertyName();let s=null;return this.currentToken.type===v&&(this.consume(v),this.consume(h),s=this.anchorIndex()),this.consume(u),new e(s,t)}if(b.MATH_FUNCTION.test(this.currentToken.value)){const e=this.currentToken.value.toLowerCase();if("number"==typeof a[e])return this.consume(h),new T(new w(h,a[e]));const t=w[e]||new w(e,e),s=[];this.consume(h),this.consume(c);let i=null;do{this.currentToken.value===v&&this.consume(v),i=this.expr(),s.push(i)}while(this.currentToken.value===v);return this.consume(u),new A(t,s)}}else if(this.currentToken.type===c){this.consume(c);let e=this.expr();return this.consume(u),e}}this.error("Unexpected token ".concat(this.currentToken.value))}propertyName(){let e="";for(;this.currentToken.type===h||this.currentToken.type===m;)e+=this.currentToken.value,this.pos+=1;return e}unit(e=b.ANY_UNIT){const t=this.currentToken;if(t.type===h&&e.test(t.value))return this.consume(h),new w(h,t.value=t.value.replace(/%(h|w)/,"$1").replace("%","h"));this.error("Expected unit type")}anchorIndex(){const e=this.currentToken;if(e.type===g)return this.consume(g),new T(e);this.error("Invalid anchor reference",". Should be something like a0, a1, a2")}parse(){const e=this.expr();return this.currentToken!==w.EOF&&this.error("Unexpected token ".concat(this.currentToken.value)),e}}class M{constructor(e){this.parser=e,this.root=e.parse()}visit(e){let t=this[e.type];if(!t)throw new Error("No visit method named, ".concat(t));return t.call(this,e)}BinOp(e){switch(e.op.type){case d:return this.visit(e.left)+this.visit(e.right);case m:return this.visit(e.left)-this.visit(e.right);case p:return this.visit(e.left)*this.visit(e.right);case f:return this.visit(e.left)/this.visit(e.right)}}RefValue(e){let t=this.unwrapReference(e),s=e.unit.value,n=e.num.value;const r=o.metrics.get(t);switch(s){case"h":return.01*n*r.height;case"t":return.01*n*r.top;case"vh":return.01*n*i.pageMetrics.windowHeight;case"vw":return.01*n*i.pageMetrics.windowWidth;case"px":return n;case"w":return.01*n*r.width;case"b":return.01*n*r.bottom;case"l":return.01*n*r.left;case"r":return.01*n*r.right}}PropValue(e){return(null===e.ref?o.target:o.anchors[e.ref.value])[e.propertyName]}CSSValue(e){let t=this.unwrapReference(e);const s=getComputedStyle(t).getPropertyValue(e.propertyName);return""===s?0:M.Parse(s).execute(o)}Num(e){return e.value}UnaryOp(e){return e.op.type===d?+this.visit(e.expr):e.op.type===m?-this.visit(e.expr):void 0}MathOp(e){let t=e.list.map(e=>this.visit(e));return a[e.op.value].apply(null,t)}unwrapReference(e){return null===e.ref?o.target:(e.ref.value>=o.anchors.length&&console.error("Not enough anchors supplied for expression ".concat(this.parser.lexer.text),o.target),o.anchors[e.ref.value])}execute(e){return o=e,this.visit(this.root)}static Parse(e){return r[e]||(r[e]=new M(new R(new D(e))))}}M.programs=r,t.exports=M},{157:157,71:71}],79:[function(e,t,s){"use strict";const i=e(39).EventEmitterMicro,n=e(157),r=e(81),a=e(71),o=e(73),l=e(77),h=e(69),c={create:e(46),update:e(57),draw:e(53)};t.exports=class extends i{constructor(e,t){super(),this.anim=t,this.element=e,this.name=this.name||e.getAttribute("data-anim-scroll-group"),this.isEnabled=!0,this.position=new a.Progress,this.metrics=new o,this.metrics.add(this.element),this.expressionParser=new l(this),this.boundsMin=0,this.boundsMax=0,this.timelineUpdateRequired=!1,this._keyframesDirty=!1,this.viewableRange=this.createViewableRange(),this.defaultEase=a.KeyframeDefaults.ease,this.keyframeControllers=[],this.updateProgress(this.getPosition()),this.onDOMRead=this.onDOMRead.bind(this),this.onDOMWrite=this.onDOMWrite.bind(this),this.gui=null,this.finalizeInit()}finalizeInit(){this.element._animInfo=new a.AnimInfo(this,null,!0),this.setupRAFEmitter()}destroy(){this.expressionParser.destroy(),this.expressionParser=null;for(let e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].destroy();this.keyframeControllers=null,this.position=null,this.viewableRange=null,this.gui&&(this.gui.destroy(),this.gui=null),this.metrics.destroy(),this.metrics=null,this.rafEmitter.destroy(),this.rafEmitter=null,this.anim=null,this.element._animInfo&&this.element._animInfo.group===this&&(this.element._animInfo.group=null,this.element._animInfo=null),this.element=null,this.isEnabled=!1,super.destroy()}removeKeyframeController(e){if(!this.keyframeControllers.includes(e))return Promise.resolve();let t=e._allKeyframes;return e._allKeyframes=[],this.keyframesDirty=!0,new Promise(s=>{c.draw(()=>{const i=this.keyframeControllers.indexOf(e);-1!==i?(this.keyframeControllers.splice(i,1),e.onDOMWrite(),t.forEach(e=>e.destroy()),e.destroy(),this.gui&&this.gui.create(),s()):s()})})}remove(){return this.anim.removeGroup(this)}setupRAFEmitter(e){this.rafEmitter&&this.rafEmitter.destroy(),this.rafEmitter=e||new c.create,this.rafEmitter.on("update",this.onDOMRead),this.rafEmitter.on("draw",this.onDOMWrite),this.rafEmitter.once("external",()=>this.reconcile())}requestDOMChange(){return!!this.isEnabled&&this.rafEmitter.run()}onDOMRead(){this.keyframesDirty&&this.onKeyframesDirty();for(let e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].onDOMRead(this.position)}onDOMWrite(){for(let e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].onDOMWrite(this.position);this.needsUpdate()&&this.requestDOMChange()}needsUpdate(){if(this._keyframesDirty)return!0;for(let e=0,t=this.keyframeControllers.length;e<t;e++)if(this.keyframeControllers[e].needsUpdate())return!0;return!1}addKeyframe(e,t){let s=this.getControllerForTarget(e);return null===s&&(s=new h(this,e),this.keyframeControllers.push(s)),this.keyframesDirty=!0,s.addKeyframe(t)}forceUpdate({waitForNextUpdate:e=!0,silent:t=!1}={}){this.isEnabled&&(this.refreshMetrics(),this.timelineUpdateRequired=!0,e?this.keyframesDirty=!0:this.onKeyframesDirty({silent:t}))}onKeyframesDirty({silent:e=!1}={}){this.determineActiveKeyframes(),this.keyframesDirty=!1,this.metrics.refreshMetrics(this.element),this.viewableRange=this.createViewableRange();for(let e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].updateAnimationConstraints();this.updateBounds(),this.updateProgress(this.getPosition()),e||this._onScroll(),this.gui&&this.gui.create()}refreshMetrics(){let e=new Set([this.element]);this.keyframeControllers.forEach(t=>{e.add(t.element),t._allKeyframes.forEach(t=>t.anchors.forEach(t=>e.add(t)))}),this.metrics.refreshCollection(e),this.viewableRange=this.createViewableRange()}reconcile(){for(let e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].reconcile()}determineActiveKeyframes(e){e=e||r(Array.from(document.documentElement.classList));for(let t=0,s=this.keyframeControllers.length;t<s;t++)this.keyframeControllers[t].determineActiveKeyframes(e)}updateBounds(){if(0===this.keyframeControllers.length)return this.boundsMin=0,void(this.boundsMax=0);let e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};for(let t=0,s=this.keyframeControllers.length;t<s;t++)this.keyframeControllers[t].getBounds(e);let t=this.convertTValueToScrollPosition(e.min),s=this.convertTValueToScrollPosition(e.max);s-t<a.pageMetrics.windowHeight?(e.min=this.convertScrollPositionToTValue(t-.5*a.pageMetrics.windowHeight),e.max=this.convertScrollPositionToTValue(s+.5*a.pageMetrics.windowHeight)):(e.min-=.001,e.max+=.001),this.boundsMin=e.min,this.boundsMax=e.max,this.timelineUpdateRequired=!0}createViewableRange(){return new a.ViewableRange(this.metrics.get(this.element),a.pageMetrics.windowHeight)}_onBreakpointChange(e,t){this.keyframesDirty=!0,this.determineActiveKeyframes()}updateProgress(e){this.hasDuration()?(this.position.localUnclamped=(e-this.viewableRange.a)/(this.viewableRange.d-this.viewableRange.a),this.position.local=n.clamp(this.position.localUnclamped,this.boundsMin,this.boundsMax)):this.position.local=this.position.localUnclamped=0}performTimelineDispatch(){for(let e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].updateLocalProgress(this.position.local);this.trigger(a.EVENTS.ON_TIMELINE_UPDATE,this.position.local),this.timelineUpdateRequired=!1,this.position.lastPosition!==this.position.local&&(this.position.lastPosition<=this.boundsMin&&this.position.localUnclamped>this.boundsMin?this.trigger(a.EVENTS.ON_TIMELINE_START,this):this.position.lastPosition>=this.boundsMin&&this.position.localUnclamped<this.boundsMin?this.trigger(a.EVENTS.ON_TIMELINE_START+":reverse",this):this.position.lastPosition<=this.boundsMax&&this.position.localUnclamped>=this.boundsMax?this.trigger(a.EVENTS.ON_TIMELINE_COMPLETE,this):this.position.lastPosition>=this.boundsMax&&this.position.localUnclamped<this.boundsMax&&this.trigger(a.EVENTS.ON_TIMELINE_COMPLETE+":reverse",this)),null!==this.gui&&this.gui.onScrollUpdate(this.position)}_onScroll(e){if(!this.isEnabled)return!1;void 0===e&&(e=this.getPosition()),this.updateProgress(e);let t=this.position.lastPosition===this.boundsMin||this.position.lastPosition===this.boundsMax,s=this.position.localUnclamped===this.boundsMin||this.position.localUnclamped===this.boundsMax;if(!this.timelineUpdateRequired&&t&&s&&this.position.lastPosition===e)return void(this.position.local=this.position.localUnclamped);if(this.timelineUpdateRequired||this.position.localUnclamped>this.boundsMin&&this.position.localUnclamped<this.boundsMax)return this.performTimelineDispatch(),this.requestDOMChange(),void(this.position.lastPosition=this.position.localUnclamped);let i=this.position.lastPosition>this.boundsMin&&this.position.lastPosition<this.boundsMax,n=this.position.localUnclamped<=this.boundsMin||this.position.localUnclamped>=this.boundsMax;if(i&&n)return this.performTimelineDispatch(),this.requestDOMChange(),void(this.position.lastPosition=this.position.localUnclamped);const r=this.position.lastPosition<this.boundsMin&&this.position.localUnclamped>this.boundsMax,a=this.position.lastPosition>this.boundsMax&&this.position.localUnclamped<this.boundsMax;(r||a)&&(this.performTimelineDispatch(),this.requestDOMChange(),this.position.lastPosition=this.position.localUnclamped),null!==this.gui&&this.gui.onScrollUpdate(this.position)}convertScrollPositionToTValue(e){return this.hasDuration()?n.map(e,this.viewableRange.a,this.viewableRange.d,0,1):0}convertTValueToScrollPosition(e){return this.hasDuration()?n.map(e,0,1,this.viewableRange.a,this.viewableRange.d):0}hasDuration(){return this.viewableRange.a!==this.viewableRange.d}getPosition(){return a.pageMetrics.scrollY}getControllerForTarget(e){if(!e._animInfo||!e._animInfo.controllers)return null;if(e._animInfo.controller&&e._animInfo.controller.group===this)return e._animInfo.controller;const t=e._animInfo.controllers;for(let e=0,s=t.length;e<s;e++)if(t[e].group===this)return t[e];return null}trigger(e,t){if(void 0!==this._events[e])for(let s=this._events[e].length-1;s>=0;s--)void 0!==t?this._events[e][s](t):this._events[e][s]()}set keyframesDirty(e){this._keyframesDirty=e,this._keyframesDirty&&this.requestDOMChange()}get keyframesDirty(){return this._keyframesDirty}}},{157:157,39:39,46:46,53:53,57:57,69:69,71:71,73:73,77:77,81:81}],80:[function(e,t,s){"use strict";const i=e(79),n=e(157);let r=0;const a={create:e(46)};class o extends i{constructor(e,t){e||((e=document.createElement("div")).className="TimeGroup-"+r++),super(e,t),this.name=this.name||e.getAttribute("data-anim-time-group"),this._isPaused=!0,this._repeats=0,this._isReversed=!1,this._timeScale=1}finalizeInit(){if(!this.anim)throw"TimeGroup not instantiated correctly. Please use `AnimSystem.createTimeGroup(el)`";this.defaultEase=1,this.onPlayTimeUpdate=this.onPlayTimeUpdate.bind(this),super.finalizeInit()}progress(e){if(void 0===e)return 0===this.boundsMax?0:this.position.local/this.boundsMax;let t=e*this.boundsMax;this.timelineUpdateRequired=!0,this._onScroll(t)}time(e){if(void 0===e)return this.position.local;e=n.clamp(e,this.boundsMin,this.boundsMax),this.timelineUpdateRequired=!0,this._onScroll(e)}play(e){this.reversed(!1),this.isEnabled=!0,this._isPaused=!1,this.time(e),this._playheadEmitter.run()}reverse(e){this.reversed(!0),this.isEnabled=!0,this._isPaused=!1,this.time(e),this._playheadEmitter.run()}reversed(e){if(void 0===e)return this._isReversed;this._isReversed=e}restart(){this._isReversed?(this.progress(1),this.reverse(this.time())):(this.progress(0),this.play(this.time()))}pause(e){this.time(e),this._isPaused=!0}paused(e){return void 0===e?this._isPaused:(this._isPaused=e,this._isPaused||this.play(),this)}onPlayTimeUpdate(e){if(this._isPaused)return;let t=n.clamp(e.delta/1e3,0,.5);this._isReversed&&(t=-t);let s=this.time()+t*this._timeScale;if(this._repeats===o.REPEAT_FOREVER||this._repeats>0){let e=!1;!this._isReversed&&s>this.boundsMax?(s-=this.boundsMax,e=!0):this._isReversed&&s<0&&(s=this.boundsMax+s,e=!0),e&&(this._repeats=this._repeats===o.REPEAT_FOREVER?o.REPEAT_FOREVER:this._repeats-1)}this.time(s);let i=!this._isReversed&&this.position.local!==this.duration,r=this._isReversed&&0!==this.position.local;i||r?this._playheadEmitter.run():this.paused(!0)}updateProgress(e){this.hasDuration()?(this.position.localUnclamped=e,this.position.local=n.clamp(this.position.localUnclamped,this.boundsMin,this.boundsMax)):this.position.local=this.position.localUnclamped=0}updateBounds(){if(0===this.keyframeControllers.length)return this.boundsMin=0,void(this.boundsMax=0);let e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};for(let t=0,s=this.keyframeControllers.length;t<s;t++)this.keyframeControllers[t].getBounds(e);this.boundsMin=0,this.boundsMax=e.max,this.viewableRange.a=this.viewableRange.b=0,this.viewableRange.c=this.viewableRange.d=this.boundsMax,this.timelineUpdateRequired=!0}setupRAFEmitter(e){this._playheadEmitter=new a.create,this._playheadEmitter.on("update",this.onPlayTimeUpdate),super.setupRAFEmitter(e)}get duration(){return this.keyframesDirty&&this.onKeyframesDirty({silent:!0}),this.boundsMax}timeScale(e){return void 0===e?this._timeScale:(this._timeScale=e,this)}repeats(e){if(void 0===e)return this._repeats;this._repeats=e}getPosition(){return this.position.local}convertScrollPositionToTValue(e){return e}convertTValueToScrollPosition(e){return e}hasDuration(){return this.duration>0}destroy(){this._playheadEmitter.destroy(),this._playheadEmitter=null,super.destroy()}}o.REPEAT_FOREVER=-1,t.exports=o},{157:157,46:46,79:79}],81:[function(e,t,s){"use strict";t.exports=function(e){return e.reduce((e,t)=>(e[t]=t,e),{})}},{}],82:[function(e,t,s){"use strict";t.exports=function(e,t){if("string"!=typeof e)return e;try{return(t||document).querySelector(e)||document.querySelector(e)}catch(e){return!1}}},{}],83:[function(e,t,s){"use strict";const i=e(84),n=e(162),r=e(25),a=Object.freeze({responseType:"blob"});class o{static convertToResolution(e){return"boolean"!=typeof e?null:e?"2x":"1x"}static convertViewportName(e,t){return"L"===e||!0!==t&&"xlarge"===e?"large":"M"===e?"medium":"S"===e?"small":e}constructor(e){e=Object.assign({},e),this._requestOptions=Object.assign({},a,e.xhr),this._template=new i(e),this._evtObserver=null,this._state={request:null,objectUrl:""},this._requestCache=new Map,this._history=[],this._openNewRequest()}get request(){return this._state.request}get assetUrl(){return this._state.request.requestUrl}get objectUrl(){return this._state.objectUrl}get viewport(){return this._template.viewport}get resolution(){return this._template.resolution}get requestCache(){return this._requestCache}get history(){return this._history}load(){const e=this._state.request,t=e.xhr.response;let s;return s=!t?e.send():200===e.xhr.status?Promise.resolve({response:t}):Promise.reject({error:this._state.requestErr}),s.then(e=>{let t=e.response;return"blob"===this._requestOptions.responseType&&(this._state.objectUrl=t=window.URL.createObjectURL(e.response),this._updateHistory()),Promise.resolve(t)},e=>{let t=this._state.requestErr=e.error;return Promise.reject(t)})}change(e){if("object"!=typeof e||Array.isArray(e))return void r("AssetSource.change expects an object argument.");const t=e.hasOwnProperty("viewport"),s=e.hasOwnProperty("resolution");if(t||s){if(t&&(this._template.viewport=o.convertViewportName(e.viewport)),s){const t=e.resolution;this._template.resolution="boolean"==typeof t?o.convertToResolution(t):t}this._openNewRequest()}else r("AssetSource.change requires a viewport and/or resolution.")}abortLoad(){this._state.request.xhr.abort()}revokeLastObjectUrl(){if("blob"===this._requestOptions.responseType){const e=this._history.length-2;if(e<0)return;const t=this._history[e];window.URL.revokeObjectURL(t.objectUrl)}}_openNewRequest(){const e="".concat(this._template.viewport,"_").concat(this._template.resolution);let t=this._requestCache.get(e);if(!t){const s=this._template.generatePath();t=new n(s,this._requestOptions),this._requestCache.set(e,t),t.open()}this._state.request=t}_updateHistory(){this._history.push(Object.assign({},this._state))}_revokeAllObjectUrls(){"blob"===this._requestOptions.responseType&&this._history.forEach(e=>{window.URL.revokeObjectURL(e.objectUrl)})}}t.exports=o},{162:162,25:25,84:84}],84:[function(e,t,s){"use strict";const i=e(85),n={isVatPath:!0};class r{static formatPathSegment(e){let t=e.replace(/^\s*\/*\s*|\s*\/*\s*$/g,"");return t?(t=t.replace(/\b\/{2,}\b/g,"/"),/\b:\/{2}\b/.test(t)?t:"/".concat(t)):""}constructor(e){(e=Object.assign({},n,e)).model=e.model||i,this._model=e.model,this._isVatPath=e.isVatPath,this.viewport="",this.resolution="",this._pathSegmentsMap=this._createPathSegmentMap(e),this._template=this._createTemplate(this._pathSegmentsMap)}generatePath(){const e=this._model.TEMPLATE_PLACEHOLDERS,t=this.viewport;let s=this.resolution;return s&&(s="1x"===s||""===t?"":"_".concat(s)),this._template.replace(e.viewport,t).replace(e.resolution,s)}_createPathSegmentMap(e){const t=e.el,s=e.model,i=s.PATH_SEGMENTS,n=s.ATTRIBUTES,r=new Map;return Object.keys(i).forEach(s=>{const a=n[s],o=a&&t&&t.hasAttribute(a);let l=o?t.getAttribute(a):e[s];"/"===l||null===l||"null"===l?l="":l||o||(l=i[s]),r.set(s,l)}),this.viewport=r.get("viewport"),this.resolution=r.get("resolution"),r}_createTemplate(e){let t=this._isVatPath?"/105/media":"";const s=this._model.TEMPLATE_PLACEHOLDERS;return e.forEach((e,i)=>{e&&(t+="viewport"===i?r.formatPathSegment(s.viewport):"resolution"===i?s.resolution:"format"===i?"."+e:r.formatPathSegment(e))}),t}}t.exports=r},{85:85}],85:[function(e,t,s){"use strict";t.exports={ATTRIBUTES:{locale:"data-source-locale",path:"data-source-path",name:"data-source-name",viewport:"data-source-viewport",resolution:"data-source-resolution",format:"data-source-format"},TEMPLATE_PLACEHOLDERS:{viewport:"{{viewport}}",resolution:"{{resolution}}"},PATH_SEGMENTS:{locale:"us",path:"",name:"",viewport:"",resolution:"",format:"mp4"}}},{}],86:[function(e,t,s){"use strict";const i=e(39).EventEmitterMicro,n=e(71),r={create:e(46),update:e(57),draw:e(53)},a=()=>{};let o=0;t.exports=class extends i{constructor(e){super(),this.el=e.el,this.gum=e.gum,this.componentName=e.componentName,this._keyframeController=null}destroy(){this.el=null,this.gum=null,this._keyframeController=null,super.destroy()}addKeyframe(e){const t=e.el||this.el;return(e.group||this.anim).addKeyframe(t,e)}addDiscreteEvent(e){e.event=e.event||"Generic-Event-Name-"+o++;let t=void 0!==e.end&&e.end!==e.start;const s=this.addKeyframe(e);return t?(e.onEnterOnce&&s.controller.once(e.event+":enter",e.onEnterOnce),e.onExitOnce&&s.controller.once(e.event+":exit",e.onExitOnce),e.onEnter&&s.controller.on(e.event+":enter",e.onEnter),e.onExit&&s.controller.on(e.event+":exit",e.onExit)):(e.onEventOnce&&s.controller.once(e.event,e.onEventOnce),e.onEventReverseOnce&&s.controller.once(e.event+":reverse",e.onEventReverseOnce),e.onEvent&&s.controller.on(e.event,e.onEvent),e.onEventReverse&&s.controller.on(e.event+":reverse",e.onEventReverse)),s}addRAFLoop(e){let t=["start","end"];if(!t.every(t=>e.hasOwnProperty(t)))return void console.log("BubbleGum.BaseComponent::addRAFLoop required options are missing: "+t.join(" "));const s=new r.create;s.on("update",e.onUpdate||a),s.on("draw",e.onDraw||a),s.on("draw",()=>s.run());const{onEnter:i,onExit:n}=e;return e.onEnter=()=>{s.run(),i&&i()},e.onExit=()=>{s.cancel(),n&&n()},this.addDiscreteEvent(e)}addContinuousEvent(e){e.onDraw||console.log("BubbleGum.BaseComponent::addContinuousEvent required option `onDraw` is missing. Consider using a regular keyframe if you do not need a callback"),e.event=e.event||"Generic-Event-Name-"+o++;let t=this.addKeyframe(e);return t.controller.on(e.event,e.onDraw),t}mounted(){}onResizeImmediate(e){}onResizeDebounced(e){}onBreakpointChange(e){}get anim(){return this.gum.anim}get keyframeController(){return this._keyframeController||(this._keyframeController=this.anim.getControllerForTarget(this.el))}get pageMetrics(){return n.pageMetrics}}},{39:39,46:46,53:53,57:57,71:71}],87:[function(e,t,s){"use strict";const i=e(39).EventEmitterMicro,n=e(101),r=e(66),a=e(71),o=e(88),l={};class h extends i{constructor(e){super(),this.el=e,this.anim=r,this.components=[],this.el.getAttribute("data-anim-scroll-group")||this.el.setAttribute("data-anim-scroll-group","bubble-gum-group"),r.on(a.EVENTS.ON_DOM_GROUPS_CREATED,e=>{this.componentsInitialized=!1,this.initComponents(),this.setupEvents()}),r.on(a.EVENTS.ON_DOM_KEYFRAMES_CREATED,()=>{this.components.forEach(e=>e.mounted()),this.trigger(h.EVENTS.DOM_COMPONENTS_MOUNTED)}),n.add(()=>r.initialize())}initComponents(){const e=Array.prototype.slice.call(this.el.querySelectorAll("[data-component-list]"));this.el.hasAttribute("data-component-list")&&e.push(this.el);for(let t=0;t<e.length;t++){let s=e[t],i=s.getAttribute("data-component-list").split(" ");for(let e=0,t=i.length;e<t;e++){let t=i[e];""!==t&&" "!==t&&this.addComponent({el:s,componentName:t})}}this.componentsInitialized=!0}setupEvents(){this.onResizeDebounced=this.onResizeDebounced.bind(this),this.onResizeImmediate=this.onResizeImmediate.bind(this),this.onBreakpointChange=this.onBreakpointChange.bind(this),r.on(a.PageEvents.ON_RESIZE_IMMEDIATE,this.onResizeImmediate),r.on(a.PageEvents.ON_RESIZE_DEBOUNCED,this.onResizeDebounced),r.on(a.PageEvents.ON_BREAKPOINT_CHANGE,this.onBreakpointChange)}addComponent(e){const{el:t,componentName:s,data:i}=e;if(!o.hasOwnProperty(s))throw"BubbleGum::addComponent could not add component to '"+t.className+"'. No component type '"+s+"' found!";const n=o[s];if(!h.componentIsSupported(n,s))return void 0===l[s]&&(console.log("BubbleGum::addComponent unsupported component '"+s+"'. Reason: '"+s+".IS_SUPPORTED' returned false"),l[s]=!0),null;let r=t.dataset.componentList||"";r.includes(s)||(t.dataset.componentList=r.split(" ").concat(s).join(" "));let c=new n({el:t,data:i,componentName:e.componentName,gum:this,pageMetrics:a.pageMetrics});return this.components.push(c),this.componentsInitialized&&c.mounted(),c}removeComponent(e){const t=this.components.indexOf(e);-1!==t&&(this.components.splice(t,1),e.el.dataset.componentList=e.el.dataset.componentList.split(" ").filter(t=>t!==e.componentName).join(" "),e.destroy())}getComponentOfType(e,t=document.documentElement){const s="[data-component-list*="+e+"]",i=t.matches(s)?t:t.querySelector(s);return i?this.components.find(t=>t instanceof o[e]&&t.el===i):null}getComponentsOfType(e,t=document.documentElement){const s="[data-component-list*="+e+"]",i=t.matches(s)?[t]:Array.from(t.querySelectorAll(s));return this.components.filter(t=>t instanceof o[e]&&i.includes(t.el))}getComponentsForElement(e){return this.components.filter(t=>t.el===e)}onResizeImmediate(){this.components.forEach(e=>e.onResizeImmediate(a.pageMetrics))}onResizeDebounced(){this.components.forEach(e=>e.onResizeDebounced(a.pageMetrics))}onBreakpointChange(){this.components.forEach(e=>e.onBreakpointChange(a.pageMetrics))}static componentIsSupported(e,t){const s=e.IS_SUPPORTED;if(void 0===s)return!0;if("function"!=typeof s)return console.error('BubbleGum::addComponent error in "'+t+'".IS_SUPPORTED - it should be a function which returns true/false'),!0;const i=e.IS_SUPPORTED();return void 0===i?(console.error('BubbleGum::addComponent error in "'+t+'".IS_SUPPORTED - it should be a function which returns true/false'),!0):i}}h.EVENTS={DOM_COMPONENTS_MOUNTED:"DOM_COMPONENTS_MOUNTED"},t.exports=h},{101:101,39:39,66:66,71:71,88:88}],88:[function(e,t,s){"use strict";t.exports={BaseComponent:e(86)}},{86:86}],89:[function(e,t,s){"use strict";var i,n=e(39).EventEmitterMicro,r=e(59),a=e(44);function o(e){e=e||{},n.call(this),this.id=a.getNewID(),this.executor=e.executor||r,this._reset(),this._willRun=!1,this._didDestroy=!1}(i=o.prototype=Object.create(n.prototype)).run=function(){return this._willRun||(this._willRun=!0),this._subscribe()},i.cancel=function(){this._unsubscribe(),this._willRun&&(this._willRun=!1),this._reset()},i.destroy=function(){var e=this.willRun();return this.cancel(),this.executor=null,n.prototype.destroy.call(this),this._didDestroy=!0,e},i.willRun=function(){return this._willRun},i.isRunning=function(){return this._isRunning},i._subscribe=function(){return this.executor.subscribe(this)},i._unsubscribe=function(){return this.executor.unsubscribe(this)},i._onAnimationFrameStart=function(e){this._isRunning=!0,this._willRun=!1,this._didEmitFrameData||(this._didEmitFrameData=!0,this.trigger("start",e))},i._onAnimationFrameEnd=function(e){this._willRun||(this.trigger("stop",e),this._reset())},i._reset=function(){this._didEmitFrameData=!1,this._isRunning=!1},t.exports=o},{39:39,44:44,59:59}],90:[function(e,t,s){"use strict";var i=e(92),n=function(e){this.rafEmitter=new i,this.rafEmitter.on(e,this._onRAFExecuted.bind(this)),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.cancelAnimationFrame=this.cancelAnimationFrame.bind(this),this._frameCallbacks=[],this._nextFrameCallbacks=[],this._currentFrameID=-1,this._cancelFrameIdx=-1,this._frameCallbackLength=0,this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0},r=n.prototype;r.requestAnimationFrame=function(e){return this._currentFrameID=this.rafEmitter.run(),this._nextFrameCallbacks.push(this._currentFrameID,e),this._nextFrameCallbacksLength+=2,this._currentFrameID},r.cancelAnimationFrame=function(e){this._cancelFrameIdx=this._nextFrameCallbacks.indexOf(e),-1!==this._cancelFrameIdx&&(this._nextFrameCallbacks.splice(this._cancelFrameIdx,2),this._nextFrameCallbacksLength-=2,0===this._nextFrameCallbacksLength&&this.rafEmitter.cancel())},r._onRAFExecuted=function(e){for(this._frameCallbacks=this._nextFrameCallbacks,this._frameCallbackLength=this._nextFrameCallbacksLength,this._nextFrameCallbacks=[],this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0;this._frameCallbackIteration<this._frameCallbackLength;this._frameCallbackIteration+=2)this._frameCallbacks[this._frameCallbackIteration+1](e.time,e)},t.exports=n},{92:92}],91:[function(e,t,s){"use strict";var i=e(90),n=function(){this.events={}},r=n.prototype;r.requestAnimationFrame=function(e){return this.events[e]||(this.events[e]=new i(e)),this.events[e].requestAnimationFrame},r.cancelAnimationFrame=function(e){return this.events[e]||(this.events[e]=new i(e)),this.events[e].cancelAnimationFrame},t.exports=new n},{90:90}],92:[function(e,t,s){"use strict";var i=e(89),n=function(e){i.call(this,e)};(n.prototype=Object.create(i.prototype))._subscribe=function(){return this.executor.subscribe(this,!0)},t.exports=n},{89:89}],93:[function(e,t,s){"use strict";var i=e(91);t.exports=i.requestAnimationFrame("draw")},{91:91}],94:[function(e,t,s){"use strict";var i=e(91);t.exports=i.requestAnimationFrame("update")},{91:91}],95:[function(e,t,s){"use strict";const i=e(94),n=e(93),r=e(96),a=e(98),o=e(99),l=e(97);t.exports=class{constructor(e,t={}){if("number"!=typeof e||!isFinite(e))throw new TypeError('Clip duration must be a finite number; got "'.concat(e,'"'));"function"==typeof t&&(t={draw:t}),this.ease=a(t.ease),this.update=a(t.update),this.draw=t.draw,this.prepare=a(t.prepare),this.finish=a(t.finish),this._duration=1e3*e,this._startTime=null,this._isPrepared=!1,this._promise=null,this._isPlaying=!1}get isReversed(){return this._duration<0}get isComplete(){const e=this.progress;return!this.isReversed&&e>=1||this.isReversed&&e<=0}get progress(){if(0===this._duration)return 1;let e=(this.lastFrameTime-this._startTime)/this._duration;return this.isReversed&&(e=1+e),l(e,0,1)}get easedProgress(){return this.ease?this.ease(this.progress):this.progress}_run(e,t){this.lastFrameTime=Date.now(),null===this._startTime&&(this._startTime=this.lastFrameTime);const s=this.easedProgress;this.update&&i(()=>this._isPlaying&&this.update(s)),n(()=>{this._isPlaying&&(this.draw(s),this.isComplete?o(n,[this.finish,t]):this._run(this,t))})}play(){if("function"!=typeof this.draw)throw new Error('Clip must be given a "draw" function as an option or have its "draw" method overriden.');return this._isPlaying=!0,this._promise||(this._promise=new Promise((e,t)=>{!this._isPrepared&&this.prepare?(this._isPrepared=!0,n(()=>r(this.prepare(),()=>{this._run(this,e)}))):this._run(this,e)})),this._promise}destroy(){this._isPlaying=!1,this.draw=this.finish=this.update=null}static play(){return new this(...arguments).play()}}},{93:93,94:94,96:96,97:97,98:98,99:99}],96:[function(e,t,s){"use strict";t.exports=function(e,t){e instanceof Promise?e.then(t):t()}},{}],97:[function(e,t,s){"use strict";t.exports=function(e,t,s){return Math.min(Math.max(e,t),s)}},{}],98:[function(e,t,s){"use strict";t.exports=function(e){return"function"==typeof e?e:null}},{}],99:[function(e,t,s){"use strict";t.exports=function(e,t){const s=t.length;let i=0;!function n(){"function"==typeof t[i]&&e(t[i]),i++,i<s&&n()}()}},{}],100:[function(e,t,s){"use strict";var i={create:e(164),invert:e(165),clone:e(163),transpose:e(170)},n={create:e(171),dot:e(173),normalize:e(176),length:e(175),cross:e(172),fromValues:e(174)},r={create:e(177),transformMat4:e(179),fromValues:e(178)},a=(Math.PI,180/Math.PI);let o=function(e,t,s,i){var r=n.create();return r[0]=s*e[0]+i*t[0],r[1]=s*e[1]+i*t[1],r[2]=s*e[2]+i*t[2],r},l=function(e){var t,s,i,r=e[3]*e[3],a=e[0]*e[0],o=e[1]*e[1],l=e[2]*e[2],h=a+o+l+r,c=e[0]*e[1]+e[2]*e[3];return c>.499*h?(s=2*Math.atan2(e[0],e[3]),i=Math.PI/2,t=0,n.fromValues(t,s,i)):c<-.499*h?(s=-2*Math.atan2(e[0],e[3]),i=-Math.PI/2,t=0,n.fromValues(t,s,i)):(s=Math.atan2(2*e[1]*e[3]-2*e[0]*e[2],a-o-l+r),i=Math.asin(2*c/h),t=Math.atan2(2*e[0]*e[3]-2*e[1]*e[2],-a+o-l+r),n.fromValues(t,s,i))};const h=function(e){return Math.abs(e)<1e-4};t.exports=function(e,t){return function(e,t){t=t||!1;for(var s=i.clone(e),c=n.create(),u=n.create(),d=n.create(),m=r.create(),p=r.create(),f=(n.create(),0);f<16;f++)s[f]/=s[15];var g=i.clone(s);g[3]=0,g[7]=0,g[11]=0,g[15]=1;s[3],s[7],s[11];var _=s[12],v=s[13],y=s[14],b=(s[15],r.create());if(h(s[3])&&h(s[7])&&h(s[11]))m=r.fromValues(0,0,0,1);else{b[0]=s[3],b[1]=s[7],b[2]=s[11],b[3]=s[15];var E=i.invert(i.create(),g),w=i.transpose(i.create(),E);m=r.transformMat4(m,b,w)}c[0]=_,c[1]=v,c[2]=y;var x=[n.create(),n.create(),n.create()];x[0][0]=s[0],x[0][1]=s[1],x[0][2]=s[2],x[1][0]=s[4],x[1][1]=s[5],x[1][2]=s[6],x[2][0]=s[8],x[2][1]=s[9],x[2][2]=s[10],u[0]=n.length(x[0]),n.normalize(x[0],x[0]),d[0]=n.dot(x[0],x[1]),x[1]=o(x[1],x[0],1,-d[0]),u[1]=n.length(x[1]),n.normalize(x[1],x[1]),d[0]/=u[1],d[1]=n.dot(x[0],x[2]),x[2]=o(x[2],x[0],1,-d[1]),d[2]=n.dot(x[1],x[2]),x[2]=o(x[2],x[1],1,-d[2]),u[2]=n.length(x[2]),n.normalize(x[2],x[2]),d[1]/=u[2],d[2]/=u[2];var I=n.cross(n.create(),x[1],x[2]);if(n.dot(x[0],I)<0)for(f=0;f<3;f++)u[f]*=-1,x[f][0]*=-1,x[f][1]*=-1,x[f][2]*=-1;p[0]=.5*Math.sqrt(Math.max(1+x[0][0]-x[1][1]-x[2][2],0)),p[1]=.5*Math.sqrt(Math.max(1-x[0][0]+x[1][1]-x[2][2],0)),p[2]=.5*Math.sqrt(Math.max(1-x[0][0]-x[1][1]+x[2][2],0)),p[3]=.5*Math.sqrt(Math.max(1+x[0][0]+x[1][1]+x[2][2],0)),x[2][1]>x[1][2]&&(p[0]=-p[0]),x[0][2]>x[2][0]&&(p[1]=-p[1]),x[1][0]>x[0][1]&&(p[2]=-p[2]);var S=r.fromValues(p[0],p[1],p[2],2*Math.acos(p[3])),A=l(p);return t&&(d[0]=Math.round(d[0]*a*100)/100,d[1]=Math.round(d[1]*a*100)/100,d[2]=Math.round(d[2]*a*100)/100,A[0]=Math.round(A[0]*a*100)/100,A[1]=Math.round(A[1]*a*100)/100,A[2]=Math.round(A[2]*a*100)/100,S[3]=Math.round(S[3]*a*100)/100),{translation:c,scale:u,skew:d,perspective:m,quaternion:p,eulerRotation:A,axisAngle:S}}(function(e){var t=String(getComputedStyle(e).transform).trim(),s=i.create();if("none"===t||""===t)return s;var n,r,a=t.slice(0,t.indexOf("("));if("matrix3d"===a)for(n=t.slice(9,-1).split(","),r=0;r<n.length;r++)s[r]=parseFloat(n[r]);else{if("matrix"!==a)throw new TypeError("Invalid Matrix Value");for(r=(n=t.slice(7,-1).split(",")).length;r--;)n[r]=parseFloat(n[r]);s[0]=n[0],s[1]=n[1],s[12]=n[4],s[4]=n[2],s[5]=n[3],s[13]=n[5]}return s}(e),t)}},{163:163,164:164,165:165,170:170,171:171,172:172,173:173,174:174,175:175,176:176,177:177,178:178,179:179}],101:[function(e,t,s){"use strict";let i=!1;const n=[];t.exports={NUMBER_OF_FRAMES_TO_WAIT:30,add:function(e){if(n.push(e),i)return;i=!0;let t=document.documentElement.scrollHeight,s=0;const r=()=>{let e=document.documentElement.scrollHeight;if(t!==e)s=0;else if(s++,s>=this.NUMBER_OF_FRAMES_TO_WAIT)return void n.forEach(e=>e());t=e,requestAnimationFrame(r)};requestAnimationFrame(r)}}},{}],102:[function(e,t,s){"use strict";t.exports={getWindow:function(){return window},getDocument:function(){return document},getNavigator:function(){return navigator}}},{}],103:[function(e,t,s){"use strict";var i=e(102);t.exports=function(){var e=i.getWindow().matchMedia("(prefers-reduced-motion)");return!(!e||!e.matches)}},{102:102}],104:[function(e,t,s){"use strict";const i=e(110).controls,n=e(38);t.exports=class{constructor(e,t){t=Object.assign({},t),this._model=t.model||i,this._container=e,this._ctrls=new Map,this._state={arePresent:!1}}get arePresent(){return this._state.arePresent}get allElements(){return this._ctrls}initialize(){const e=this._container;if(!e)return;const t=this._model.SELECTORS;Object.keys(t).forEach(s=>{if("container"===s)return;const i=t[s],n=e.querySelector(i);n&&(this._ctrls.set(s,n),this._state.arePresent=!0)})}isPresent(e){return!!this._ctrls.get(e)}getElement(e){return this._ctrls.get(e)||null}enable(e){this._setDisabled(e,!1)}disable(e){this._setDisabled(e,!0)}_setDisabled(e,t){const s=this._ctrls,i=(i,r)=>{const a=s.get(i);a?a.disabled=r:n("Unable to ".concat(t?"disable":"enable"," the ").concat(e," control. The element does not exist."))};"string"==typeof e?i(e,t):Array.isArray(e)&&e.forEach(e=>{i(e,t)})}disableAll(){this._ctrls.forEach((e,t)=>{this.disable(t)})}attach(e,t){const s=this._ctrls.get(e);s&&"function"==typeof t?s.addEventListener("click",t):n("Unable to attach ".concat(e," control."))}remove(e,t){const s=this._ctrls.get(e);"string"!=typeof e&&"function"!=typeof t||!this._ctrls.get(e)?n("Unable to remove ".concat(e," control.")):s.removeEventListener("click",t)}}},{110:110,38:38}],105:[function(e,t,s){"use strict";const i=e(110).frames,n=e(38);t.exports=class{constructor(e,t){t=Object.assign({},t),this._model=t.model||i,this._container=e,this._frames=new Map,this._promise={},this._state={arePresent:!1,active:!1}}get arePresent(){return this._state.arePresent}get active(){let e=!1;return this._frames.forEach((t,s)=>{const i=this.isActive(s);e=i||e}),e}isPresent(e){return!!this._frames.get(e)}isActive(e){return this._state[e].active}getElement(e){const t=this._frames.get(e);return t||(n("The ".concat(e,"Frame does not appear to exist.")),null)}initialize(){const e=this._container;if(!e)return;const t=this._model.SELECTORS;Object.keys(t).forEach(s=>{if("container"===s)return;const i=t[s],n=e.querySelector(i);n&&(this._frames.set(s,n),this._state.arePresent=!0,this._state[s]={},this._state[s].active=n.classList.contains(this._model.CLASS.active),this._state[s].hasCSSTransition=this._checkForCSSTransition(n,s),this._promise[s]={},this._promise[s].activate=null,this._promise[s].deactivate=null)})}activate(e){return this._setActivity(e,!0)}deactivate(e){return this._setActivity(e,!1)}deactivateAll(){let e=[];return this._frames.forEach((t,s)=>{e.push(this.deactivate(s))}),Promise.all(e)}_checkForCSSTransition(e,t){const s=window.getComputedStyle(e)["transition-duration"],i=s&&"0s"!==s;return i||n("InlineVideo : Frames : ".concat(t?t+"Frame":e," does not have a valid CSS transition for (de)activation")),i}_toggleActivity(e,t){t||(t=this.getElement(e)),t.classList.toggle(this._model.CLASS.active),this._state[e].active=!this._state[e].active}_setActivity(e,t){const s=this._frames.get(e);if(!s)return Promise.reject("The ".concat(e,"Frame element does not exist"));const i=t?"activate":"deactivate",n=t?"deactivate":"activate",r=this._promise[e][i];if(r)return r;return(this._promise[e][n]||Promise.resolve()).then(()=>(this._promise[e][n]=null,this._promise[e][i]=new Promise((n,r)=>{const a=this._state[e].active;if(!(t&&!a||!t&&a))return this._promise[e][i]=null,void n();const o=!!s.offsetHeight;if(this._state[e].hasCSSTransition&&o){const t=()=>{s.removeEventListener("transitionend",t),this._promise[e][i]=null,n()};s.addEventListener("transitionend",t),this._toggleActivity(e,s)}else this._toggleActivity(e,s),this._promise[e][i]=null,n()})))}}},{110:110,38:38}],106:[function(e,t,s){"use strict";const i=e(110).indicators,n=e(38);t.exports=class{constructor(e,t){t=Object.assign({},t),this._model=t.model||i,this._container=e,this._indicators=new Map,this._state={arePresent:!1}}get arePresent(){return this._state.arePresent}get allElements(){return this._indicators}initialize(){const e=this._container;if(!e)return;const t=this._model.SELECTORS;Object.keys(t).forEach(s=>{if("container"===s)return;const i=t[s],n=e.querySelector(i);n&&(this._indicators.set(s,n),this._state.arePresent=!0,this._state[s]={},this._state[s].active=n.classList.contains(this._model.CLASS.active))})}isPresent(e){return!!this._indicators.get(e)}isActive(e){return this._state[e].active}getElement(e){return this._indicators.get(e)||null}activate(e){this._setActivity(e,!1)}deactivate(e){this._setActivity(e,!0)}_setActivity(e,t){const s=this._indicators.get(e);if(!s)return void n("Unable to ".concat(t?"deactivate":"activate"," the ").concat(e," indicator. The element does not exist."));const i=t?"remove":"add";this._state[e].active=!t,s.classList[i](this._model.CLASS.active)}}},{110:110,38:38}],107:[function(e,t,s){"use strict";const i=e(108),n=e(104),r=e(105),a=e(106),o=e(110),l=e(38),h=e(25);t.exports=class extends i{constructor(e,t){(t=Object.assign({},t)).model=t.model||o,t.model=Object.assign({},t.model,t.model.video),delete t.model.video,super(e,t),this._controls={},this._frames={},this._indicators={},this.replay=this.replay.bind(this)}get frames(){return this._frames}get controls(){return this._controls}get indicators(){return this._indicators}initialize(){super.initialize();const e=this._container;if(!e)return void h("InlineVideo Error : A video element was passed as the containing element. InlineVideo class expects a container element holding the video, optional frames, and optional controls.");const t=e.querySelector(this._model.controls.SELECTORS.container),s=e.querySelector(this._model.frames.SELECTORS.container)||e,i=e.querySelector(this._model.indicators.SELECTORS.container),o=this._model;t&&(this._controls=new n(t,{model:o.controls}),this._controls.initialize(),this._controls.arePresent&&this._attachControls()),s&&(this._frames=new r(s,{model:o.frames}),this._frames.initialize(),this._frames.arePresent||l("No inline-video frames appear to be present. At minimum, a static frame should be present for fallback.")),i&&(this._indicators=new a(i,{model:o.indicators}),this._indicators.initialize())}load(){const e=this._indicators;!this.loaded&&e.arePresent&&e.activate("loading");let t=Promise.resolve();return this._frames.active,t.then(()=>super.load())}play(){const e=this._frames,t=this._controls,s=e.isPresent("end")&&e.isActive("end")?e.deactivate("end"):Promise.resolve(),i=()=>{this._el.removeEventListener("playing",i),t.arePresent&&(t.disable(["play","replay"]),t.enable("pause"))};return this._el.addEventListener("playing",i),s.then(()=>super.play(),e=>{l(e)})}pause(){const e=this._controls;return super.pause().then(()=>{e.arePresent&&(e.disable("pause"),e.enable("play"))},e=>{l(e)})}reset(){const e=this._controls;return super.reset().then(()=>{e.arePresent&&(e.disable("pause"),this.hasPlayed&&e.isPresent("replay")?e.enable("replay"):e.enable("play"))},e=>{l(e)})}replay(){const e=this._controls;return e.arePresent&&(e.disable("replay"),e.enable("pause")),this.reset().then(()=>this.play()).catch(e=>{l(e)})}_attachControls(){const e=this._controls;e.allElements.forEach((t,s)=>{const i=this[s];i?e.attach(s,i):l("Unable to attach ".concat(s," control. No equivalent video method."))})}_onLoadSuccess(e){const t=this._controls,s=this._frames,i=this._indicators;return super._onLoadSuccess(e).then(()=>(i.arePresent&&i.deactivate("loading"),t.arePresent&&(this.hasPlayed&&t.isPresent("replay")?t.enable("replay"):t.enable("play")),s.arePresent?s.deactivateAll():Promise.resolve())).catch(e=>{l(e)}).then(()=>Promise.resolve())}_onLoadFailure(e){const t=this._controls,s=this._frames,i=this._indicators;return super._onLoadFailure(e).catch(e=>{}).then(()=>(i.arePresent&&i.deactivate("loading"),t.arePresent&&t.disableAll(),s.arePresent?s.activate("static"):Promise.resolve())).then(()=>{const e=s.deactivate("end"),t=s.deactivate("start");return Promise.all([e,t])}).catch(e=>{l(e)}).then(()=>{const t=this._el;return t.getAttribute("src")&&(t.setAttribute("src",""),this._video.source.revokeLastObjectUrl()),Promise.reject(e)})}_onEnded(e){const t=this._controls,s=this._frames;t.arePresent&&(t.disable("pause"),t.isPresent("replay")?t.enable("replay"):t.enable("play"));return(s.isPresent("end")&&!s.isActive("end")?s.activate("end"):Promise.resolve()).catch(e=>{l(e)}).then(()=>super._onEnded(e))}}},{104:104,105:105,106:106,108:108,110:110,25:25,38:38}],108:[function(e,t,s){"use strict";const i=e(110).video,n=e(83),r=e(25);class a{static convertToResolution(e){return n.convertToResolution(e)}static convertViewportName(e,t){return n.convertViewportName(e,t)}constructor(e,t){t=Object.assign({},t),this._model=t.model||i,delete t.model,this._options=t;const s="VIDEO"===e.tagName;this._container=s?null:e,this._el=s?e:null,this._source=null,this._promise={load:null,nativePlay:null,playOnEnd:null},this._state={loading:!1,hasPlayed:!1,assetUrl:""},this.load=this.load.bind(this),this.play=this.play.bind(this),this.pause=this.pause.bind(this),this.end=this.end.bind(this),this.reset=this.reset.bind(this),this._crossBrowserPlay=this._crossBrowserPlay.bind(this),this._playPromiseOnEnded=this._playPromiseOnEnded.bind(this),this._onEnded=this._onEnded.bind(this)}get el(){return this._el}get source(){return this._source}get loading(){return this._state.loading}get loaded(){return this._state.assetUrl===this._source.assetUrl}get hasPlayed(){return this._state.hasPlayed}get assetUrl(){return this._state.hasPlayed}get isPlaying(){const e=this._el;return!(!e||e.paused||e.ended||!(e.readyState>2))}get viewport(){return this.source.viewport}set viewport(e){this.change({viewport:a.convertViewportName(e)})}get resolution(){return this.source.resolution}set resolution(e){this.change({resolution:e})}get normalizedDuration(){const e=this._el.duration,t=e%1;return e-t+.1*Math.ceil(t/.1)}initialize(){this._container&&(this._el=this._container.querySelector(this._model.SELECTORS.video)),this._options.el=this._el,this._source=new n(this._options)}change(e){this.source.change(e)}load(){return this._promise.load&&this.loaded?this._promise.load:(this._state.loading=!0,this._promise.load=this._source.load().then(e=>this._onLoadSuccess(e),e=>this._onLoadFailure(e)))}play(){if(this._promise.nativePlay||this.isPlaying)return this._promise.playOnEnd;let e=this._promise.load;return e||this.loaded||(e=this.load()),this._promise.playOnEnd=e.then(this._playPromiseOnEnded)}pause(){let e=this._promise.nativePlay;return e=e||Promise.resolve(),e.then(()=>(!this._el.paused&&this.loaded&&this._el.pause(),Promise.resolve()),e=>Promise.reject(e))}reset(){let e=this._promise.nativePlay;return e=e||Promise.resolve(),e.then(()=>(this.loaded&&(this._el.paused||this._el.pause(),this._el.currentTime=0),Promise.resolve()),e=>Promise.reject(e))}end(){return this._el.ended?Promise.resolve():this.pause().then(()=>(this._el.currentTime=this.normalizedDuration,Promise.resolve()),e=>Promise.reject(e))}_onLoadSuccess(e){return new Promise((t,s)=>{const i=()=>{this._el.removeEventListener("loadeddata",i),this._onFirstFrameLoaded(),t()};this._el.addEventListener("loadeddata",i),this._el.setAttribute("src",e),this._el.load()})}_onFirstFrameLoaded(){this._state.assetUrl=this._source.assetUrl,this._state.loading=!1,this._source.revokeLastObjectUrl()}_onLoadFailure(e){return r("inline-video load error:",e),this._state.loading=!1,Promise.reject(e)}_crossBrowserPlay(){const e=this._el.play();return e||Promise.resolve()}_playPromiseOnEnded(){return new Promise((e,t)=>{this._el.onended=()=>{this._onEnded(e)};(this._promise.nativePlay=this._crossBrowserPlay()).then(()=>{this._state.hasPlayed=!0,this._promise.nativePlay=null}).catch(t)})}_onEnded(e){return e()}}t.exports=a},{110:110,25:25,83:83}],109:[function(e,t,s){"use strict";const i=e(86),n=e(53),r=e(25),a=e(85),o=e(107),l="only screen and (-webkit-min-device-pixel-ratio: 1.5), screen and (min-resolution: 1.5dppx), screen and (min-resolution: 144dpi)",h="(prefers-reduced-motion)",c={start:"-100vh + (t + 50h)",end:"(t + 50h)",event:"inline-video-play"},u={start:"-250vh + (t + 50h)",end:"(t + 50h) + 150vh",event:"inline-video-load"},d={animLoad:"data-inline-video-anim-load",animPlay:"data-inline-video-anim-play",reload:"data-inline-video-reload-viewports",viewport:a.ATTRIBUTES.viewport,resolution:a.ATTRIBUTES.resolution};t.exports=class extends i{static IS_SUPPORTED(){return document.documentElement.classList.contains("inline-video")}constructor(e,t){super(e),this.video=null,this._domOverrides={},this._pathSegments={vatPath:t,viewport:o.convertViewportName(e.pageMetrics.breakpoint),resolution:o.convertToResolution(this.isRetina)},this._animController="",this._animEvents={load:"",play:""},this._load=this._load.bind(this),this._play=this._play.bind(this),this._enableReducedMotionControls=this._enableReducedMotionControls.bind(this)}get isRetina(){return window.matchMedia(l).matches}get prefersReducedMotion(){return window.matchMedia(h).matches}mounted(){const e=this._pathSegments,t=this._getDomOverrides(d);this.video=new o(this.el,{path:"".concat(e.vatPath),viewport:e.viewport,resolution:e.resolution}),this.video.initialize();const s=Object.assign({},u,t.animLoad),i=Object.assign({},c,t.animPlay);this._setupAnimLoad(s),this._setupAnimPlay(i),this._animController=this.anim.getControllerForTarget(this.el)}onBreakpointChange(e){const t=e.breakpoint,s=e.previousBreakpoint,i=this._shouldReloadViewport(t,s),n=this._shouldReloadResolution(),r={};(i||n)&&(i&&(r.viewport=o.convertViewportName(t)),n&&(r.resolution=o.convertToResolution(this.isRetina)),this.video.change(r))}_getDomOverrides(e){const t=this.el.querySelector("video");return Object.keys(e).forEach(s=>{const i=e[s],n=t.getAttribute(i);n&&"null"!==n&&(this._domOverrides[s]=n)}),{}}_enableReducedMotionControls(){const e=this.video.controls;return this.prefersReducedMotion&&e.arePresent&&(e.isPresent("play")?e.enable("play"):e.isPresent("replay")&&e.enable("replay")),Promise.resolve()}_load(){const e=this.video;if(e.loaded)return Promise.resolve();return(()=>new Promise((t,s)=>{const i=()=>{n(()=>{window.URL.revokeObjectURL(e.el.src),e.el.src="",t()})};this.prefersReducedMotion&&!e.controls.arePresent?e.frames.activate("static").then(i,s):e.load().then(this._enableReducedMotionControls).then(t,s)}))().catch(e=>{r("BaseInlineVideo encountered an error while trying to load, ".concat(e))})}_play(){return this.video.play().catch(e=>{r("BaseInlineVideo encountered an error while trying to play, ".concat(e))})}_setupAnimLoad(e){const t=this.addDiscreteEvent(e),s=this._animEvents.load=e.event;t.controller.on("".concat(s,":enter"),this._load),t.controller.on("".concat(s,":exit"),()=>{this.video.isPlaying&&this.video.end()})}_setupAnimPlay(e){if(!this.prefersReducedMotion){const t=this.addDiscreteEvent(e),s=this._animEvents.play=e.event;t.controller.once("".concat(s,":enter"),this._play)}}_shouldReloadViewport(e,t){const s=this._domOverrides;if(s.viewport||e===t)return!1;if(!s.reload)return!0;e=e.toLowerCase(),t=t.toLowerCase();const i=s.reload.split(","),n=/(\w+)(:)(\w+)/,r=s.reload.length;let a=!1;for(let s=0;s<r;s++){const r=i[s];if(a=r===e||r===t,a)break;const o=r.match(n);if(o){const s=o[1],i=o[3];if(a=s===t&&i===e,a)break}}return a}_shouldReloadResolution(){if(this._domOverrides.resolution)return!1;return o.convertToResolution(this.isRetina)!==this.video.resolution}}},{107:107,25:25,53:53,85:85,86:86}],110:[function(e,t,s){"use strict";t.exports={video:{SELECTORS:{video:"video",mediaContainer:".inline-video-media"}},frames:{CLASS:{active:"active"},SELECTORS:{container:".inline-video-media",static:".inline-video-frame-static",start:".inline-video-frame-start",end:".inline-video-frame-end"}},controls:{SELECTORS:{container:".inline-video-controls",play:".inline-video-control-play",replay:".inline-video-control-replay",pause:".inline-video-control-pause",reset:".inline-video-control-reset"}},indicators:{CLASS:{active:"active"},SELECTORS:{container:".inline-video-indicators",loading:".inline-video-indicator-loading"}}}},{}],111:[function(e,t,s){"use strict";const i=e(40),n=e(113),r=e(119),a=e(116),o=e(122),l=e(128),h=e(115),c=e(120),u=e(125),d=["beforeCreate","created","beforeMount","createItems","itemsCreated","mounted","animateToItem","onItemChangeInitiated","onItemChangeOccurred","onItemChangeCompleted","onResizeImmediate","onBreakpointChange","onResizeDebounced","destroy"];class m extends i{constructor(e){super(e),this.el=e.el,this.model=Object.assign({options:e},JSON.parse(JSON.stringify(n))),this._items=[],this.itemIndex={current:0,previous:0},d.forEach(e=>{this[e]=(...t)=>{this["__".concat(e)]&&this["__".concat(e)].forEach(e=>e.apply(this,t))}}),this.on(n.Events.ITEM_CHANGE_INITIATED,this.onItemChangeInitiated),this.on(n.Events.ITEM_CHANGE_OCCURRED,this.onItemChangeOccurred),this.on(n.Events.ITEM_CHANGE_COMPLETED,this.onItemChangeCompleted),["beforeCreate","created","beforeMount","createItems"].forEach(t=>this[t](e))}}m.withMixins=(...e)=>{const t=class extends m{},s=t.prototype;return e.unshift(r,l,o),e.push(h,u,a,c),e.forEach(e=>{for(const t in e)d.includes(t)?(s["__".concat(t)]=s["__".concat(t)]||[],s["__".concat(t)].push(e[t])):s[t]=e[t]}),t},t.exports=m},{113:113,115:115,116:116,119:119,120:120,122:122,125:125,128:128,40:40}],112:[function(e,t,s){"use strict";const i=e(39).EventEmitterMicro,n={draw:e(53),cancelDraw:e(51)};t.exports=class extends i{constructor(e){super(),this._x=0,this._y=0,this._opacity=0,this._width=0,this._height=0,this._zIndex=0,this.index=e.index,this.el=e.el,this.applyDraw=this.applyDraw.bind(this),this.measure()}measure(){const e=getComputedStyle(this.el);this._width=this.el.clientWidth,this._height=this.el.clientHeight,this._zIndex=parseInt(e.getPropertyValue("z-index")),this._opacity=parseFloat(e.getPropertyValue("opacity"))}select(){this.el.classList.add("current"),this.trigger("select",this)}deselect(){this.el.classList.remove("current"),this.trigger("deselect",this)}progress(e){}needsRedraw(){n.cancelDraw(this._rafID),this._rafID=n.draw(this.applyDraw,!0)}applyDraw(){this.el.style.zIndex=this._zIndex,this.el.style.opacity=this._opacity,this.el.style.transform="translate(".concat(this._x,"px, ").concat(this._y,"px)")}get id(){return this.el.id}get height(){return this._height}set height(e){this._height=e,this.needsRedraw()}get width(){return this._width}set width(e){this._width=e,this.needsRedraw()}get x(){return this._x}set x(e){this._x=e,this.needsRedraw()}get y(){return this._y}set y(e){this._y=e,this.needsRedraw()}get opacity(){return this._opacity}set opacity(e){this._opacity=e,this.needsRedraw()}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex=e,this.needsRedraw()}}},{39:39,51:51,53:53}],113:[function(e,t,s){"use strict";t.exports={PrefersReducedMotion:!1,IsRTL:!1,IsTouch:!1,Slide:{Selector:".slide-container"},Item:{Selector:".gallery-item",ConstructorFunction:null},DotNav:{Selector:".dotnav"},PaddleNav:{Selector:".paddlenav"},ChapterPlayer:{defaultEase:e=>e},FadeCaptionOnChange:{ItemSelector:".captions-gallery [data-captions-gallery-item]"},TabNav:{ItemSelector:".tabnav-items .tabnav-item",RoamingTabIndexSelector:"a"},SwipeDrag:{DesktopSwipe:!1,movementRateMultiplier:1.5,velocityMultiplier:8},Events:{ITEM_CHANGE_INITIATED:"ITEM_CHANGE_INITIATED",ITEM_CHANGE_OCCURRED:"ITEM_CHANGE_OCCURRED",ITEM_CHANGE_COMPLETED:"ITEM_CHANGE_COMPLETED"}}},{}],114:[function(e,t,s){"use strict";let i;try{i=e("@marcom/ac-analytics").observer.Gallery}catch(e){}t.exports={created(e){this.analytics={lastTrackedItem:null,observer:null,events:{UPDATE:"update",UPDATE_COMPLETE:"update:complete"}}},mounted(){if(i){let e=this.el.getAttribute("id");e||(console.warn("No ID attribute found on the Mixin Gallery element - please add an ID",this),e="null"),this.analytics.observer=new i(this,{galleryName:e,beforeUpdateEvent:this.analytics.events.UPDATE,afterUpdateEvent:this.analytics.events.UPDATE_COMPLETE,trackAutoRotate:!0})}},onItemChangeCompleted(e){if(!e.previous||e.current===this.analytics.lastTrackedItem||e.current===e.previous&&!this.analytics.lastTrackedItem)return;this.analytics.lastTrackedItem=e.current;let t={incoming:{id:e.current.id},outgoing:{id:e.previous.id},interactionEvent:this.lastInteractionEvent};this.trigger(this.analytics.events.UPDATE_COMPLETE,t)}}},{undefined:void 0}],115:[function(e,t,s){"use strict";t.exports={createItems(e){if(this._items.length)this.itemsCreated();else{if(!this.model.Item.ConstructorFunction)throw new ReferenceError("MixinGallery::AutoCreateItems - this.model.Item.ConstructorFunction is null");if(0===this._items.length){this._items=[],Array.from(this.el.querySelectorAll(this.model.Item.Selector)).forEach((e,t)=>{const s=new this.model.Item.ConstructorFunction({el:e,index:t});this._items.push(s)});let e=this._items[this._items.length-1];for(let t=0;t<this._items.length;t++){const s=this._items[t];s.prev=e,s.next=this._items[t+1],e=s}e.next=this._items[0]}this.itemsCreated()}}}},{}],116:[function(e,t,s){"use strict";t.exports={itemsCreated(e){this.model.options.gum||this._isVue||(this.anim.on("ON_RESIZE_IMMEDIATE",e=>this.onResizeImmediate(e)),this.anim.on("ON_RESIZE_DEBOUNCED",e=>this.onResizeDebounced(e)),this.anim.on("ON_BREAKPOINT_CHANGE",e=>this.onBreakpointChange(e)),requestAnimationFrame(this.mounted))}}},{}],117:[function(e,t,s){"use strict";const i=e(3),n=e(14),r=e(17);t.exports={created(){this.dotNav={navElement:null,current:null,roamingTabIndex:null,items:[],onRoamingTabIndexSelect(e){if(0===this.dotNav.items.filter(t=>t===e.el).length)throw"Could not find tab nav item"}},this.dotNav.onRoamingTabIndexSelect=this.dotNav.onRoamingTabIndexSelect.bind(this)},itemsCreated(){this.dotNav.navElement=this.el.querySelector(this.model.DotNav.Selector),this._items.forEach((e,t)=>{const s=this.dotNav.navElement.querySelector("a[data-ac-gallery-trigger=".concat(e.id,"]"));s.setAttribute("role",r.TAB),s.setAttribute(n.CONTROLS,e.id),s.setAttribute(n.SELECTED,!1),e.on("select",()=>{s.classList.add("current"),s.setAttribute(n.SELECTED,!0)}),e.on("deselect",()=>{s.classList.remove("current"),s.setAttribute(n.SELECTED,!1)}),s.parentElement.addEventListener("click",t=>{t.preventDefault(),this.lastInteractionEvent=t;let s=this.itemIndex.current+(e.index-this.wrappedIndex(this.itemIndex.current));this.animateToItem(s)}),this.dotNav.items.push(s),e.el.setAttribute("role",r.TABPANEL),e.el.setAttribute(n.LABELLEDBY,this.dotNav.items[t].id)})},mounted(){this.dotNav.roamingTabIndex=new i(this.dotNav.navElement,{selector:"a"}),this.dotNav.roamingTabIndex.start(),this.dotNav.roamingTabIndex.on("onSelect",this.dotNav.onRoamingTabIndexSelect)},onItemChangeCompleted(e){let t=this.dotNav.items.filter(t=>t.getAttribute("data-ac-gallery-trigger")===e.current.id)[0];this.setCurrentItem(t),this.dotNav.roamingTabIndex.setSelectedItemByIndex(this.wrappedIndex(this.itemIndex.current),!0)},setCurrentItem(e){e!==this.dotNav.current&&(this.dotNav.current=e)}}},{14:14,17:17,3:3}],118:[function(e,t,s){"use strict";const i=e(95),n=e(72);t.exports={mounted(){this.el.classList.remove("peeking"),this._items.forEach(e=>{e.measure(),e.x=0,e.zIndex=e===this.currentItem?2:0}),this.trigger(this.model.Events.ITEM_CHANGE_OCCURRED,{gallery:this,previous:null,current:this.currentItem})},animateToItem(e){if(this.itemIndex.current===e)return;this.el.parentElement.scrollLeft=0;let t=this.model.IsTouch?"easeOutCubic":"easeInOutCubic";this.clip&&this.clip._isPlaying&&(t="easeOutQuint",this.clip.destroy());const s=this._items[this.wrappedIndex(this.itemIndex.previous)],r=this._items[this.wrappedIndex(this.itemIndex.current)],a=this._items[this.wrappedIndex(e)];a.opacity=0,s.zIndex=0,r.zIndex=1,a.zIndex=2;let o=!1;this.clip=new i(1,{ease:n[t],prepare:()=>this.trigger(this.model.Events.ITEM_CHANGE_INITIATED,{gallery:this,previous:s,current:r,next:a}),update:e=>{e>.5&&!o&&(o=!0,this.itemIndex.previous=r.index,this.itemIndex.current=a.index,this.trigger(this.model.Events.ITEM_CHANGE_OCCURRED,{gallery:this,previous:r,current:a})),a.opacity=e},draw:()=>{},finish:()=>{this.trigger(this.model.Events.ITEM_CHANGE_COMPLETED,{gallery:this,previous:r,current:a})}}),this.clip.play().then(()=>{this.clip.destroy(),this.clip=null})},onResizeImmediate(){this.clip&&(this.clip.destroy(),this.clip=null)},destroy(){this.clip&&this.clip.destroy(),this._items.forEach(e=>{e.zIndex=0})}}},{72:72,95:95}],119:[function(e,t,s){"use strict";t.exports={beforeCreate(){Object.defineProperties(this,{currentItem:{configurable:!0,get:()=>this._items[this.wrappedIndex(this.itemIndex.current)]}})},wrappedIndex(e){return(e%=this._items.length)<0?this._items.length+e:e},getItemForTrigger(e){return this._items.find(t=>t.id===e)}}},{}],120:[function(e,t,s){"use strict";t.exports={mounted(){const e={gallery:this,previous:null,current:this._items[this.wrappedIndex(this.itemIndex.current)],next:null};this.trigger(this.model.Events.ITEM_CHANGE_INITIATED,e),this.trigger(this.model.Events.ITEM_CHANGE_OCCURRED,e),this.trigger(this.model.Events.ITEM_CHANGE_COMPLETED,e)}}},{}],121:[function(e,t,s){"use strict";const i=["INPUT","SELECT","TEXTAREA"];t.exports={created(e){this.onKeyDown=this.onKeyDown.bind(this),this.inViewKeyframe=this.addDiscreteEvent({event:"Gallery: In View",start:"t - 100vh",end:"b + 100%",onEnter:()=>window.addEventListener("keydown",this.onKeyDown),onExit:()=>window.removeEventListener("keydown",this.onKeyDown)}),Object.defineProperty(this,"isInView",{get:()=>this.inViewKeyframe.isCurrentlyInRange})},destroy(){this.inViewKeyframe.remove(),window.removeEventListener("keydown",this.onKeyDown)},onKeyDown(e){if(this.isInView&&!this.inputHasFocus()&&(37===e.keyCode||39===e.keyCode)){let t=this.model.IsRTL?-1:1,s=37===e.keyCode?-1:1;this.lastInteractionEvent=e;const i=this.itemIndex.current+s*t;this.animateToItem(i)}},inputHasFocus:function(){return-1!==i.indexOf(document.activeElement.nodeName)}}},{}],122:[function(e,t,s){"use strict";t.exports={beforeCreate(){document.body._animInfo&&(this.anim=document.body._animInfo.group.anim,this.model.pageMetrics=this.anim.model.pageMetrics)},addKeyframe(e){const t=e.el||this.el;return(e.group||this.anim).addKeyframe(t,e)},addDiscreteEvent(e){e.event=e.event||"Generic-Event-Name-"+tmpUUID++;let t=void 0!==e.end&&e.end!==e.start;const s=this.addKeyframe(e);return t?(e.onEnterOnce&&s.controller.once(e.event+":enter",e.onEnterOnce),e.onExitOnce&&s.controller.once(e.event+":exit",e.onExitOnce),e.onEnter&&s.controller.on(e.event+":enter",e.onEnter),e.onExit&&s.controller.on(e.event+":exit",e.onExit)):(e.onEventOnce&&s.controller.once(e.event,e.onEventOnce),e.onEventReverseOnce&&s.controller.once(e.event+":reverse",e.onEventReverseOnce),e.onEvent&&s.controller.on(e.event,e.onEvent),e.onEventReverse&&s.controller.on(e.event+":reverse",e.onEventReverse)),s},addRAFLoop(e){let t=["start","end"];if(!t.every(t=>e.hasOwnProperty(t)))return void console.log("BubbleGum.BaseComponent::addRAFLoop required options are missing: "+t.join(" "));const s=new RAFEmitter.create;s.on("update",e.onUpdate||noop),s.on("draw",e.onDraw||noop),s.on("draw",()=>s.run());const{onEnter:i,onExit:n}=e;return e.onEnter=()=>{s.run(),i&&i()},e.onExit=()=>{s.cancel(),n&&n()},this.addDiscreteEvent(e)},addContinuousEvent(e){e.onDraw||console.log("BubbleGum.BaseComponent::addContinuousEvent required option `onDraw` is missing. Consider using a regular keyframe if you do not need a callback"),e.event=e.event||"Generic-Event-Name-"+tmpUUID++;let t=this.addKeyframe(e);return t.controller.on(e.event,e.onDraw),t}}},{}],123:[function(e,t,s){"use strict";const i=(e,t)=>{t?e.removeAttribute("disabled"):e.setAttribute("disabled","true")};t.exports={mounted(){const e=this.el.querySelector(this.model.PaddleNav.Selector);this.paddleNav={previousEl:e.querySelector(".paddlenav-arrow-previous"),nextEl:e.querySelector(".paddlenav-arrow-next")},this.onPaddleNavSelected=this.onPaddleNavSelected.bind(this),[this.paddleNav.previousEl,this.paddleNav.nextEl].forEach(e=>{e.addEventListener("click",this.onPaddleNavSelected)})},destroy(){[this.paddleNav.previousEl,this.paddleNav.nextEl].forEach(e=>{e.removeEventListener("click",this.onPaddleNavSelected)}),this.paddleNav=null},onPaddleNavSelected(e){let t=e.target.className.includes("previous"),s=this.model.IsRTL?-1:1,i=t?-1:1;this.lastInteractionEvent=e;const n=this.itemIndex.current+i*s;this.animateToItem(n)},onItemChangeCompleted(e){let t=this.model.IsRTL?-1:1;const s=this.wrappedIndex(this.itemIndex.current+1*t)!==this.itemIndex.current;i(this.paddleNav.nextEl,s);const n=this.wrappedIndex(this.itemIndex.current+-1*t)!==this.itemIndex.current;i(this.paddleNav.previousEl,n)}}},{}],124:[function(e,t,s){"use strict";t.exports={onItemChangeOccurred(e){const{previous:t,current:s}=this.selections.occurred;t&&t!==s&&t.deselect(),s.select()}}},{}],125:[function(e,t,s){"use strict";const i=e(7),n=e(12),r=e(15).join(","),a=e=>e.forEach(n),o=e=>e.forEach(i);t.exports={itemsCreated(e){this._items.forEach((e,t)=>{let s=[e.el].concat(Array.from(e.el.querySelectorAll(r)));t===this.wrappedIndex(this.itemIndex.current)?a(s):o(s),e.accessibleElements=s})},onItemChangeCompleted(e){const{previous:t,current:s}=this.selections.completed;t&&t!==s&&o(t.accessibleElements),a(s.accessibleElements)}}},{12:12,15:15,7:7}],126:[function(e,t,s){"use strict";const i=e(95),n=e(72),r=e(57),a=e(53),o=e(51);t.exports={beforeCreate(){Object.defineProperties(this,{widthOfItem:{configurable:!0,get:()=>this._items[0].width}})},created(e){this.position=0,this.target=0,this.slideContainer=this.el.querySelector(this.model.Slide.Selector)},mounted(){r(()=>{this._items.forEach(e=>{e.measure(),e.x=e.width*e.index}),a(()=>{this.position=this.target=this.convertSlideIndexToHorizontalPosition(this.wrappedIndex(this.itemIndex.current)),this.slideContainer.style.transform="translate3d(".concat(-this.position,"px, 0,0)"),this.checkForSlideUpdate(!0)})})},animateToItem(e){const t=this.wrappedIndex(e);if(this.itemIndex.current===t)return;this.el.parentElement.scrollLeft=0;let s="easeInOutCubic",r=this.target;this.clip&&this.clip._isPlaying&&(r=this.clip.endPosition,this.clip.destroy(),s="easeOutQuint");const a=this.target,o=this.convertSlideIndexToHorizontalPosition(e),l=this.model.PrefersReducedMotion?.001:1,h=this._items[this.wrappedIndex(this.itemIndex.previous)],c=this._items[this.wrappedIndex(this.itemIndex.current)],u=this._items[this.wrappedIndex(e)];this.clip=new i(l,{ease:n[s],prepare:()=>this.trigger(this.model.Events.ITEM_CHANGE_INITIATED,{gallery:this,previous:h,current:c,next:u}),update:e=>{this.target=a+(o-a)*e},draw:()=>this.draw(1),finish:()=>this.trigger(this.model.Events.ITEM_CHANGE_COMPLETED,{gallery:this,previous:c,current:u})}),this.clip.endPosition=o,this.clip.play().then(()=>{this.clip.destroy(),this.clip=null})},draw(e=1){let t=this.target-this.position;this.position+=t*e;const s=Math.abs(this.position-this.target);s<.1&&(this.position=this.target),this.checkForSlideUpdate(),this.slideContainer.style.transform="translate3d(".concat(-this.position,"px, 0,0)");for(let e=0,t=this._items.length;e<t;e++){let t=this._items[e],s=(this.position-t.x)/this.widthOfItem;t.progress(s)}this.position,this.widthOfItem,this._items.length;Math.abs(s)>0&&(o(this.dragDrawId),a(()=>this.draw(e)))},checkForSlideUpdate(e){let t=Math.floor((this.position+.5*this.widthOfItem)/this.widthOfItem);if(t===this.itemIndex.current&&!e)return;let s=this.currentItem;this.itemIndex.previous=this.itemIndex.current,this.itemIndex.current=t,this.wrapSlideItems(),this.trigger(this.model.Events.ITEM_CHANGE_OCCURRED,{gallery:this,current:this.currentItem,previous:s})},wrapSlideItems(){this.currentItem.x=this.convertSlideIndexToHorizontalPosition(this.itemIndex.current),this.currentItem.prev.x=this.convertSlideIndexToHorizontalPosition(this.itemIndex.current-1),this.currentItem.next.x=this.convertSlideIndexToHorizontalPosition(this.itemIndex.current+1)},onResizeImmediate(){this.clip&&(this.clip.destroy(),this.clip=null),this._items.forEach(e=>{e.measure(),e.x=e.width*e.index}),this.itemIndex.current=this.wrappedIndex(this.currentItem.index),this.wrapSlideItems(),this.position=this.target=this.convertSlideIndexToHorizontalPosition(this.wrappedIndex(this.itemIndex.current)),this.slideContainer.style.transform="translate3d(".concat(-this.position,"px, 0,0)")},convertSlideIndexToHorizontalPosition(e){return e*this.widthOfItem},destroy(){this._items.forEach(e=>{e.measure(),e.x=0,e.zIndex=e===this.currentItem?2:0}),this.slideContainer.removeAttribute("style")}}},{51:51,53:53,57:57,72:72,95:95}],127:[function(e,t,s){"use strict";const i=e(53),n=e(51);t.exports={created(e){this.swipeDrag={movementRateMultiplier:this.model.SwipeDrag.movementRateMultiplier,velocityMultiplier:this.model.SwipeDrag.velocityMultiplier,dragDrawId:-1,waitingToReachTargetDrawId:-1,inputStart:{x:0,y:0},swipeVelocity:0,isDragging:!1},this._onStartDrag=this._onStartDrag.bind(this),this._onDrag=this._onDrag.bind(this),this._onStopDrag=this._onStopDrag.bind(this),this.waitingToReachTarget=this.waitingToReachTarget.bind(this)},mounted(){this.inputMoveEventName=this.model.IsTouch?"touchmove":"mousemove",this.inputUpEventName=this.model.IsTouch?"touchend":"mouseup",this.inputDownEvent=this.model.IsTouch?"touchstart":"mousedown",(this.model.IsTouch||this.model.SwipeDrag.DesktopSwipe)&&(this.el.removeEventListener(this.inputDownEvent,this._onStartDrag),this.el.addEventListener(this.inputDownEvent,this._onStartDrag))},_onStartDrag(e){switch(n(this.swipeDrag.dragDrawId),n(this.swipeDrag.waitingToReachTargetDrawId),!0){case"A"===e.target.tagName:case"BUTTON"===e.target.tagName:case!e.touches&&1!==e.which:return}this.clip&&this.clip.destroy(),this.lastInteractionEvent=e,this.swipeDrag.swipeVelocity=0,this.swipeDrag.isDragging=!1;const t=this.model.IsTouch?e.touches[0]:e;let{screenX:s,screenY:i}=t;this.swipeDrag.inputStart={x:s,y:i},window.addEventListener(this.inputMoveEventName,this._onDrag,{passive:!1}),window.addEventListener(this.inputUpEventName,this._onStopDrag)},_onDrag(e){this.swipeDrag.isDragging&&e.cancelable&&e.preventDefault();const t=this.model.IsTouch?e.touches[0]:e;let{screenX:s,screenY:r}=t,a=this.swipeDrag.inputStart.x-s,o=this.swipeDrag.inputStart.y-r;this.swipeDrag.inputStart={x:s,y:r},this.swipeDrag.isDragging||(this.swipeDrag.isDragging=Math.abs(a)>3&&Math.abs(a)>Math.abs(o)),this.swipeDrag.isDragging&&(this.target+=a*this.swipeDrag.movementRateMultiplier,this.swipeDrag.swipeVelocity=a*this.swipeDrag.velocityMultiplier,n(this.swipeDrag.dragDrawId),this.swipeDrag.dragDrawId=i(()=>this.draw(.3)))},_onStopDrag(e){if(window.removeEventListener(this.inputMoveEventName,this._onDrag),window.removeEventListener(this.inputUpEventName,this._onStopDrag),!this.swipeDrag.isDragging)return;let t=[this.itemIndex.current-1,this.itemIndex.current,this.itemIndex.current+1],s=0,r=Number.MAX_VALUE;for(let e=0,i=t.length;e<i;e++){let i=t[e]*this.widthOfItem,n=Math.abs(i-(this.position+this.swipeDrag.swipeVelocity));n<r&&(r=n,s=e)}this.lastInteractionEvent=e;const a=t[s];this.target=this.convertSlideIndexToHorizontalPosition(a),n(this.swipeDrag.dragDrawId),n(this.swipeDrag.waitingToReachTargetDrawId),this.swipeDrag.dragDrawId=i(()=>{this.draw(.2),this.waitingToReachTarget(a)})},waitingToReachTarget(e){if(Math.abs(this.position-this.target)>.1)return void(this.swipeDrag.waitingToReachTargetDrawId=i(()=>this.waitingToReachTarget(e)));const t=this._items[this.wrappedIndex(this.itemIndex.current)],s=this._items[this.wrappedIndex(this.itemIndex.previous)];this.trigger(this.model.Events.ITEM_CHANGE_COMPLETED,{gallery:this,previous:s,current:t})},destroy(){this.el.removeEventListener(this.inputDownEvent,this._onStartDrag),window.removeEventListener(this.inputUpEventName,this._onStopDrag),window.removeEventListener(this.inputUpEventName,this._onStopDrag)}}},{51:51,53:53}],128:[function(e,t,s){"use strict";t.exports={beforeCreate(){this.selections={initiated:{current:null,previous:null},occurred:{current:null,previous:null},completed:{current:null,previous:null}}},onItemChangeInitiated(e){this.selections.initiated.previous=e.previous=this.selections.initiated.current,this.selections.initiated.current=e.current},onItemChangeOccurred(e){this.selections.occurred.previous=e.previous=this.selections.occurred.current,this.selections.occurred.current=e.current},onItemChangeCompleted(e){this.selections.completed.previous=e.previous=this.selections.completed.current,this.selections.completed.current=e.current}}},{}],129:[function(e,t,s){"use strict";const i=e(41),n=e(148),r=e(152),a=e(155),o=e(141),l=e(132),h={endpoint:null,aliases:null,timeout:5,dummyPrices:!1};t.exports=class{constructor(e=[],t={}){this.ids=Array.isArray(e)?e:[e],this._originalIDs=[...this.ids],this.identifierToAliasMap={},this.options=this._processOptions(t),this.itemsWithDummyPrice=[],this.identifierParam=null}formatResponseItem(){throw new Error("not implemented")}getItemsFromResponse(){throw new Error("not implemented")}createDummyItem(){throw new Error("not implemented")}send(){return this._maybeForceError().then(()=>this._request()).then(e=>this._processResponse(e)).then(e=>this._createProductObjects(e)).catch(e=>this._handleError(e))}_createProductObjects(e){let t={};return Object.entries(e).forEach(([e,s])=>{let i=null,n=this.identifierToAliasMap[e]||[e];try{i=this.formatResponseItem(e,s)}catch(e){if("InvalidDataError"!==e.name)throw e}n.forEach(e=>{t[e]=i})}),Object.defineProperty(t,"aliases",{value:this.options.aliases}),r.group("%cResults from Apple Online Store","background-color:#27a33f;color:white;padding:2px 5px"),r.log(t),r.groupEnd(),r.enabled&&this.itemsWithDummyPrice.length&&(r.group("Dummy Prices"),r.warn("Using dummy prices for the following product identifiers: "+this.itemsWithDummyPrice.join(", ")),r.info("$777,777  The API service may require authentication and/or authorization. \n$888,888  The product identifer is currently unknown to the API service. \n$999,999  The product identifier is known to the API service, but the price has yet to be set. \n"),r.groupEnd()),new l(null,t)}_handleError(e){let t={};this.ids.forEach(e=>t[e]=null);let s=new l(e,t);if(!e)return s;if(!Object.keys(o).some(t=>e.name===t))throw e;if("UnexpectedError"===e.name&&this.options.dummyPrices){let t={};this._originalIDs.forEach(e=>{t[e]=this.createDummyItem(e),this.itemsWithDummyPrice.push(e)}),s=new l(e,t)}return e&&"function"==typeof e.showHint&&e.showHint(s.products),s}_maybeForceError(){return new Promise((e,t)=>{if(this.options.dummyPrices&&"undefined"!=typeof window&&window.location.search.indexOf("39f4f1f5-c4a1-4a7c-ab30-085335a11146")>-1){const e=i("39f4f1f5-c4a1-4a7c-ab30-085335a11146",null);t(e&&o[e]&&new o[e])}e()})}_processOptions(e){if(!(e=Object.assign({},h,e)).endpoint)throw new o.ConfigurationError({type:"endpoint"});const t=e.aliases?Object.entries(e.aliases):[];return t.length&&(this.identifierToAliasMap=t.reduce((e,[t,s])=>(e[s]=e[s]||[],e[s].push(t),e),{}),this.ids=this.ids.map(t=>e.aliases[t]||t)),e}_processResponse(e){let t=null,s=null;switch(parseInt(e.getResponseHeader("x-rewrite-status"),10)||e.status){case 404:throw new o.ServiceNotFoundError;case 503:throw new o.ServiceUnavailableError;case 400:throw new o.UnexpectedError;case 200:if(s=a(e.responseText),null!==s&&(t=this.getItemsFromResponse(s),t))return t;default:throw new o.InvalidDataError}}_request(){return new Promise((e,t)=>{const s=new XMLHttpRequest;s.withCredentials=!0,s.onloadend=e.bind(this,s),s.ontimeout=t.bind(this,new o.TimeoutError(this.options.timeout)),s.onerror=t.bind(this,new o.UnexpectedError),s.open("GET",n(this.options.endpoint,this.identifierParam,this.ids),!0),s.timeout=1e3*(this.options.timeout||0),s.send()})}}},{132:132,141:141,148:148,152:152,155:155,41:41}],130:[function(e,t,s){"use strict";const i=e(153),n=e(145),r=e(129);t.exports=class extends r{constructor(e,t){super(e,t),this.identifierParam="parts"}createDummyItem(e){return i(e,"unauthorized")}formatResponseItem(e,t){let s=null;return this.options.dummyPrices&&"UNKNOWN"===t.type&&(t=i(e,"unknown"),this.itemsWithDummyPrice.push(e)),s=new n(t),999999===s.price.value&&this.itemsWithDummyPrice.push(e),s}getItemsFromResponse(e){return e.items}}},{129:129,145:145,153:153}],131:[function(e,t,s){"use strict";const i=e(154),n=e(129),r=e(146);t.exports=class extends n{constructor(e,t){super(e,t),this.identifierParam="ids"}createDummyItem(e){return i(e,"unauthorized")}formatResponseItem(e,t){let s=null;return this.options.dummyPrices&&"UNKNOWN"===t.productName&&(t=i(e,"unknown"),this.itemsWithDummyPrice.push(e)),s=new r(t),999999===s.credit.value&&this.itemsWithDummyPrice.push(e),s}getItemsFromResponse(e){return e.ids}}},{129:129,146:146,154:154}],132:[function(e,t,s){"use strict";t.exports=class{constructor(e=null,t={}){this.error=e,this.products=t}}},{}],133:[function(e,t,s){"use strict";const i=e(142),n=e(143),r=e(151);t.exports=new class{getProductID(e,t){let s=[];return t.forEach(t=>{s.push(t.dataset["".concat(e,"Product")])}),[...new Set(s)]}setElements(e){const t=[...document.querySelectorAll("[data-".concat(e,"-product]"))];let s=Array.prototype.slice.call(t).filter(e=>"SCRIPT"!==e.tagName);this["".concat(e,"Elements")]=s}fetchProductInfo(e,t={}){let s,a;const o=this.getProductID(e,this["".concat(e,"Elements")]);return r(e).then(r=>{const l=Object.assign({},r,t);return"pricing"===e?a=i(o,t):"tradein"===e?a=n(o,t):s="API not supported",s||a.then(e=>({response:e,options:l}))})}getValueFromPath(e,t){return e.replace(/\s+/g,"").replace(/\$\{([\w\d.]+)\}/g,(e,s)=>s.split(".").reduce((e,t)=>e&&e[t]?e[t]:"",t))}handleError(e){e.textContent||(e.style.display="none")}trackDynamicPricingState(t){try{let s=e("@marcom/ac-analytics"),i={Success:"DP-S0",ConfigurationError:"DP-E1",ServiceNotFoundError:"DP-E2",ServiceUnavailableError:"DP-E3",TimeoutError:"DP-E4",InvalidDataError:"DP-E5",UnexpectedError:"DP-E6"}[t&&t.name||"Success"];s.passiveTracker({eVar100:i})}catch(e){}}loadPricingFromHTML(e){return new Promise(t=>{this.pricingElements=[],this.setElements("pricing"),this.fetchProductInfo("pricing",e).then(({response:e,options:s})=>{this.trackDynamicPricingState(e.error),this.pricingElements.forEach(i=>{let n;if(!e.error||s.dummyPrices){const t=i.dataset.pricingProduct;let s=e.products[t];const r=(i.dataset.productTemplate||"").replace(/\$\{\s*([\w\d.]+)\s*\}/g,e=>{const t=this.getValueFromPath(e,s);return t||(n=!0),t});s&&!n?(i.textContent=r,i.dataset.pricingLoaded="",i.parentElement.classList.add("has-dynamic-content")):this.handleError(i)}else this.handleError(i);t(e.error)})}).catch(e=>{throw e})})}loadTradeInFromHTML(e){return new Promise(t=>{this.tradeinElements=[],this.setElements("tradein"),this.fetchProductInfo("tradein",e).then(({response:e,options:s})=>{this.trackDynamicPricingState(e.error),this.tradeinElements.forEach(i=>{let n;if(!e.error||s.dummyPrices){const t=i.dataset.tradeinProduct;let s=e.products[t];const r=(i.dataset.productTemplate||"").replace(/\$\{\s*([\w\d.]+)\s*\}/g,e=>{const t=this.getValueFromPath(e,s);return t||(n=!0),t});s&&!n?(i.textContent=r,i.dataset.pricingLoaded="",i.parentElement.classList.add("has-dynamic-content")):this.handleError(i)}else this.handleError(i);t(e.error)})}).catch(e=>{throw e})})}}},{142:142,143:143,151:151,undefined:void 0}],134:[function(e,t,s){"use strict";t.exports={mockPrices:{unauthorized:777777,unknown:888888}}},{}],135:[function(e,t,s){"use strict";const i=e(152);t.exports=class extends Error{constructor(e={}){let t;"endpoint"===e.type&&(t="Failed to fetch product prices: The API service endpoint was not specified."),super(t),this.name="ConfigurationError",this.type=e.type}showHint(){"endpoint"===this.type&&(i.warn(this.message+" This may be expected if this page's locale doesn't have an Apple Online Store."),i.info('If prices are expected for this locale, check that the API service endpoint is specified in HTML with %c<link rel="ac:pricing-endpoint" href="/path/to/endpoint">%c or the "fetchProducts" function\'s "endpoint" option.',"font-family:monospace",""))}}},{152:152}],136:[function(e,t,s){"use strict";const i=e(152);t.exports=class extends Error{constructor(e){super(e||"Failed to fetch product price: The API service responded with an unexpected data format."),this.name="InvalidDataError"}showHint(){i.warn(this.message)}}},{152:152}],137:[function(e,t,s){"use strict";const i=e(152);t.exports=class extends Error{constructor(){super("Failed to fetch product prices: The API service responded with a status of 404 (Not Found)."),this.name="ServiceNotFoundError"}showHint(){i.warn(this.message),i.info('Check the "href" value of the %c<link rel="ac:pricing-endpoint">%c tag or the "fetchProducts" function\'s "endpoint" option, if specified.',"font-family:monospace","")}}},{152:152}],138:[function(e,t,s){"use strict";const i=e(152);t.exports=class extends Error{constructor(){super("Failed to fetch product prices: The Apple Online Store is temporarily unavailable."),this.name="ServiceUnavailableError"}showHint(){i.warn(this.message)}}},{152:152}],139:[function(e,t,s){"use strict";const i=e(152);t.exports=class extends Error{constructor(e){super("Failed to fetch product prices: The API service did not respond within "+e+" seconds, so the request was aborted."),this.name="TimeoutError",this.timeoutValue=e}showHint(){i.warn(this.message)}}},{152:152}],140:[function(e,t,s){"use strict";const i=e(152);t.exports=class extends Error{constructor(){super("Failed to fetch prices: An unexpected error occured."),this.name="UnexpectedError"}showHint(){i.warn(this.message),i.info("The API service endpoint may require authentication and/or authorization.")}}},{152:152}],141:[function(e,t,s){"use strict";t.exports={ConfigurationError:e(135),ServiceNotFoundError:e(137),ServiceUnavailableError:e(138),TimeoutError:e(139),InvalidDataError:e(136),UnexpectedError:e(140)}},{135:135,136:136,137:137,138:138,139:139,140:140}],142:[function(e,t,s){"use strict";const i=e(151),n=e(132),r=e(130);t.exports=function(e=[],t={}){if(!e.length){const e=new n;return Promise.resolve(e)}return i("pricing").then(s=>{const i=Object.assign({},s,t);return new r(e,i).send()})}},{130:130,132:132,151:151}],143:[function(e,t,s){"use strict";const i=e(151),n=e(132),r=e(131);t.exports=function(e=[],t={}){if(!e.length){const e=new n;return Promise.resolve(e)}return i("tradein").then(s=>{const i=Object.assign({},s,t);return new r(e,i).send()})}},{131:131,132:132,151:151}],144:[function(e,t,s){"use strict";t.exports=Object.assign({applyPrices:e(133),fetchProducts:e(142),fetchTradeIns:e(143),Product:e(145),TradeIn:e(146)},e(141))},{133:133,141:141,142:142,143:143,145:145,146:146}],145:[function(e,t,s){"use strict";const i=e(150),n=e(156),r=e(136),a=e=>({id:e.isString,name:e.isString,type:e=>["WUIP","PART"].includes(e),price:e.isObject,"price.value":e.isNumber,"price.display":e.isObject,"price.display.disclaimer":e.isOptionalString,"price.display.legal":e.isOptionalString,"price.display.actual":e.isString,"price.display.monthlyFrom":e.isOptionalString,"price.display.smart":e.isString,"price.display.from":(e,t)=>"WUIP"===t.type?"string"==typeof e:void 0===e,tradeIn:e=>void 0===e||n(e,e=>({id:e.isString,productName:e.isString,credit:e.isObject,"credit.value":e.isNumber,"credit.display":e.isObject,"credit.display.actual":e.isString,"credit.display.smart":e.isString,"credit.display.upto":e.isString,priceWithCreditApplied:e.isObject,"priceWithCreditApplied.value":e.isNumber,"priceWithCreditApplied.display.actual":e.isString,"priceWithCreditApplied.display.disclaimer":e.isOptionalString,"priceWithCreditApplied.display.from":e.isString,"priceWithCreditApplied.display.monthlyFrom":e.isOptionalString,"priceWithCreditApplied.display.smart":e.isString}))});class o{constructor(e){if(!o.validate(e))throw new r("Could not create Product, because the given JSON contains invalid data.");i(this,e)}get isWUIP(){return"WUIP"===this.type}get isPart(){return"PART"===this.type}static validate(e){return n(e,a)}}t.exports=o},{136:136,150:150,156:156}],146:[function(e,t,s){"use strict";const i=e(150),n=e(156),r=e(136),a=e=>({id:e.isString,productName:e.isString,credit:e.isObject,"credit.value":e.isNumber,"credit.display":e.isObject,"credit.display.actual":e.isString,"credit.display.smart":e.isString,"credit.display.upto":e.isString});class o{constructor(e){if(!o.validate(e))throw new r("Could not create TradeIn, because the given JSON contains invalid data.");i(this,e)}static validate(e){return n(e,a)}}t.exports=o},{136:136,150:150,156:156}],147:[function(e,t,s){"use strict";t.exports=function(e=[]){return Array.isArray(e)||(e=[e]),e.filter(e=>"string"==typeof e).map(e=>encodeURIComponent(String(e).trim())).join(",")}},{}],148:[function(e,t,s){"use strict";const i=e(147),n=/\?(.+)/,r=/(#.*)/;t.exports=function(e,t,s=[]){let a=((e=e.replace(r,"")).match(n)||[])[1],o=e;return s.length&&(o+=a?"&":"?",o+="".concat(t,"=").concat(i(s))),o}},{147:147}],149:[function(e,t,s){"use strict";t.exports=function(e,t){const s=e%1==0?0:2;return e>9999?e.toLocaleString(t,{minimumFractionDigits:s,maximumFractionDigits:s}):e.toFixed(s)}},{}],150:[function(e,t,s){"use strict";t.exports=function(e,t){Object.entries(t).forEach(([t,s])=>{e[t]||Object.defineProperty(e,t,{enumerable:!0,value:"object"==typeof s?Object.freeze(JSON.parse(JSON.stringify(s))):s})})}},{}],151:[function(e,t,s){"use strict";const i=e(57);t.exports=function(e){return new Promise((function(t){"undefined"!=typeof window&&window.document?i((function(){let s={};const i=document.querySelector('link[rel="ac:'.concat(e,'-endpoint"]'));i&&(s.endpoint=(i.getAttribute("href")||"").trim());document.querySelectorAll('meta[name="ac:'.concat(e,'-alias"]')).forEach(e=>{const[t,i]=(e.getAttribute("content")||"").split("=");t&&i&&(s.aliases=s.aliases||{},s.aliases[t]=i)});const n=document.querySelector('meta[name="ac:pricing-dummy"]');n&&(s.dummyPrices="true"===(n.getAttribute("content")||"").trim()),t(s)})):t({})}))}},{57:57}],152:[function(e,t,s){"use strict";const i=e(18),n="[ @marcom/pricing ]",r=Object.keys(i);let a=!1;for(var o=0,l=r.length;o<l;o++){const e=r[o],s="function"==typeof i[e]?i[e]:null;s&&(t.exports[e]=function(){const t=Array.prototype.slice.call(arguments);a||"string"!=typeof t[0]||(t[0]="".concat(n," ").concat(t[0])),"group"!==e&&"groupCollapsed"!==e||(a=!0),"groupEnd"===e&&(a=!1),s.apply(i,t)})}t.exports.enabled=i.enabled},{18:18}],153:[function(e,t,s){"use strict";const{mockPrices:i}=e(134),n=e(149);t.exports=function(e,t,s="en"){const r=parseFloat(i[t]||t||0),a=n(r,s);return{id:e,name:"",type:"WUIP",price:{value:r,display:{actual:"$"+Number(r).toLocaleString(s,{minimumFractionDigits:2}),smart:"$"+a,from:"From $"+a}}}}},{134:134,149:149}],154:[function(e,t,s){"use strict";const{mockPrices:i}=e(134),n=e(149);t.exports=function(e,t,s="en"){const r=parseFloat(i[t]||t||0),a=n(r,s);return{id:e,productName:"",credit:{value:r,display:{actual:"$"+Number(r).toLocaleString(s,{minimumFractionDigits:2}),smart:"$"+a,from:"From $"+a,upto:"Up to $"+a}}}}},{134:134,149:149}],155:[function(e,t,s){"use strict";t.exports=function(e){try{return JSON.parse(e)}catch(e){return null}}},{}],156:[function(e,t,s){"use strict";const i={isString:e=>"string"==typeof e,isOptionalString:e=>!e||"string"==typeof e,isNumber:e=>"number"==typeof e,isObject:e=>"[object Object]"===Object.prototype.toString.call(e)};function n(e,t){return t.split(".").reduce((e,t)=>e&&e[t],e)}t.exports=function(e,t){"function"==typeof t&&(t=t(i));const s=Object.entries(t);for(var r=0,a=s.length;r<a;r++){const[t,i]=s[r],a=t.indexOf(".")>-1?n(e,t):e[t];if(!0!==i.call(e,a,e))return!1}return!0}},{}],157:[function(e,t,s){"use strict";t.exports={lerp:function(e,t,s){return t+(s-t)*e},map:function(e,t,s,i,n){return i+(n-i)*(e-t)/(s-t)},mapClamp:function(e,t,s,i,n){var r=i+(n-i)*(e-t)/(s-t);return Math.max(i,Math.min(n,r))},norm:function(e,t,s){return(e-t)/(s-t)},clamp:function(e,t,s){return Math.max(t,Math.min(s,e))},randFloat:function(e,t){return Math.random()*(t-e)+e},randInt:function(e,t){return Math.floor(Math.random()*(t-e)+e)}}},{}],158:[function(e,t,s){"use strict";t.exports={browser:{safari:!1,chrome:!1,firefox:!1,ie:!1,opera:!1,android:!1,edge:!1,version:{string:"",major:0,minor:0,patch:0,documentMode:!1}},os:{osx:!1,ios:!1,android:!1,windows:!1,linux:!1,fireos:!1,chromeos:!1,version:{string:"",major:0,minor:0,patch:0}}}},{}],159:[function(e,t,s){"use strict";t.exports={browser:[{name:"edge",userAgent:"Edge",version:["rv","Edge"],test:function(e){return e.ua.indexOf("Edge")>-1||"Mozilla/5.0 (Windows NT 10.0; Win64; x64)"===e.ua}},{name:"chrome",userAgent:"Chrome"},{name:"firefox",test:function(e){return e.ua.indexOf("Firefox")>-1&&-1===e.ua.indexOf("Opera")},version:"Firefox"},{name:"android",userAgent:"Android"},{name:"safari",test:function(e){return e.ua.indexOf("Safari")>-1&&e.vendor.indexOf("Apple")>-1},version:"Version"},{name:"ie",test:function(e){return e.ua.indexOf("IE")>-1||e.ua.indexOf("Trident")>-1},version:["MSIE","rv"],parseDocumentMode:function(){var e=!1;return document.documentMode&&(e=parseInt(document.documentMode,10)),e}},{name:"opera",userAgent:"Opera",version:["Version","Opera"]}],os:[{name:"windows",test:function(e){return e.ua.indexOf("Windows")>-1},version:"Windows NT"},{name:"osx",userAgent:"Mac",test:function(e){return e.ua.indexOf("Macintosh")>-1}},{name:"ios",test:function(e){return e.ua.indexOf("iPhone")>-1||e.ua.indexOf("iPad")>-1},version:["iPhone OS","CPU OS"]},{name:"linux",userAgent:"Linux",test:function(e){return(e.ua.indexOf("Linux")>-1||e.platform.indexOf("Linux")>-1)&&-1===e.ua.indexOf("Android")}},{name:"fireos",test:function(e){return e.ua.indexOf("Firefox")>-1&&e.ua.indexOf("Mobile")>-1},version:"rv"},{name:"android",userAgent:"Android",test:function(e){return e.ua.indexOf("Android")>-1}},{name:"chromeos",userAgent:"CrOS"}]}},{}],160:[function(e,t,s){"use strict";var i=e(158),n=e(159);function r(e,t){if("function"==typeof e.parseVersion)return e.parseVersion(t);var s,i=e.version||e.userAgent;"string"==typeof i&&(i=[i]);for(var n,r=i.length,a=0;a<r;a++)if((n=t.match((s=i[a],new RegExp(s+"[a-zA-Z\\s/:]+([0-9_.]+)","i"))))&&n.length>1)return n[1].replace(/_/g,".");return!1}function a(e,t,s){for(var i,n,a=e.length,o=0;o<a;o++)if("function"==typeof e[o].test?!0===e[o].test(s)&&(i=e[o].name):s.ua.indexOf(e[o].userAgent)>-1&&(i=e[o].name),i){if(t[i]=!0,"string"==typeof(n=r(e[o],s.ua))){var l=n.split(".");t.version.string=n,l&&l.length>0&&(t.version.major=parseInt(l[0]||0),t.version.minor=parseInt(l[1]||0),t.version.patch=parseInt(l[2]||0))}else"edge"===i&&(t.version.string="12.0.0",t.version.major="12",t.version.minor="0",t.version.patch="0");return"function"==typeof e[o].parseDocumentMode&&(t.version.documentMode=e[o].parseDocumentMode()),t}return t}t.exports=function(e){var t={};return t.browser=a(n.browser,i.browser,e),t.os=a(n.os,i.os,e),t}},{158:158,159:159}],161:[function(e,t,s){"use strict";var i={ua:window.navigator.userAgent,platform:window.navigator.platform,vendor:window.navigator.vendor};t.exports=e(160)(i)},{160:160}],162:[function(e,t,s){"use strict";const i=e(63),n=e(25),r=e(31),a={requestMethod:"GET",timeout:3e4};Object.freeze(a);const o={response:null,xhr:null};Object.freeze(o);const l={evt:null,xhr:null};Object.freeze(l);t.exports=class{static get IS_SUPPORTED(){const e=window.XMLHttpRequest,t=window.Promise;return e&&"function"==typeof e&&(t&&"function"==typeof t)}static isCORSRequest(e){return window.location.hostname!==i(e).hostname}constructor(e,t){e||"string"==typeof e?(this._src=i(e).href,this._opts=Object.assign({},a,t),this._xhr=new XMLHttpRequest,this._promise=null,this._metrics={progress:0,totalAssetSize:null,time:{requested:null,load:{start:null,end:null,total:null}}},this._onLoadStart=this._onLoadStart.bind(this),this._onProgress=this._onProgress.bind(this),this._rejectData=this._rejectData.bind(this)):n("createXhr(src, opts), a src is required to create an XMLHttpRequest")}get xhr(){return this._xhr}get requestUrl(){return this._src}get progress(){return this._metrics.progress}get totalAssetSize(){return this._metrics.totalAssetSize}get requestedAtTime(){return this._metrics.time.requested}get loadStartTime(){return this._metrics.time.load.start}get loadEndTime(){return this._metrics.time.load.end}get totalLoadTime(){return this._metrics.time.load.total}open(){0===this._xhr.readyState&&(this._xhr.open(this._opts.requestMethod,this._src,!0,this._opts.user,this._opts.password),this._setXhrProps(),r("XmlHttpRequest opened and properties set"))}send(e){return e=void 0===e?null:e,this._promise?this._promise:this._promise=new Promise((t,s)=>{this._xhr.onprogress=this._onProgress,this._xhr.onloadstart=this._onLoadStart,this._xhr.onload=e=>this._onLoad(t,s,e),this._xhr.ontimeout=e=>this._rejectData(s,e),this._xhr.onerror=e=>this._rejectData(s,e),this._xhr.onabort=e=>this._rejectData(s,e),this._metrics.time.requested=Date.now(),this._xhr.send(e),r("XmlHttpRequest sent")})}destroy(){return 4!==this._xhr.readyState&&this._xhr.abort(),this._promise=this._promise||Promise.resolve(),this._promise.then(()=>{this._nullifyConstructorProps()},()=>{this._nullifyConstructorProps()}).then(()=>Promise.resolve())}_nullifyConstructorProps(){this._src=null,this._metrics={progress:null,totalAssetSize:null,time:{requested:null,load:{start:null,end:null,total:null}}}}_calcTotalLoadTime(){this._metrics.time.load.end=Date.now(),this._metrics.time.load.total=this._metrics.time.load.end-this._metrics.time.load.start}_setXhrProps(){Object.keys(this._opts).forEach(e=>{e in this._xhr&&"function"!=typeof this._xhr[e]&&(this._xhr[e]=this._opts[e])})}_onLoadStart(){this._metrics.time.load.start=Date.now(),this._metrics.progress=0,r("XmlHttpRequest loading")}_onLoad(e,t,s){if(200!==this._xhr.status)return this._rejectData(t,s);this._calcTotalLoadTime();const i=Object.assign({},o,{response:this._xhr.response,xhr:this._xhr});return r("XmlHttpRequest loaded"),e(i)}_onProgress(e){this._metrics.totalAssetSize||(this._metrics.totalAssetSize=e.total),this._metrics.progress=e.total?e.loaded/e.total:0}_rejectData(e,t){const s=Object.assign({},l,{evt:t,xhr:this._xhr});return n("XhrRequest failed due to",s),e(s)}}},{25:25,31:31,63:63}],163:[function(e,t,s){"use strict";t.exports=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},{}],164:[function(e,t,s){"use strict";t.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],165:[function(e,t,s){"use strict";t.exports=function(e,t){var s=t[0],i=t[1],n=t[2],r=t[3],a=t[4],o=t[5],l=t[6],h=t[7],c=t[8],u=t[9],d=t[10],m=t[11],p=t[12],f=t[13],g=t[14],_=t[15],v=s*o-i*a,y=s*l-n*a,b=s*h-r*a,E=i*l-n*o,w=i*h-r*o,x=n*h-r*l,I=c*f-u*p,S=c*g-d*p,A=c*_-m*p,T=u*g-d*f,P=u*_-m*f,C=d*_-m*g,O=v*C-y*P+b*T+E*A-w*S+x*I;if(!O)return null;return O=1/O,e[0]=(o*C-l*P+h*T)*O,e[1]=(n*P-i*C-r*T)*O,e[2]=(f*x-g*w+_*E)*O,e[3]=(d*w-u*x-m*E)*O,e[4]=(l*A-a*C-h*S)*O,e[5]=(s*C-n*A+r*S)*O,e[6]=(g*b-p*x-_*y)*O,e[7]=(c*x-d*b+m*y)*O,e[8]=(a*P-o*A+h*I)*O,e[9]=(i*A-s*P-r*I)*O,e[10]=(p*w-f*b+_*v)*O,e[11]=(u*b-c*w-m*v)*O,e[12]=(o*S-a*T-l*I)*O,e[13]=(s*T-i*S+n*I)*O,e[14]=(f*y-p*E-g*v)*O,e[15]=(c*E-u*y+d*v)*O,e}},{}],166:[function(e,t,s){"use strict";t.exports=function(e,t,s){var i=Math.sin(s),n=Math.cos(s),r=t[4],a=t[5],o=t[6],l=t[7],h=t[8],c=t[9],u=t[10],d=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[4]=r*n+h*i,e[5]=a*n+c*i,e[6]=o*n+u*i,e[7]=l*n+d*i,e[8]=h*n-r*i,e[9]=c*n-a*i,e[10]=u*n-o*i,e[11]=d*n-l*i,e}},{}],167:[function(e,t,s){"use strict";t.exports=function(e,t,s){var i=Math.sin(s),n=Math.cos(s),r=t[0],a=t[1],o=t[2],l=t[3],h=t[8],c=t[9],u=t[10],d=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=r*n-h*i,e[1]=a*n-c*i,e[2]=o*n-u*i,e[3]=l*n-d*i,e[8]=r*i+h*n,e[9]=a*i+c*n,e[10]=o*i+u*n,e[11]=l*i+d*n,e}},{}],168:[function(e,t,s){"use strict";t.exports=function(e,t,s){var i=Math.sin(s),n=Math.cos(s),r=t[0],a=t[1],o=t[2],l=t[3],h=t[4],c=t[5],u=t[6],d=t[7];t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=r*n+h*i,e[1]=a*n+c*i,e[2]=o*n+u*i,e[3]=l*n+d*i,e[4]=h*n-r*i,e[5]=c*n-a*i,e[6]=u*n-o*i,e[7]=d*n-l*i,e}},{}],169:[function(e,t,s){"use strict";t.exports=function(e,t,s){var i=s[0],n=s[1],r=s[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],170:[function(e,t,s){"use strict";t.exports=function(e,t){if(e===t){var s=t[1],i=t[2],n=t[3],r=t[6],a=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=s,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=r,e[11]=t[14],e[12]=n,e[13]=a,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}},{}],171:[function(e,t,s){"use strict";t.exports=function(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},{}],172:[function(e,t,s){"use strict";t.exports=function(e,t,s){var i=t[0],n=t[1],r=t[2],a=s[0],o=s[1],l=s[2];return e[0]=n*l-r*o,e[1]=r*a-i*l,e[2]=i*o-n*a,e}},{}],173:[function(e,t,s){"use strict";t.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}},{}],174:[function(e,t,s){"use strict";t.exports=function(e,t,s){var i=new Float32Array(3);return i[0]=e,i[1]=t,i[2]=s,i}},{}],175:[function(e,t,s){"use strict";t.exports=function(e){var t=e[0],s=e[1],i=e[2];return Math.sqrt(t*t+s*s+i*i)}},{}],176:[function(e,t,s){"use strict";t.exports=function(e,t){var s=t[0],i=t[1],n=t[2],r=s*s+i*i+n*n;r>0&&(r=1/Math.sqrt(r),e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r);return e}},{}],177:[function(e,t,s){"use strict";t.exports=function(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},{}],178:[function(e,t,s){"use strict";t.exports=function(e,t,s,i){var n=new Float32Array(4);return n[0]=e,n[1]=t,n[2]=s,n[3]=i,n}},{}],179:[function(e,t,s){"use strict";t.exports=function(e,t,s){var i=t[0],n=t[1],r=t[2],a=t[3];return e[0]=s[0]*i+s[4]*n+s[8]*r+s[12]*a,e[1]=s[1]*i+s[5]*n+s[9]*r+s[13]*a,e[2]=s[2]*i+s[6]*n+s[10]*r+s[14]*a,e[3]=s[3]*i+s[7]*n+s[11]*r+s[15]*a,e}},{}],180:[function(e,t,s){"use strict";const i=e(86),n=e(103);t.exports=class extends i{static IS_SUPPORTED(){return!n()&&!document.documentElement.classList.contains("ie")}constructor(e){super(e),this.elements={imagePurple:this.el.querySelector(".image-battery-purple"),imageGreen:this.el.querySelector(".image-battery-green"),imageYellow:this.el.querySelector(".image-battery-yellow"),imageWhite:this.el.querySelector(".image-battery-white"),imageBlack:this.el.querySelector(".image-battery-black"),imageRed:this.el.querySelector(".image-battery-red")},this.defaultAnchors=[this.el],this.start="t - 80vh",this.end="t - 35vh",this.initializeKeyframes()}initializeKeyframes(){[this.elements.imagePurple,this.elements.imageGreen,this.elements.imageYellow,this.elements.imageWhite,this.elements.imageBlack,this.elements.imageRed].forEach(e=>{this.addKeyframe({el:e,start:"t - 120vh",end:"b + 50vh",cssClass:"will-change"})}),this.colorKeyframe(this.elements.imagePurple,"purple"),this.colorKeyframe(this.elements.imageGreen,"green"),this.colorKeyframe(this.elements.imageYellow,"yellow"),this.colorKeyframe(this.elements.imageWhite,"white"),this.colorKeyframe(this.elements.imageBlack,"black"),this.colorKeyframe(this.elements.imageRed,"red")}colorKeyframe(e,t){this.addKeyframe({el:e,x:["css(--distance-"+t+")",0],easingFunction:"easeOutQuad"})}addKeyframe(e){(e=Object.assign({},{start:this.start,end:this.end},e)).anchors=[...this.defaultAnchors,...e.anchors||[]],super.addKeyframe(e)}}},{103:103,86:86}],181:[function(e,t,s){"use strict";const i=e(86),n=e(103);t.exports=class extends i{static IS_SUPPORTED(){return!n()}constructor(e){super(e),this.addKeyframe({anchors:[this.el.querySelector(".camera-lenses-iphone")],start:"a0t - 30vh",cssClass:"camera-lenses-show",toggle:!0,breakpointMask:"LM"}),[this.el.querySelector(".image-camera-lenses-iphone"),this.el.querySelector(".camera-lenses-housing")].forEach(e=>{const t={el:e,anchors:[this.el.querySelector(".camera-lenses-iphone")],start:"a0t - 100vh",end:"a0b"};this.addKeyframe(Object.assign({y:[100,-50],breakpointMask:"L"},t)),this.addKeyframe(Object.assign({y:[50,-50],breakpointMask:"M"},t)),e.style.willChange="transform"}),this.addKeyframe({el:this.el.querySelector(".image-camera-lenses-iphone"),start:"t - 100vh",end:"b",y:[50,-50],breakpointMask:"S"}),this.onBreakpointChange(this.pageMetrics)}onBreakpointChange(e){document.documentElement.classList.toggle("camera-lenses","S"!==e.breakpoint)}}},{103:103,86:86}],182:[function(e,t,s){"use strict";const i=e(111),n=e(121),r=e(117),a=e(123),o=e(127),l=e(114),h=e(126),c=e(118),u=e(124);let d;try{d=e("@marcom/ac-analytics")}catch(e){}const m=document.documentElement.classList.contains("reduced-motion"),p=(e,t)=>{let s;return function(){const i=()=>e.apply(this,arguments);clearTimeout(s),s=setTimeout(i,t)}},f={beforeCreate(){this.model.IsTouch=document.documentElement.classList.contains("touch"),this.model.PrefersReducedMotion=m,this.model.IsRTL="rtl"===document.documentElement.getAttribute("dir"),this.model.velocityMultiplier=12,this.dotnav=this.el.querySelector(".dotnav"),this.paddlenav=this.el.querySelector(".paddlenav-container"),this.paddlenavPrevious=this.paddlenav.querySelector(".paddlenav-arrow-previous"),this.paddlenavNext=this.paddlenav.querySelector(".paddlenav-arrow-next"),this.colornavItems=Array.from(this.el.querySelectorAll(".colornav-item")).map(e=>e.querySelector(".colornav-link"))},mounted(){this.setupColornav(),this.el.classList.add("mounted"),this.allColorDevices=this._items.reduce((e,t)=>e=e.concat(Array.from(t.el.querySelectorAll(".images-hardware-scaler"))),[]),this.anim.getGroupForTarget(this.el).addKeyframe(this.el,{start:"t - 100vh",end:"b + 100%",cssClass:"engaged",toggle:!0}),this.onBreakpointChange(this.model.pageMetrics)},setColor(e,t){t!==this.colornavSelected&&(d&&this.colornavSelected&&d.track({title:"colornav item ".concat(t),prop3:"color picker - ".concat(t," - finishes-gallery-slide-").concat(this.itemIndex.current)}),this.el.classList.remove("color-".concat(this.colornavSelected)),this.el.classList.add("color-".concat(t)),this.colornavSelected=t,this.setColorTabNav(e),this.setGalleryTheme())},setColorTabNav(e){this.allColorDevices.forEach(e=>{e.className.includes(this.colornavSelected)&&e.classList.remove("hide")}),e.classList.add("current"),e.setAttribute("aria-selected",!0),e.parentElement.querySelector("input[type=radio]").setAttribute("checked",!0),this.currentTabNav&&(this.currentTabNav.classList.remove("current"),this.currentTabNav.removeAttribute("aria-selected"),this.currentTabNav.parentElement.querySelector("input[type=radio]").removeAttribute("checked")),this.currentTabNav=e,this.colornavTimeout&&clearTimeout(this.colornavTimeout),this.colornavTimeout=setTimeout(()=>{this.allColorDevices.forEach(e=>{e.className.includes(this.colornavSelected)?e.classList.remove("hide"):e.classList.add("hide")}),clearTimeout(this.colornavTimeout)},600)},setupColornav(){this.colornav=this.el.querySelector(".colornav"),this.setColor=this.setColor.bind(this);const e=p(this.setColor,200);this.colornavItems.forEach((t,s)=>{t.addEventListener("click",t=>e(t.currentTarget,t.currentTarget.getAttribute("data-color-value"))),0===s&&e(t,t.getAttribute("data-color-value"));t.parentElement.querySelector(".colornav-value").addEventListener("change",t=>{const s=t.currentTarget.parentElement.querySelector(".colornav-link");e(s,t.currentTarget.value)})})},setGalleryTheme(){const e=this.wrappedIndex(this.itemIndex.current);e%this._items.length==1?this.el.classList.add("theme-dark"):3===e&&"black"===this.colornavSelected&&"S"!==this.model.pageMetrics.breakpoint?(this.dotnav.classList.add("theme-dark"),this.paddlenav.classList.add("theme-dark")):(this.el.classList.remove("theme-dark"),this.dotnav.classList.remove("theme-dark"),this.paddlenav.classList.remove("theme-dark"))},onItemChangeOccurred(){this.setGalleryTheme()},onBreakpointChange(e){this.setGalleryTheme()}},g=m?[c,{beforeCreate(){this.model.Item.ConstructorFunction=e(112),this.model.Item.Selector=".slide"}}]:[h,{beforeCreate(){this.model.Item.ConstructorFunction=e(183),this.model.Item.Selector=".slide",this.model.Slide.Selector=".finishes-gallery-container"}}];t.exports=i.withMixins(l,n,a,r,o,u,f,...g)},{111:111,112:112,114:114,117:117,118:118,121:121,123:123,124:124,126:126,127:127,183:183,undefined:void 0}],183:[function(e,t,s){"use strict";const i=e(112);t.exports=class extends i{constructor(e){super(e),this.figure=this.el.querySelector(".figure-container")}progress(e){Math.abs(e)<=1&&(this.figure.style.transform="translateX(".concat(80*-e,"%)"))}}},{112:112}],184:[function(e,t,s){"use strict";const i=e(86),n=e(66),r={update:e(57),draw:e(53)};let a,o;try{a=e("@marcom/ac-analytics")}catch(e){}function l(e){!o&&a&&a.passiveTracker&&(o=!0,a.passiveTracker({eVar70:e}))}document.documentElement.classList.contains("reduced-motion")&&l("hero-image-static");t.exports=class extends i{static IS_SUPPORTED(){return document.documentElement.classList.contains("hero-enhanced")}constructor(e){super(e),this.options=e,this.elements={globalNav:document.querySelector("#ac-globalnav"),video:this.el.querySelector("#hero-video"),startTitle:this.el.querySelector(".hero-title-start"),deviceContainer:this.el.querySelector(".device-container"),hardwareContainer:this.el.querySelector(".hardware-container"),hardwareWrapper:this.el.querySelector(".hardware-wrapper"),screen:this.el.querySelector(".hardware-container .screen"),stickyContainer:this.el.querySelector(".sticky-container"),endFrame:this.el.querySelector(".hardware-endframe"),heroContent:this.el.querySelector(".hero-content")}}mounted(){this.prepareAnimation()}getHeroMargins(){let e=this.options.pageMetrics.windowHeight,t=this.options.pageMetrics.windowWidth,s=this.elements.deviceContainer.getBoundingClientRect().width,i=this.elements.deviceContainer.getBoundingClientRect().height,n=this.elements.endFrame.getBoundingClientRect().height,r=Math.min((e-150)/i,(t-150)/s),a=-Math.round((this.options.pageMetrics.windowHeight-n*r)/2),o=this.options.pageMetrics.breakpoint;return a+="L"===o?106:"M"===o?146:122,a>0&&(a=0),a}setHeroMargins(){this.elements.heroContent.style.marginTop=this.getHeroMargins()+"px"}getScaleExpr(){let e=null;return e="S"===this.options.pageMetrics.breakpoint?"max(190vw/80w / css(--device-scale-expr, a1), 120vh/90h / css(--device-scale-expr, a1)) * css(--device-scale-expr)":"max(190vw/80w / css(--device-scale-expr, a1), 220vh/80h / css(--device-scale-expr, a1)) * css(--device-scale-expr)",e}onResizeDebounced(){this.setHeroMargins(),this.animationIsTriggered||this.scaleKeyframe.overwriteProps({scale:[this.getScaleExpr(),"css(--device-scale-expr)"]})}prepareAnimation(){this.gum.getComponentOfType("VideoViewportSource").hasPlayed=!0;let e=!1;this.elements.video.addEventListener("canplaythrough",t=>{e=!0}),this.elements.video.addEventListener("ended",e=>{this.elements.endFrame.classList.add("swap")}),this.scaleKeyframe=this.addKeyframe({el:this.elements.deviceContainer,start:"a0t",end:"a0t + 100vh",scale:[this.getScaleExpr(),"css(--device-scale-expr)"],anchors:[".sticky-container",this.elements.deviceContainer,this.elements.globalNav,this.elements.hardwareWrapper]});const t=this.addKeyframe({el:this.elements.deviceContainer,start:"a0t",end:"a0t + 100vh",y:["25a3h * max(190vw/80w / css(--device-scale-expr, a1), 220vh/100a3h / css(--device-scale-expr, a1)) * css(--device-scale-expr)"],breakpointMask:"LM",anchors:[".sticky-container",this.elements.deviceContainer,this.elements.globalNav,this.elements.hardwareWrapper]});this.addKeyframe({el:this.elements.deviceContainer,start:"a0t",end:"a0t + 100a1h",y:["50a1h",0],anchors:[".sticky-container",this.elements.globalNav]});let s=this.addKeyframe({el:this.elements.video,start:"a0t - 50vh",end:"a0t + 85vh",toggle:!0,cssClass:"extra-hidden",anchors:[".sticky-container"],disabledWhen:["no-hero-screen-fix"]});const i=n.getGroupForTarget(this.el);i.addKeyframe(this.elements.startTitle,{start:0,end:"a0b + 100vh",cssClass:"will-change",anchors:[".sticky-container"]}),i.addKeyframe(this.elements.startTitle,{start:0,end:"a0t + 50vh",scale:[.5,.3],opacity:[1,0],easeFunction:"easeOutCubic",anchors:[".sticky-container"]}),i.addKeyframe(this.elements.startTitle,{start:"a0t + 100vh",cssClass:"hide-title",anchors:[".sticky-container"],toggle:!1}),i.addKeyframe(this.elements.hardwareContainer,{start:"a0t + 100vh - 50px",end:"a0t + 100vh",anchors:[".sticky-container"],easeFunction:"easeInCubic",opacity:[1,0]}),this.addDiscreteEvent({group:i,el:this.elements.video,start:"a0t + 100vh",anchors:[".sticky-container"],onEventOnce:i=>{this.animationIsTriggered=!0,this.elements.video.currentTime=0,this.elements.heroContent.classList.add("show"),this.setHeroMargins(),e?(this.elements.video.play(),l("hero-image-enhanced")):(this.elements.video.classList.add("hide"),this.elements.endFrame.classList.add("show"),l("hero-image-static")),t.remove(),r.update(()=>{s&&s.remove()}),this.elements.hardwareContainer.style.visibility="hidden";const a=this.scaleKeyframe.jsonProps.scale[1];this.scaleKeyframe.overwriteProps({scale:[a,a]}),"ontouchstart"in document.documentElement||r.update(()=>{const e=2*this.elements.globalNav.getBoundingClientRect().height;r.draw(()=>{window.scrollTo(0,e),this.elements.stickyContainer.style.height="115vh",n.forceUpdate()},!0)},!0)}}),n.getGroupForTarget(this.el).rafEmitter.once("draw",()=>{this.elements.deviceContainer.style.visibility="visible"})}}},{53:53,57:57,66:66,86:86,undefined:void 0}],185:[function(e,t,s){"use strict";const i=e(188),n=e(57),r=e(53);t.exports=class extends i{static IS_SUPPORTED(){return window.CSSStyleDeclaration&&"setProperty"in CSSStyleDeclaration.prototype}constructor(e){super(e),this.headline&&this.headline.setAttribute("aria-hidden",!0),this._contentElement=this.el.querySelector(".inline-compare-panel"),this.transitioningElement=this._contentElement,this.scrim=this.el.querySelector(".inline-compare-scrim"),this.scrim.addEventListener("click",this.close,!0)}mounted(){this.cachePanelMetrics(),this.addKeyframe({el:this.openButton,anchors:[this.el.querySelector(".inline-compare-panel")],start:"b - 100vh + css(padding-bottom, a0)",cssClass:"show"})}onResizeImmediate(){this.cachePanelMetrics()}cachePanelMetrics(){return new Promise(e=>{n(()=>{let t=this._contentElement.clientWidth;this.buttonBottomOffset=parseFloat(window.getComputedStyle(this._contentElement).paddingBottom),r(()=>{const s=t?"".concat(t,"px"):null;document.documentElement.classList.add("inline-compare-prevent-transition"),document.documentElement.style.setProperty("--inline-compare-actual-width",s),r(()=>{document.documentElement.classList.remove("inline-compare-prevent-transition"),e()})})})})}}},{188:188,53:53,57:57}],186:[function(e,t,s){"use strict";const i=e(109);t.exports=class extends i{constructor(e){super(e,"/iphone-11/2019/dc09a167-9d96-4ea8-935e-14af260ac4b1/anim/")}}},{109:109}],187:[function(e,t,s){"use strict";const i=e(86),n=e(57),r=(e(53),document.querySelector("#ac-localnav")),a=document.querySelector("#ac-localeswitcher");t.exports=class extends i{IS_SUPPORTED(){return!!r}constructor(e){super(e),this.cacheTopOffset().then(e=>{this.keyframe=this.anim.addKeyframe(r,{anchors:[this.el],start:"a0t - ".concat(e,"px"),end:"a0b - 100%",cssClass:"ac-localnav-dark",toggle:!0})})}onResizeDebounced(){this.cacheTopOffset().then(e=>{this.keyframe.overwriteProps({start:"a0t - ".concat(e,"px")})})}cacheTopOffset(){return new Promise(e=>{n(()=>n(()=>{let t=r.clientHeight;a&&(t+=a.clientHeight),e(t)}))})}}},{53:53,57:57,86:86}],188:[function(e,t,s){"use strict";const i=e(86),n=e(57),r=e(53),a=e(2),o="inert"in HTMLElement.prototype,l=document.getElementById("modals")||function(){let e=document.createElement("div");return e.id="modals",document.body.appendChild(e),e}();class h{start(){}stop(){}destroy(){}}t.exports=class extends i{constructor(e){if(super(e),this.el.parentElement!==l&&l.appendChild(this.el),!this.el.id)throw new Error('Modal must have an "id".');this.classes={documentModalOpen:"modal-open"};const t=this.el.querySelector("h3"),s=document.createElement("h2");s.innerHTML=t.innerHTML,t.parentElement.replaceChild(s,t);for(let e=0;e<t.attributes.length;e++){const i=t.attributes[e];i.specified&&s.setAttribute(i.name,i.value)}var i;this.headline=s,this._opened=!1,this.transitioningElement=null,this.openButton=document.querySelector('button[data-modal-open="'.concat(this.el.id,'"]')),this.closeButtons=this.el.querySelectorAll("[data-modal-close]"),this.focusElement=this.el.querySelector("[data-modal-focus]")||this.el,this.focusElement.tabIndex=-1,this.focusElement.setAttribute("role","dialog"),this.backgroundElements=document.querySelectorAll("[data-modal-background]"),this.tab=o?new h:new a(this.focusElement,{firstFocusElement:this.focusElement}),this.open=this.open.bind(this),this.close=this.close.bind(this),this.openButton.addEventListener("click",this.open,!0),this.closeButtons.forEach(e=>{e.addEventListener("click",this.close,!0)}),this._handleEscapeKeyPress=(i=this.close,function(e){27===e.keyCode&&i()}),document.addEventListener("keydown",this._handleEscapeKeyPress,!0)}destroy(){this.openButton.removeEventListener("click",this.open),this.closeButtons.forEach(e=>e.addEventListener("click",this.close)),document.removeEventListener("keydown",this._handleEscapeKeyPress,!0),this.tab.destroy(),super.destroy()}open(e={}){return this._opened?Promise.resolve():(e instanceof Event&&(e={event:e}),this._openedFromElement=e.event&&e.event.target,this._opened=!0,this._openedFromElement.hasAttribute("data-modal-open")||(this._openedFromElement=this._openedFromElement.closest("[data-modal-open]")),new Promise((e,t)=>{r(()=>{this.tab.start(),this.updateDOM().then(()=>{this.focusElement.focus(),e()},t)})}))}close(){return this._opened?(this._opened=!1,new Promise((e,t)=>{r(()=>{this.tab.stop(),this.updateDOM().then(()=>{this._openedFromElement&&this._openedFromElement.focus(),this._openedFromElement=null,e()},t)})})):Promise.resolve()}lockScroll(){document.documentElement.style.overflow=this._opened?"hidden":null,document.documentElement.style.height=this._opened?"100%":null}updateDOM(){return new Promise(e=>{r(()=>{this.el.setAttribute("aria-modal",this._opened),this.el.setAttribute("aria-hidden",!this._opened),this.backgroundElements.forEach(e=>{e.setAttribute("aria-hidden",this._opened),e.toggleAttribute("inert",this._opened)}),this._opened&&this.el.querySelectorAll("[data-anim-lazy-image]").forEach(e=>{e.removeAttribute("data-anim-lazy-image")}),this.el.id&&(this._opened?document.documentElement.setAttribute("data-modal-opened",this.el.id):document.documentElement.removeAttribute("data-modal-opened"),this.transitioningElement&&(document.documentElement.setAttribute("data-modal-transitioning",this.el.id),this.transitioningElement.addEventListener("transitionend",e=>{e.target===this.transitioningElement&&document.documentElement.removeAttribute("data-modal-transitioning")}))),document.documentElement.classList.toggle(this.classes.documentModalOpen,this._opened),this.lockScroll(),n(()=>{e()})})})}}},{2:2,53:53,57:57,86:86}],189:[function(e,t,s){"use strict";const i=e(86),n=e(103),r=e(77),a=e(161);t.exports=class extends i{static IS_SUPPORTED(){return!n()&&!document.documentElement.classList.contains("ie")}constructor(e){super(e),this.elements={localnav:document.getElementById("ac-localnav"),heroImage:this.el.querySelector(".image-night-mode-hero"),headline:this.el.querySelector(".night-mode-headline"),stickyCopy:this.el.querySelector(".sticky-vo-headline"),comparisonContainer:this.el.querySelector(".night-mode-comparison"),offImage:this.el.querySelector(".image-night-mode-off"),onImage:this.el.querySelector(".image-night-mode-on")},Object.values(this.elements).forEach(e=>{e!==this.elements.localnav&&this.addKeyframe({el:e,start:"t - 120vh",end:"b + 50vh",cssClass:"will-change",toggle:!0})}),this.addKeyframe({el:this.elements.heroImage,anchors:[this.elements.headline,this.elements.localnav],start:"t - 80vh",end:"a0t + 50a0h - 50vh - a1h",opacity:[.001,.999]}),[this.elements.onImage,this.elements.offImage].forEach(e=>{this.addKeyframe({el:e,start:"t - 90vh",end:"t - 50vh",opacity:[.001,.999]})}),this.addKeyframe({el:this.elements.comparisonContainer,anchors:[this.elements.onImage],start:"b - 95vh",cssClass:"show-captions",toggle:!0}),this.elements.stickyCopy.addEventListener("focus",e=>{["mouse","touch"].includes(e.target.getAttribute("data-focus-method"))||this._voScroll()},!0)}_voScroll(){const e=r.parse("t",{target:this.elements.stickyCopy}),t=window.scrollTo.bind(null,0,e);a.browser.safari?setTimeout(t,100):t()}}},{103:103,161:161,77:77,86:86}],190:[function(e,t,s){"use strict";const i=e(86),n=e(53),r=window.matchMedia("(prefers-reduced-motion)");let a=r.matches,o=!1;function l(e){e&&e.reason&&"NotAllowedError"===e.reason.name&&0===e.reason.stack.indexOf("play")&&(o=!0)}window.addEventListener("unhandledrejection",l),window.addEventListener("rejectionhandled",l);class h extends i{constructor(e){if(super(e),e.data=e.data||{},this.loadingLabel=e.data.loadingLabel||this.el.dataset.loadingLabel,this.pauseLabel=e.data.pauseLabel||this.el.dataset.pauseLabel,this.playLabel=e.data.playLabel||this.el.dataset.playLabel,Object.defineProperty(this,"mediaElement",{get:()=>{},set:e=>{this.mediaElementDelegate&&this.mediaElementDelegate.destroy(),e instanceof HTMLMediaElement&&(this.mediaElementDelegate=new c(this,e))}}),this.el.dataset.for){const e=document.getElementById(this.el.dataset.for);this.mediaElement=e.querySelector("video")}this.analyticsClickTemplate=e.data.analyticsClickTemplate||this.el.dataset.analyticsClickTemplate,this.analyticsTitleTemplate=e.data.analyticsTitleTemplate||this.el.dataset.analyticsTitleTemplate,this._mediaStateWasPlaying=!1,this._appearanceInitialized=!1,this.mediaState=e.initialState||h.DefaultMediaState,this.remainARIAHidden=this.el.hasAttribute("data-always-aria-hidden"),this.onClick=this.onClick.bind(this),this.el.addEventListener("click",this.onClick,!1),r.addListener(e=>{a=e.matches,a&&this.mediaState===h.MediaState.Playing&&(this.mediaState=h.MediaState.Paused,this.trigger("pause"))})}destroy(){this.mediaElementDelegate.destroy(),this.mediaElementDelegate=null,this.el.removeEventListener("click",this.onClick)}get mediaState(){return this._mediaState}set mediaState(e){if("boolean"==typeof e||e||(e=h.MediaState.Loading),!h.validMediaStates.includes(e)){const e=h.validMediaStates.map(e=>"'".concat(e,"'")).join(", ");throw new Error("".concat(this.constructor.name," 'mediaState' must be one of: ").concat(e))}e===h.MediaState.Playing&&(a&&!this._mediaStateWasPlaying&&(e=h.MediaState.Paused,this.trigger("pause")),this._mediaStateWasPlaying=!0),this._mediaState=e,this.updateAppearance()}get ariaLabel(){switch(this.mediaState){case h.MediaState.Loading:return this.loadingLabel;case h.MediaState.Playing:return this.pauseLabel;case h.MediaState.Paused:return this.playLabel;default:return""}}onClick(){this.toggle(),this.mediaState===h.MediaState.Playing?(this.mediaElementDelegate&&this.mediaElementDelegate.onPlayControlActivated(),this.trigger("play")):this.mediaState===h.MediaState.Paused&&this.trigger("pause"),this.updateAppearance()}toggle(){this.mediaState===h.MediaState.Paused?this.mediaState=h.MediaState.Playing:this.mediaState===h.MediaState.Playing&&(this.mediaState=h.MediaState.Paused)}updateAppearance(){n(()=>{this._appearanceInitialized||this.remainARIAHidden||this.el.removeAttribute("aria-hidden");const e=this.mediaState===h.MediaState.Loading;this.el.disabled=e,this.el.setAttribute("aria-label",this.ariaLabel),this.el.classList.toggle("is-loading",e),this.el.classList.toggle("is-playing",this.mediaState===h.MediaState.Playing),this.el.classList.toggle("is-paused",this.mediaState===h.MediaState.Paused),this.setAnalyticsAttributes()})}setAnalyticsAttributes(){let e;if(this.mediaState===h.MediaState.Playing?e="pause":this.mediaState===h.MediaState.Paused&&(e="play"),!e)return this.el.removeAttribute("data-analytics-click"),void this.el.removeAttribute("data-analytics-title");this.el.setAttribute("data-analytics-click",this.analyticsClickTemplate.replace("{controlState}",e)),this.el.setAttribute("data-analytics-title",this.analyticsTitleTemplate.replace("{controlState}",e))}}h.MediaState=Object.freeze({Loading:"loading",Playing:"playing",Paused:"paused"}),h.validMediaStates=Object.freeze(Object.keys(h.MediaState).map(e=>h.MediaState[e]));class c{constructor(e,t){this.element=t,this.controls=e,this.lastUserInitiatedState=null,this.lastEventWasUserInteraction=!1,this.onMediaLoading=this.onMediaLoading.bind(this),this.onMediaPlay=this.onMediaPlay.bind(this),this.onMediaPause=this.onMediaPause.bind(this),this.onPlayControlActivated=this.onPlayControlActivated.bind(this),this.onPauseControlActivated=this.onPauseControlActivated.bind(this),this.element.addEventListener("emptied",this.onMediaLoading),this.element.addEventListener("waiting",this.onMediaLoading),this.element.addEventListener("canplay",this.onMediaPause),this.element.addEventListener("playing",this.onMediaPlay),this.element.addEventListener("pause",this.onMediaPause),this.controls.on("play",this.onPlayControlActivated),this.controls.on("pause",this.onPauseControlActivated),this.element.readyState>=3&&(this.element.paused?this.onMediaPause():this.onMediaPlay()),this.onMediaLoading()}onMediaLoading(){this.controls.mediaState=h.MediaState.Loading}onMediaPlay(){!this.lastEventWasUserInteraction&&("pause"===this.lastUserInitiatedState||o&&"play"!==this.lastUserInitiatedState)?this.element.pause():this.controls.mediaState=h.MediaState.Playing,this.lastEventWasUserInteraction=!1}onMediaPause(){this.controls.mediaState=h.MediaState.Paused,this.lastEventWasUserInteraction=!1}onPlayControlActivated(){this.lastEventWasUserInteraction=!0,this.lastUserInitiatedState="play",this.element.play()}onPauseControlActivated(){this.lastEventWasUserInteraction=!0,this.lastUserInitiatedState="pause",this.element.pause()}destroy(){this.element.removeEventListener("emptied",this.onMediaLoading),this.element.removeEventListener("waiting",this.onMediaLoading),this.element.removeEventListener("canplay",this.onMediaPause),this.element.removeEventListener("playing",this.onMediaPlay),this.element.removeEventListener("pause",this.onMediaPause),this.controls.off("play",this.onPlayControlActivated),this.controls.off("pause",this.onPauseControlActivated),this.element=null,this.controls=null}}t.exports=h},{53:53,86:86}],191:[function(e,t,s){"use strict";const i=e(103),n=e(111),r=e(121),a=e(127),o=e(123),l=e(117),h=e(126),c=e(114),u=e(124),d={beforeCreate(){this.model.IsTouch=document.documentElement.classList.contains("touch"),this.model.PrefersReducedMotion=i(),this.model.IsRTL="rtl"===document.documentElement.getAttribute("dir"),this.model.Item.ConstructorFunction=e(112),this.model.Item.Selector=".slide-gallery-item",this.model.Slide.Selector=".slide-gallery-items-container"},mounted(){this.anim.getGroupForTarget(this.el).addKeyframe(this.el,{start:"t - 100vh",end:"b + 100%",cssClass:"engaged",toggle:!0})}};t.exports=n.withMixins(d,o,l,r,a,c,u,h)},{103:103,111:111,112:112,114:114,117:117,121:121,123:123,124:124,126:126,127:127}],192:[function(e,t,s){"use strict";const i=e(86),n=e(53),r=(e=0)=>"a0t + ".concat(100-e,"vh");t.exports=class extends i{constructor(e){if(super(e),this.elements={videoContainer:this.el.querySelector(".inline-video-container"),phoneFrame:this.el.querySelector(".phone-frame"),scrim:this.el.querySelector(".scrim"),phone:this.el.querySelector(".phone-frame"),gallery:this.el.querySelector(".subsection-gallery"),segmentnav:this.el.querySelector(".segmentnav-container"),playbackControl:this.el.parentElement.querySelector(".playback-control-container:not(.visuallyhidden)"),hiddenPlaybackControl:this.el.parentElement.querySelector(".playback-control-container.visuallyhidden .playback-control")},this.elements.hiddenPlaybackControl){const e=this.elements.playbackControl.querySelector(".playback-control");this.elements.hiddenPlaybackControl.addEventListener("focus",()=>e.classList.add("has-focus")),this.elements.hiddenPlaybackControl.addEventListener("blur",()=>e.classList.remove("has-focus"))}}mounted(){const e=this.gum.getComponentOfType("InlineVideo",this.el);n(()=>{const{video:t,keyframeController:s}=e;s.getNearestKeyframeForAttribute("inline-video-play").remove();const i=".".concat(this.el.className);t.el&&t.el.removeAttribute("aria-label"),this.addDiscreteEvent({start:"a0t - 85vh",end:r(),event:"video-event",anchors:i,onEnter:()=>{t.el.setAttribute("loop",""),t.play()},onExit:()=>{t.el.removeAttribute("loop"),t.pause()}}),this.addKeyframe({el:this.el,start:"a0t - 100vh",end:"a0t + 35vh",cssClass:"show-scrim",toggle:!0,anchors:i}),this.addKeyframe({el:this.elements.scrim,start:"a0t + 35vh",end:"a0t + 45vh",opacity:[.5,0],anchors:i}),this.addKeyframe({el:this.elements.playbackControl,start:"a0t + 33vh",end:"a0t + 35vh",opacity:[1,0],anchors:i}),this.addKeyframe({el:this.elements.phoneFrame,start:"a0t + 35vh",end:"a0t + 90vh",scale:["max(105vw/85w, 105vh/85h)",1],anchors:i}),this.addKeyframe({el:this.elements.videoContainer,start:r(10),end:r(),scale:[null,1],opacity:[1,0],anchors:i}),this.addKeyframe({el:this.elements.segmentnav,start:r(),end:"a0b + 100vh",cssClass:"active",toggle:!0,anchors:i}),this.addKeyframe({el:this.elements.segmentnav,start:r(10),end:r(0),y:[40,0],opacity:[null,1],anchors:i})})}static IS_SUPPORTED(){return document.documentElement.classList.contains("video-edit-intro")}}},{53:53,86:86}],193:[function(e,t,s){"use strict";const i=e(3),n=e(14),r=e(17),a=e(57),o=e(53),l=e(161);t.exports={created(){this.segmentNav={items:[],current:null,roamingTabIndex:null,segments:new Map,segmentNavEl:this.el.querySelector(".segmentnav"),setCurrentItem(e){e!==this.segmentNav.current&&(this.segmentNav.current=e,this.selection=e,this._updateSelectionBackground(this.segmentNav.segments.get(this.selection)))},onRoamingTabIndexSelect(e){if(0===this.segmentNav.items.filter(t=>t===e.el).length)throw"Could not find segment nav item";this.lastInteractionEvent||(this.lastInteractionEvent=e),this.itemIndex.current!==e.index&&this.animateToItem(e.index)}},this.segmentNav.setCurrentItem=this.segmentNav.setCurrentItem.bind(this),this.segmentNav.onRoamingTabIndexSelect=this.segmentNav.onRoamingTabIndexSelect.bind(this)},itemsCreated(){this._items.forEach((e,t)=>{const s=this.segmentNav.segmentNavEl.querySelector("#".concat(e.id.replace("gallery-item","segment")));s.setAttribute("role",r.TAB),s.setAttribute(n.CONTROLS,e.id),s.setAttribute(n.SELECTED,!1),e.on("select",()=>{s.classList.add("current"),s.setAttribute(n.SELECTED,!0)}),e.on("deselect",()=>{s.classList.remove("current"),s.setAttribute(n.SELECTED,!1)}),s.addEventListener("click",t=>{t.preventDefault(),this.lastInteractionEvent=t;let s=this.itemIndex.current+(e.index-this.wrappedIndex(this.itemIndex.current));this.animateToItem(s)}),s.addEventListener("focus",e=>{["mouse","touch"].includes(e.target.getAttribute("data-focus-method"))||this._voScroll()},!0),this.segmentNav.items.push(s),e.el.setAttribute("role",r.TABPANEL),e.el.setAttribute(n.LABELLEDBY,this.segmentNav.items[t].id),this.segmentNav.segments.set(s,{width:s.offsetWidth,offset:s.offsetLeft})}),this.selection=this.segmentNav.segmentNavEl.querySelector('.segmentnav-item[aria-selected="true"]'),this.selectionBackground=document.createElement("div"),this.selectionBackground.classList.add("segmentnav-selection-background"),this.selectionBackground.setAttribute("role","presentation"),this.segmentNav.segmentNavEl.appendChild(this.selectionBackground),this._updateSelectionBackground(this.segmentNav.segments.get(this.selection))},mounted(){this.segmentNav.roamingTabIndex=new i(this.segmentNav.segmentNavEl,{selector:"button"}),this.segmentNav.roamingTabIndex.start(),this.segmentNav.roamingTabIndex.on("onSelect",this.segmentNav.onRoamingTabIndexSelect)},onItemChangeInitiated(e){e.next&&this._updateSegment(e.next.id,e.next.index)},onItemChangeOccurred(e){this._updateSegment(e.current.id,this.itemIndex.current)},_updateSegment(e,t){if(this.selection&&e===this.selection.id)return;let s=this.segmentNav.items.filter(t=>t.getAttribute("aria-controls")===e)[0];this.segmentNav.setCurrentItem(s),this.segmentNav.roamingTabIndex&&this.segmentNav.roamingTabIndex.setSelectedItemByIndex(t,!0)},_updateSelectionBackground(e){if(e)return new Promise((t,s)=>{try{a(()=>{const s=parseFloat(window.getComputedStyle(this.segmentNav.segmentNavEl).paddingLeft);o(()=>{this.selectionBackground.style.width="".concat(e.width,"px"),this.selectionBackground.style.transform="translateX(".concat(e.offset-s,"px)"),t()})})}catch(e){s(e)}})},_voScroll(){const e=this.anim.getGroupForTarget(this.el);let t=this.anim.getControllerForTarget(this.el).getNearestKeyframeForAttribute("Gallery: In View");const s=e.convertTValueToScrollPosition(t.start),i=window.scrollTo.bind(null,0,s);l.browser.safari?setTimeout(i,100):i()}}},{14:14,161:161,17:17,3:3,53:53,57:57}],194:[function(e,t,s){"use strict";t.exports={onItemChangeInitiated(e){if(!e.next)return;const{previous:t}=this.selections.initiated;t&&t!==e.next&&t.deselect(),e.next.select()}}},{}],195:[function(e,t,s){"use strict";const i=e(103),n=e(111),r=e(118),a=e(121),o=e(114),l=e(194),h=e(193),c={beforeCreate(){this.model.IsTouch=document.documentElement.classList.contains("touch"),this.model.PrefersReducedMotion=i(),this.model.IsRTL="rtl"===document.documentElement.getAttribute("dir"),this.model.Item.ConstructorFunction=e(112)},beforeMount(){if(this.inViewKeyframe){this.inViewKeyframe.remove();const e=this.el.parentElement.parentElement.parentElement;this.inViewKeyframe=this.addDiscreteEvent({event:"Gallery: In View",start:"a0b - 90vh",end:"a0b + 100%",anchors:".".concat(e.className),onEnter:()=>window.addEventListener("keydown",this.onKeyDown),onExit:()=>window.removeEventListener("keydown",this.onKeyDown)})}}};t.exports=n.withMixins(c,a,o,l,r,h)},{103:103,111:111,112:112,114:114,118:118,121:121,193:193,194:194}],196:[function(e,t,s){"use strict";const i=e(86),n=window.matchMedia("only screen and (min-width: 1441px)");t.exports=class extends i{constructor(e){super(e),this.video=this.el,this.sources={},Object.entries(this.video.dataset).filter(([e])=>e.includes("src")).forEach(([e,t])=>{const s=e.replace(/^src/,"").toLowerCase();this.sources[s]=t}),this.onBreakpointChange=this.onBreakpointChange.bind(this),this._currentViewport=null,this.previousSource=null,this.hasPlayed=!1}mounted(){n.addListener(this.onBreakpointChange);const e=JSON.parse(this.el.getAttribute("data-load-keyframe")||"{}");this.loadKeyframe=this.addDiscreteEvent(Object.assign({event:"Video: Load",start:"a0t - 200vh",end:"a0b + 100vh",anchors:[this.el],onEnter:()=>this.load()},e));const t=JSON.parse(this.el.getAttribute("data-play-keyframe")||"{}");this.playKeyframe=this.addDiscreteEvent(Object.assign({event:"Video: Play",start:"a0t - 100vh",end:"a0b",anchors:[this.el],onEnter:()=>{this.hasPlayed||(this.queueVideoPlayback(),this.hasPlayed=!0)}},t)),this.currentViewport=this.pageMetrics.breakpoint}destroy(){super.destroy(),this.loadKeyframe.remove(),this.loadKeyframe=null,this.playKeyframe.remove(),this.playKeyframe=null}load(e){if(!this.inLoadArea)return;e=e||this.currentViewport;let t=this.sources[e];this.isRetina&&(t=t.replace(e,"".concat(e,"_2x"))),t&&t!==this.previousSource&&(this.video.autoplay=this.video.readyState>=3&&!this.video.paused,this.video.src=this.previousSource=t,this.video.load())}queueVideoPlayback(){"function"==typeof this._onCanPlay&&this.video.removeEventListener("canplay",this._onCanPlay),this.video.readyState<3?(this._onCanPlay=()=>{this.video.play(),this.video.removeEventListener("canplay",this._onCanPlay)},this.video.addEventListener("canplay",this._onCanPlay)):this.video.play()}pauseVideoPlayback(){this.video.paused||this.video.pause()}set currentViewport(e){this._currentViewport=this.getViewportFullName(e),this.load(this._currentViewport)}get currentViewport(){return this._currentViewport}get isRetina(){return window.devicePixelRatio>1}get inLoadArea(){return this.loadKeyframe.isCurrentlyInRange}getViewportFullName(e){return n.matches&&this.sources.xlarge?"xlarge":{L:"large",M:"medium",S:"small"}[e]}static IS_SUPPORTED(){const e=document.documentElement.classList;return e.contains("inline-video")&&!e.contains("reduced-motion")&&!e.contains("ie")}}},{86:86}],197:[function(e,t,s){"use strict";const i=e(66),n=e(87),r=e(88),a=e(64),{applyPrices:o}=e(144);!function(){Object.assign(r,{Modal:e(188),InlineCompareModal:e(185),InlineVideo:e(186),LocalNavDarkTheme:e(187),HeroAnimation:e(184),FinishesGallery:e(182),CameraLenses:e(181),VideoQualityGallery:e(195),SmartHdrGallery:e(191),VideoEditModeIntro:e(192),NightMode:e(189),VideoViewportSource:e(196),Battery:e(180),PlaybackControl:e(190)}),i.model.BREAKPOINTS=[{name:"S",mediaQuery:"only screen and (max-width: 734px)"},{name:"M",mediaQuery:"only screen and (max-width: 1068px)"},{name:"L",mediaQuery:"only screen and (min-width: 1441px)"},{name:"L",mediaQuery:"only screen and (min-width: 1069px)"}];new n(document.querySelector(".main")).anim.on(i.model.EVENTS.ON_DOM_GROUPS_CREATED,()=>{new a});const t=document.querySelector(".hmc-link");t&&window.AC&&window.AC.iPhoneHelpMeChoose&&(t.setAttribute("data-analytics-intrapage-link",""),new window.AC.iPhoneHelpMeChoose(t)),o.loadPricingFromHTML().then(e=>{e||(document.getElementById("footnote-1").style.display="block")}),o.loadTradeInFromHTML()}()},{144:144,180:180,181:181,182:182,184:184,185:185,186:186,187:187,188:188,189:189,190:190,191:191,192:192,195:195,196:196,64:64,66:66,87:87,88:88}]},{},[197]);